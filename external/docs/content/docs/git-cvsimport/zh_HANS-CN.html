---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-cvsimport Documentation
docname: git-cvsimport
lang: zh_HANS-CN
aliases:
- "/docs/git-cvsimport/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-cvsimport - 从另一个让人由爱生恨的 SCM 中获取数据</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git cvsimport</em> [-o &lt;HEAD 分支&gt;] [-h] [-v] [-d &lt;CVSROOT&gt;]
	      [-A &lt;author-conv-file&gt;] [-p &lt;options-for-cvsps&gt;] [-P &lt;文件&gt;]
	      [-C &lt;Git 仓库&gt;] [-z &lt;fuzz&gt;] [-i] [-k] [-u] [-s &lt;subst&gt;]
	      [-a] [-m] [-M &lt;正则表达式&gt;] [-S &lt;正则表达式&gt;] [-L &lt;提交范围&gt;]
	      [-r &lt;远程仓库&gt;] [-R] [&lt;CVS 模块&gt;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>警告：</strong> <code>git cvsimport</code> 使用 cvsps 第 2 版，该版本已被视为弃用；它不能用于 cvsps 第 3 版及更高版本。 如果要一次性导入 CVS 仓库，请考虑使用 <a href="http://cvs2svn.tigris.org/cvs2git.html">cvs2git</a> 或 <a href="https://gitlab.com/esr/cvs-fast-export">cvs-fast-export</a>。</p>
</div>
<div class="paragraph">
<p>将 CVS 仓库导入 Git。它既可以创建一个新的仓库，也可以增量导入现有仓库。</p>
</div>
<div class="paragraph">
<p>将 CVS 日志分割成补丁集由 <em>cvsps</em> 完成。 至少需要 2.1 版本。</p>
</div>
<div class="paragraph">
<p><strong>警告：</strong> 在某些情况下，导入会导致不正确的结果。请参阅 <a href="#issues">ISSUES</a> 部分以获取更多参考。</p>
</div>
<div class="paragraph">
<p>您*绝对不*应该在 <em>git cvsimport</em> 创建的分支上做任何自己的工作。 默认情况下，初始导入会从 CVS 仓库的主分支创建并填充一个 "master" 分支，您可以自由使用该分支；之后，您需要自己 <em>git merge</em> 增量导入或任何 CVS 分支。 建议通过 -r 指定一个命名的远程分支，以分隔和保护导入的分支。</p>
</div>
<div class="paragraph">
<p>如果你打算建立一个所有开发者都能读写的共享公共仓库，或者如果你想使用 <a href='{{< relurl "docs/git-cvsserver/zh_HANS-CN" >}}'>git-cvsserver[1]</a>，那么你可能想做一个导入仓库的裸克隆，并将该克隆作为共享仓库。 参见 <a href='{{< relurl "docs/gitcvs-migration/zh_HANS-CN" >}}'>gitcvs-migration[7]</a>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-cvsimport--v"> <a class="anchor" href="#git-cvsimport--v"></a>-v </dt>
<dd>
<p>Verbosity: 让 <em>cvsimport</em> 报告他正在做什么。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--dltCVSROOTgt"> <a class="anchor" href="#git-cvsimport--dltCVSROOTgt"></a>-d &lt;CVSROOT&gt; </dt>
<dd>
<p>CVS 存档的根目录。可以是本地（简单路径）或远程；目前只支持 :local:、:ext: 和 :pserver: 访问方法。如果没有给出，<em>git cvsimport</em> 将尝试从 <em>CVS/Root</em> 中读取。如果没有此类文件，则会检查 <code>CVSROOT</code> 环境变量。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport-ltCVSmodulegt"> <a class="anchor" href="#git-cvsimport-ltCVSmodulegt"></a>&lt;CVS_module&gt; </dt>
<dd>
<p>要导入的 CVS 模块。相对于 &lt;CVSROOT&gt;。 如果没有给出，/git cvsimport' 会尝试从 <code>CVS/Repository</code> 中读取。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--Cltgt"> <a class="anchor" href="#git-cvsimport--Cltgt"></a>-C &lt;目标目录&gt; </dt>
<dd>
<p>要导入的 Git 仓库。 如果目录不存在，则会创建。 默认为当前目录。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--rltgt"> <a class="anchor" href="#git-cvsimport--rltgt"></a>-r &lt;远程仓库&gt; </dt>
<dd>
<p>要导入此 CVS 仓库的 Git 远程仓库。 将所有 CVS 分支移至 remotes/&lt;远程仓库&gt;/&lt;分支&gt;，类似于 <em>git clone</em> 默认使用 <em>origin</em> 的方式。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--oltbranch-for-HEADgt"> <a class="anchor" href="#git-cvsimport--oltbranch-for-HEADgt"></a>-o &lt;branch-for-HEAD&gt; </dt>
<dd>
<p>如果没有指定远程分支（通过 -r），CVS 中的 <code>HEAD</code> 分支会被导入 Git 仓库中的 <em>origin</em> 分支，因为 <code>HEAD</code> 对 Git 已经有了特殊含义。 如果指定了一个远程分支，<code>HEAD</code> 分支就会被命名为 remotes/&lt;远程仓库&gt;/master，以反映 <em>git clone</em> 行为。 如果要导入不同的分支，请使用此选项。</p>
<div class="paragraph">
<p>使用 <em>-o master</em> 继续导入最初由旧版 cvs2git 工具完成的导入。</p>
</div>
</dd>
<dt class="hdlist1" id="git-cvsimport--i"> <a class="anchor" href="#git-cvsimport--i"></a>-i </dt>
<dd>
<p>仅导入：导入后不执行检出。 该选项可确保工作目录和索引保持不变，如果不存在也不会创建。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--k"> <a class="anchor" href="#git-cvsimport--k"></a>-k </dt>
<dd>
<p>杀死关键字：将从 CVS 存档中提取带有 <em>-kk</em> 的文件，以避免出现嘈杂的更改集。强烈建议使用，但默认为关闭，以保持与早期导入树的兼容性。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--u"> <a class="anchor" href="#git-cvsimport--u"></a>-u </dt>
<dd>
<p>将标记和分支名称中的下划线转换为点。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--sltsubstgt"> <a class="anchor" href="#git-cvsimport--sltsubstgt"></a>-s &lt;subst&gt; </dt>
<dd>
<p>用 &lt;subst&gt; 代替分支名称中的字符"/"</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--pltoptions-for-cvspsgt"> <a class="anchor" href="#git-cvsimport--pltoptions-for-cvspsgt"></a>-p &lt;options-for-cvsps&gt; </dt>
<dd>
<p>cvsps 的附加选项。 选项 <code>-u</code> 和 <em>-A</em> 是隐含的，不应在此使用。</p>
<div class="paragraph">
<p>如果需要传递多个选项，请用逗号分隔。</p>
</div>
</dd>
<dt class="hdlist1" id="git-cvsimport--zltfuzzgt"> <a class="anchor" href="#git-cvsimport--zltfuzzgt"></a>-z &lt;fuzz&gt; </dt>
<dd>
<p>向 cvsps 传递时间戳模糊因子，单位为秒。如果未设置，cvsps 默认为 300 秒。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--Pltcvspsgt"> <a class="anchor" href="#git-cvsimport--Pltcvspsgt"></a>-P &lt;cvsps 输出文件&gt; </dt>
<dd>
<p>不调用 cvsps，而是读取提供的 cvsps 输出文件。在调试或在 cvsimport 之外处理 cvsps 时非常有用。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--m"> <a class="anchor" href="#git-cvsimport--m"></a>-m </dt>
<dd>
<p>尝试根据提交信息检测合并。该选项将启用默认的 regexes，尝试从提交信息中捕捉源分支名称。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--Mltgt"> <a class="anchor" href="#git-cvsimport--Mltgt"></a>-M &lt;正则表达式&gt; </dt>
<dd>
<p>尝试使用自定义正则表达式根据提交信息检测合并。也可与 <code>-m</code> 搭配使用，启用默认的 regexes。必须转义为正斜杠。</p>
<div class="paragraph">
<p>正则表达式必须在 $1 中捕获源分支名称。</p>
</div>
<div class="paragraph">
<p>该选项可多次使用，以提供多个检测 regexes。</p>
</div>
</dd>
<dt class="hdlist1" id="git-cvsimport--Sltgt"> <a class="anchor" href="#git-cvsimport--Sltgt"></a>-S &lt;正则表达式&gt; </dt>
<dd>
<p>跳过与正则表达式匹配的路径。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--a"> <a class="anchor" href="#git-cvsimport--a"></a>-a </dt>
<dd>
<p>cvsimport 默认跳过时间戳少于 10 分钟的提交。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--Lltgt"> <a class="anchor" href="#git-cvsimport--Lltgt"></a>-L &lt;限制&gt; </dt>
<dd>
<p>限制导入的提交次数。针对 cvsimport 泄露内存情况的解决方法。</p>
</dd>
<dt class="hdlist1" id="git-cvsimport--Altconvgt"> <a class="anchor" href="#git-cvsimport--Altconvgt"></a>-A &lt;作者的 conv 文件&gt; </dt>
<dd>
<p>CVS 在编写提交日志时默认使用 Unix 用户名。使用此选项和 author-conv 文件可将 CVS 中记录的姓名映射为作者姓名、电子邮件和可选的时区：</p>
<div class="listingblock">
<div class="content">
<pre>	exon=Andreas Ericsson &lt;ae@op5.se&gt;
	spawn=Simon Pawn &lt;spawn@frog-pond.org&gt; America/Chicago</pre>
</div>
</div>
<div class="paragraph">
<p><em>git cvsimport</em> 将使这些作者的 GIT_AUTHOR_NAME 和 GIT_AUTHOR_EMAIL 一直设置正确。 如果指定了时区，GIT_AUTHOR_DATE 将应用相应的偏移量。</p>
</div>
<div class="paragraph">
<p>为方便起见，每次提供 <em>-A</em> 选项时，这些数据都会被保存到 <code>$GIT_DIR/cvs-authors</code> 中，每次运行 <em>git cvsimport</em> 时，都会从同一文件中读取这些数据。</p>
</div>
<div class="paragraph">
<p>如果您打算稍后再用 <em>git cvsexportcommit</em> 将更改导出回 CVS，则不建议使用此功能。</p>
</div>
</dd>
<dt class="hdlist1" id="git-cvsimport--R"> <a class="anchor" href="#git-cvsimport--R"></a>-R </dt>
<dd>
<p>生成一个 <code>$GIT_DIR/cvs-revisions</code> 文件，其中包含从 CVS 版本号到新创建的 Git 提交 ID 的映射。 生成的文件将为导入的每一对（文件名、修订版）包含一行；每行看起来像</p>
<div class="listingblock">
<div class="content">
<pre>src/widget.c 1.1 1d862f173cdc7325b6fa6d2ae1cfd61fd1b512b7</pre>
</div>
</div>
<div class="paragraph">
<p>如果已存在修订数据，则会将其附加到文件中，以便在进行增量导入时使用。</p>
</div>
<div class="paragraph">
<p>如果在提交信息、错误跟踪系统、电子邮件归档等中存储了 CVS 版本号，该选项可能会很有用。</p>
</div>
</dd>
<dt class="hdlist1" id="git-cvsimport--h"> <a class="anchor" href="#git-cvsimport--h"></a>-h </dt>
<dd>
<p>打印简短的使用信息并退出。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_输出"><a class="anchor" href="#_输出"></a>输出</h2>
<div class="sectionbody">
<div class="paragraph">
<p>如果指定了 <code>-v</code>，脚本会报告它正在做什么。</p>
</div>
<div class="paragraph">
<p>否则，将以 Unix 的方式表示成功，即直接以零退出状态退出。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="issues"><a class="anchor" href="#issues"></a>问题</h2>
<div class="sectionbody">
<div class="paragraph">
<p>与时间戳有关的问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果 CVS 存储库中提交的时间戳不够稳定，无法用于对提交进行排序，则更改可能会以错误的顺序显示。</p>
</li>
<li>
<p>如果任何文件曾被多次 "cvs import"（如导入多个供应商发布的版本），则 HEAD 包含错误的内容。</p>
</li>
<li>
<p>如果在提交匹配时间窗口内，不同文件的时间戳顺序与修订顺序不一致，提交顺序可能会出错。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>与分支机构有关的问题:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>未提交的分支不会被导入。</p>
</li>
<li>
<p>分支点的所有文件都会添加到分支中，即使从未在 CVS 中添加过。</p>
</li>
<li>
<p>这适用于在创建子分支*之后*添加到源分支的文件：如果之前没有在子分支上提交，这些文件就会在 git 中被错误地添加到子分支上。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>与标签有关的问题：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>不会导入同一修订版上的多个标记。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果您怀疑要导入的仓库可能存在上述问题，请考虑使用 cvs2git：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>cvs2git（cvs2svn 的一部分），<code>http://subversion.apache.org/</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>