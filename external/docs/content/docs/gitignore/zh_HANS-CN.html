---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - gitignore Documentation
docname: gitignore
lang: zh_HANS-CN
aliases:
- "/docs/gitignore/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>gitignore - 指定有意不跟踪的文件</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>$XDG_CONFIG_HOME/git/ignore, $GIT_DIR/info/exclude, .gitignore</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>gitignore</code> 文件指定了 Git 追踪时应忽略的文件。 已被 Git 追踪的文件不受影响，详见下面的注释。</p>
</div>
<div class="paragraph">
<p><code>gitignore</code> 文件中的每一行都指定了一个模式。 在决定是否忽略路径时，Git 通常会检查多个来源的 <code>gitignore</code> 模式，优先级从高到低（在一个优先级内，由最后匹配的模式决定结果）：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>从支持这些模式的命令行中读取的模式。</p>
</li>
<li>
<p>模式从与路径相同目录下的 <code>.gitignore</code> 文件或任何父目录（直到工作树的顶层）中读取，上层文件中的模式会被下层文件中的模式覆盖，直到包含该文件的目录。这些模式相对于 <code>.gitignore</code> 文件的位置进行匹配。 项目通常会在其资源库中包含此类 <code>.gitignore</code> 文件，其中包含项目构建过程中生成的文件的模式。</p>
</li>
<li>
<p>从 <code>$GIT_DIR/info/exclude</code> 中读取的模式。</p>
</li>
<li>
<p>从配置变量 <code>core.excludesFile</code> 指定的文件中读取的模式。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>将模式放入哪个文件取决于模式的使用方式。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>应受版本控制并通过克隆分发到其他仓库的模式（即所有开发人员都想忽略的文件）应放入 <code>.gitignore</code> 文件。</p>
</li>
<li>
<p>特定于某个仓库但无需与其他相关仓库共享的模式（例如，存在于仓库内部但特定于某个用户工作流程的辅助文件）应放入 <code>$GIT_DIR/info/exclude</code> 文件。</p>
</li>
<li>
<p>用户希望 Git 在任何情况下都忽略的模式（例如，由用户选择的编辑器生成的备份或临时文件），一般会放入用户的 <code>~/.gitconfig</code> 中由 <code>core.excludesFile</code> 指定的文件。它的默认值是 $XDG_CONFIG_HOME/git/ignore。如果 $XDG_CONFIG_HOME 未设置或为空，则使用 $HOME/.config/git/ignore 代替。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>底层的 Git 工具，如 <em>git ls-files</em> 和 <em>git read-tree</em>，会读取命令行选项指定的 <em>gitignore</em> 模式，或从命 令行选项指定的文件中读取。 更高层次的 Git 工具，如 <em>git status</em> 和 <em>git add</em>，会使用上述指定来源的模式。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_日期格式"><a class="anchor" href="#_日期格式"></a>日期格式</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>空行不匹配任何文件，因此可以作为分隔符，以提高可读性。</p>
</li>
<li>
<p>以 # 开头的一行为注释。 对于以散列开头的模式，在第一个散列前面加上反斜杠（ "<code>\</code>" ）。</p>
</li>
<li>
<p>除非使用反斜线（"<code>\</code>"）引号，否则尾部空格将被忽略。</p>
</li>
<li>
<p>一个可选的前缀 "<code>!`</code>"，用于否定模式；任何被先前模式排除的匹配文件都将被重新包含。如果文件的父目录已被排除，则无法重新包含该文件。出于性能考虑，Git 不会列出排除的目录，因此无论在哪里定义，任何包含文件的模式都不会产生影响。 对于以 "<code>!</code>" 开头的模式，在第一个 "<code>!</code>" 前面加反斜杠（"<code>\</code>"），例如 "<code>\!important!.txt</code>"。</p>
</li>
<li>
<p>斜线 "<code>/</code>" 用作目录分隔符。分隔符可以出现在 <code>.gitignore</code> 搜索模式的开头、中间或结尾。</p>
</li>
<li>
<p>如果在模式的开头或中间（或两者都有）有分隔符，则该模式是相对于特定 <code>.gitignore</code> 文件本身的目录层级而言的。否则，该模式也可能匹配 <code>.gitignore</code> 层级以下的任何层级。</p>
</li>
<li>
<p>如果模式末尾有分隔符，则模式只能匹配目录，否则模式既可以匹配文件，也可以匹配目录。</p>
</li>
<li>
<p>例如，模式 <code>doc/frotz/</code> 匹配 <code>doc/frotz</code> 目录，但不匹配 <code>a/doc/frotz</code> 目录；而 <code>frotz/</code> 则匹配 <code>frotz</code> 和 <code>a/frotz</code> 这两个目录（所有路径都是从 <code>.gitignore</code> 文件开始的相对路径）。</p>
</li>
<li>
<p>星号 "<code>*</code>" 匹配斜线以外的任何字符。 字符 "<code>?</code>" 匹配除 "<code>/</code>" 以外的任何一个字符。 范围符号，如 "<code>[a-zA-Z]</code>"，可用于匹配范围中的一个字符。更详细的说明请参见 fnmatch(3) 和 FNM_PATHNAME 标志。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在与全路径名匹配的模式中，两个连续的星号（"<code>**</code>"）可能有特殊含义：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>"<code>**</code>"在带斜杠目录之前，表示在所有目录中匹配。例如，"<code>**/foo</code>"匹配任何文件或目录的"<code>foo</code>"，与模式"<code>foo</code>"相同。"<code>**/foo/bar</code>"匹配任何文件或目录中直接位于目录"<code>foo</code>"之下的"<code>bar</code>"。</p>
</li>
<li>
<p>路径后跟有 "<code>/**</code>" 表示匹配这个目录里面的所有文件。例如，"<code>abc/**</code>" 匹配相对于 <code>.gitignore</code> 文件的位置中目录 "<code>abc</code>" 内的所有文件，深度无限。</p>
</li>
<li>
<p>一个斜杠后面是两个连续的星号再接上一个斜杠，匹配零个或多个目录。例如，"<code>a/**/b</code>" 匹配 "<code>a/b</code>"、"<code>a/x/b</code>"、"<code>a/x/y/b</code>"，等等，依此类推。</p>
</li>
<li>
<p>其他连续星号被视为普通星号，将根据前面的规则进行匹配。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置"><a class="anchor" href="#_配置"></a>配置</h2>
<div class="sectionbody">
<div class="paragraph">
<p>可选的配置变量 <code>core.excludesFile</code> 表示包含要排除的文件名模式的文件路径，类似于 <code>$GIT_DIR/info/exclude</code>。 除 <code>$GIT_DIR/info/exclude</code> 中的模式外，还将使用排除文件中的模式。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注释"><a class="anchor" href="#_注释"></a>注释</h2>
<div class="sectionbody">
<div class="paragraph">
<p>使用 gitignore 文件的目的是确保某些不被 Git 追踪的文件不被追踪。</p>
</div>
<div class="paragraph">
<p>要停止跟踪当前已被跟踪的文件，可使用 <em>git rm --cached</em> 从索引中移除该文件。文件名随后会被添加到 <code>.gitignore</code> 文件中，以防止该文件在以后的提交中被重新引入。</p>
</div>
<div class="paragraph">
<p>访问工作树中的 <code>.gitignore</code> 文件时，Git 不会跟踪符号链接。这样，当从索引或工作树访问文件时，与从文件系统访问文件时的行为保持一致。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_实例"><a class="anchor" href="#_实例"></a>实例</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>模式 <code>hello.*</code> 匹配名称以 <code>hello.</code> 开头的任何文件或目录。如果只想将其限制在目录中，而不限制在其子目录中，则可以在模式前加上斜线，即 <code>/hello.*</code>；现在该模式可匹配 <code>hello.txt</code> 和 <code>hello.c</code> 但不匹配 <code>a/hello.java</code>。</p>
</li>
<li>
<p>模式 <code>foo/</code> 将匹配目录 <code>foo</code> 及其下的路径，但不会匹配常规文件或符号链接 <code>foo</code>（这与 Git 中 pathspec 的一般工作方式一致）</p>
</li>
<li>
<p><code>doc/frotz</code> 和 <code>/doc/frotz</code> 模式在任何 <code>.gitignore</code> 文件中都有同样的效果。换句话说，如果模式中已经有中间斜线，那么前导斜线就无关紧要了。</p>
</li>
<li>
<p>模式 <code>foo/*</code> 匹配 <code>foo/test.json</code>（一个正则文件）和 <code>foo/bar</code>（一个目录），但不匹配 <code>foo/bar/hello.c</code>（一个正则文件），因为模式中的星号不匹配 <code>bar/hello.c</code>，因为 <code>bar/hello.c</code> 中含有斜线。</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ git status
    [...]
    # 未追踪的文件:
    [...]
    #       Documentation/foo.html
    #       Documentation/gitignore.html
    #       file.o
    #       lib.a
    #       src/internal.o
    [...]
    $ cat .git/info/exclude
    # 忽略在目录树中的所有对象和存档文件
    *.[oa]
    $ cat Documentation/.gitignore
    # 忽略 html 文件,
    *.html
    # 但追踪自己写的 foo.html
    !foo.html
    $ git status
    [...]
    # 未追踪的文件:
    [...]
    #       Documentation/foo.html
    [...]</pre>
</div>
</div>
<div class="paragraph">
<p>再举一个例子：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ cat .gitignore
    vmlinux*
    $ ls arch/foo/kernel/vm*
    arch/foo/kernel/vmlinux.lds.S
    $ echo '!/vmlinux*' &gt;arch/foo/kernel/.gitignore</pre>
</div>
</div>
<div class="paragraph">
<p>第二个 .gitignore 阻止 Git 忽略 <code>arch/foo/kernel/vmlinux.lds.S</code>。</p>
</div>
<div class="paragraph">
<p>示例排除除特定目录 <code>foo/bar</code> 以外的所有内容（注意 <code>/*</code> - 如果没有斜线，通配符也会排除 <code>foo/bar</code> 中的所有内容）：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>    $ cat .gitignore
    # 排除 foo/bar 以外的所有内容
    /*
    !/foo
    /foo/*
    !/foo/bar</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参见"><a class="anchor" href="#_参见"></a>参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='{{< relurl "docs/git-rm/zh_HANS-CN" >}}'>git-rm[1]</a>, <a href='{{< relurl "docs/gitrepository-layout/zh_HANS-CN" >}}'>gitrepository-layout[5]</a>, <a href='{{< relurl "docs/git-check-ignore/zh_HANS-CN" >}}'>git-check-ignore[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>