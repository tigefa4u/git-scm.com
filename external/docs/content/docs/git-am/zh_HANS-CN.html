---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-am Documentation
docname: git-am
lang: zh_HANS-CN
aliases:
- "/docs/git-am/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-am - 从邮箱应用一系列修补程序</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git am</em> [--signoff] [--keep] [--[no-]keep-cr] [--[no-]utf8] [--no-verify]
	 [--[no-]3way] [--interactive] [--committer-date-is-author-date]
	 [--ignore-date] [--ignore-space-change | --ignore-whitespace]
	 [--whitespace=&lt;action&gt;] [-C&lt;n&gt;] [-p&lt;n&gt;] [--directory=&lt;dir&gt;]
	 [--exclude=&lt;path&gt;] [--include=&lt;path&gt;] [--reject] [-q | --quiet]
	 [--[no-]scissors] [-S[&lt;keyid&gt;]] [--patch-format=&lt;format&gt;]
	 [--quoted-cr=&lt;action&gt;]
	 [--empty=(stop|drop|keep)]
	 [(&lt;mbox&gt; | &lt;Maildir&gt;)&#8230;&#8203;]
<em>git am</em> (--continue | --skip | --abort | --quit | --retry | --show-current-patch[=(diff|raw)] | --allow-empty)</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>将邮箱中的邮件信息拆分为提交日志信息、作者信息和补丁，并将其应用到当前分支。你可以把它看作是 <a href='{{< relurl "docs/git-format-patch/zh_HANS-CN" >}}'>git-format-patch[1]</a> 的反向操作，在一个没有合并历史的分支上运行。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-am-ltmboxgtltMaildirgt82308203"> <a class="anchor" href="#git-am-ltmboxgtltMaildirgt82308203"></a>(&lt;mbox&gt;|&lt;Maildir&gt;)&#8230;&#8203; </dt>
<dd>
<p>要读取补丁的邮箱文件的列表。如果你不提供这个参数，命令将从标准输入中读取。 如果你提供目录，它们将被视为邮箱目录。</p>
</dd>
<dt class="hdlist1" id="git-am--s"> <a class="anchor" href="#git-am--s"></a>-s </dt>
<dt class="hdlist1" id="git-am---signoff"> <a class="anchor" href="#git-am---signoff"></a>--signoff </dt>
<dd>
<p>在提交信息中加入 <code>Signed-off-by</code> 的尾注，使用自己的提交者身份。 更多信息见 <a href='{{< relurl "docs/git-commit/zh_HANS-CN" >}}'>git-commit[1]</a> 中的 signoff 选项。</p>
</dd>
<dt class="hdlist1" id="git-am--k"> <a class="anchor" href="#git-am--k"></a>-k </dt>
<dt class="hdlist1" id="git-am---keep"> <a class="anchor" href="#git-am---keep"></a>--keep </dt>
<dd>
<p>传递`-k` 标志给 <em>git mailinfo</em>（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。</p>
</dd>
<dt class="hdlist1" id="git-am---keep-non-patch"> <a class="anchor" href="#git-am---keep-non-patch"></a>--keep-non-patch </dt>
<dd>
<p>将 <code>-b</code> 标志传递给 <em>git mailinfo</em>（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。</p>
</dd>
<dt class="hdlist1" id="git-am---no-keep-cr"> <a class="anchor" href="#git-am---no-keep-cr"></a>--[no-]keep-cr </dt>
<dd>
<p>使用 <code>--keep-cr</code>，调用 <em>git mailsplit</em>（见<a href='{{< relurl "docs/git-mailsplit/zh_HANS-CN" >}}'>git-mailsplit[1]</a>），并使用相同的选项，以防止它在行末剥离 CR。<code>am.keepcr</code> 配置变量可以用来指定默认行为。 <code>--no-keep-cr</code> 可以用来覆盖 <code>am.keepcr</code>。</p>
</dd>
<dt class="hdlist1" id="git-am--c"> <a class="anchor" href="#git-am--c"></a>-c </dt>
<dt class="hdlist1" id="git-am---scissors"> <a class="anchor" href="#git-am---scissors"></a>--scissors </dt>
<dd>
<p>移除正文中剪切行之前的所有内容（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。可以使用 <code>mailinfo.scissors</code> 配置变量来默认激活。</p>
</dd>
<dt class="hdlist1" id="git-am---no-scissors"> <a class="anchor" href="#git-am---no-scissors"></a>--no-scissors </dt>
<dd>
<p>忽略剪切线（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。</p>
</dd>
<dt class="hdlist1" id="git-am---quoted-crltgt"> <a class="anchor" href="#git-am---quoted-crltgt"></a>--quoted-cr=&lt;行为&gt; </dt>
<dd>
<p>这个标志将被传递给 <em>git mailinfo</em>（见 <a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。</p>
</dd>
<dt class="hdlist1" id="git-am---emptydropkeepstop"> <a class="anchor" href="#git-am---emptydropkeepstop"></a>--empty=(drop|keep|stop) </dt>
<dd>
<p>如何处理缺少补丁的电子邮件消息：</p>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-am-codedropcode"> <a class="anchor" href="#git-am-codedropcode"></a><code>drop</code> </dt>
<dd>
<p>该电子邮件会被跳过。</p>
</dd>
<dt class="hdlist1" id="git-am-codekeepcode"> <a class="anchor" href="#git-am-codekeepcode"></a><code>keep</code> </dt>
<dd>
<p>An empty commit will be created, with the contents of the e-mail message as its log.</p>
</dd>
<dt class="hdlist1" id="git-am-codestopcode"> <a class="anchor" href="#git-am-codestopcode"></a><code>stop</code> </dt>
<dd>
<p>The command will fail, stopping in the middle of the current <code>am</code> session. This is the default behavior.</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
<dt class="hdlist1" id="git-am--m"> <a class="anchor" href="#git-am--m"></a>-m </dt>
<dt class="hdlist1" id="git-am---message-id"> <a class="anchor" href="#git-am---message-id"></a>--message-id </dt>
<dd>
<p>传递 <code>-m</code> 标志给 <em>git mailinfo</em>（见 <a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>），这样 Message-ID 头会被添加到提交信息中。 <code>am.messageid</code> 配置变量可以用来指定默认行为。</p>
</dd>
<dt class="hdlist1" id="git-am---no-message-id"> <a class="anchor" href="#git-am---no-message-id"></a>--no-message-id </dt>
<dd>
<p>不要在提交信息中添加 Message-ID 头。 <code>no-message-id</code> 对于覆盖 <code>am.messageid</code> 很有用。</p>
</dd>
<dt class="hdlist1" id="git-am--q"> <a class="anchor" href="#git-am--q"></a>-q </dt>
<dt class="hdlist1" id="git-am---quiet"> <a class="anchor" href="#git-am---quiet"></a>--quiet </dt>
<dd>
<p>保持安静。只打印错误信息。</p>
</dd>
<dt class="hdlist1" id="git-am--u"> <a class="anchor" href="#git-am--u"></a>-u </dt>
<dt class="hdlist1" id="git-am---utf8"> <a class="anchor" href="#git-am---utf8"></a>--utf8 </dt>
<dd>
<p>传递 <code>-u</code> 标志给 <em>git mailinfo</em>（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。 建议从邮件中提取的提交日志信息被重新编码为 UTF-8 编码（配置变量 <code>i18n.commitEncoding</code> 可以用来指定项目的首选编码，如果它不是 UTF-8）。</p>
<div class="paragraph">
<p>这在以前的 git 版本中是可选的，但现在它是默认的。 你可以使用 <code>--no-utf8</code> 来覆盖它。</p>
</div>
</dd>
<dt class="hdlist1" id="git-am---no-utf8"> <a class="anchor" href="#git-am---no-utf8"></a>--no-utf8 </dt>
<dd>
<p>传递 <code>-n</code> 标志给 <em>git mailinfo</em>（见<a href='{{< relurl "docs/git-mailinfo/zh_HANS-CN" >}}'>git-mailinfo[1]</a>）。</p>
</dd>
<dt class="hdlist1" id="git-am--3"> <a class="anchor" href="#git-am--3"></a>-3 </dt>
<dt class="hdlist1" id="git-am---3way"> <a class="anchor" href="#git-am---3way"></a>--3way </dt>
<dt class="hdlist1" id="git-am---no-3way"> <a class="anchor" href="#git-am---no-3way"></a>--no-3way </dt>
<dd>
<p>当补丁不能干净地应用时，如果补丁记录了它应该应用到的二进制文件的身份，并且我们有这些二进制文件可以在本地使用，那么就退回到三路合并。<code>--no-3way</code> 可以用来覆盖 am.threeWay 配置变量。更多信息，见 <a href='{{< relurl "docs/git-config/zh_HANS-CN" >}}'>git-config[1]</a> 中的 am.threeWay。</p>
</dd>
<dt class="hdlist1" id="git-am---rerere-autoupdate"> <a class="anchor" href="#git-am---rerere-autoupdate"></a>--rerere-autoupdate </dt>
<dt class="hdlist1" id="git-am---no-rerere-autoupdate"> <a class="anchor" href="#git-am---no-rerere-autoupdate"></a>--no-rerere-autoupdate </dt>
<dd>
<p>在 rerere 机制重用当前冲突的记录解析来更新工作树中的文件后，允许它也用解析的结果来更新索引。 <code>--no-rerere-autoupdate`是一个很好的方法，在用单独的 `git add</code> 提交结果到索引之前，可以反复检查 <code>rerere</code> 所做的事情，并抓住潜在的错误合并。</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-am---ignore-space-change"> <a class="anchor" href="#git-am---ignore-space-change"></a>--ignore-space-change </dt>
<dt class="hdlist1" id="git-am---ignore-whitespace"> <a class="anchor" href="#git-am---ignore-whitespace"></a>--ignore-whitespace </dt>
<dt class="hdlist1" id="git-am---whitespaceltgt"> <a class="anchor" href="#git-am---whitespaceltgt"></a>--whitespace=&lt;行为&gt; </dt>
<dt class="hdlist1" id="git-am--Cltngt"> <a class="anchor" href="#git-am--Cltngt"></a>-C&lt;n&gt; </dt>
<dt class="hdlist1" id="git-am--pltngt"> <a class="anchor" href="#git-am--pltngt"></a>-p&lt;n&gt; </dt>
<dt class="hdlist1" id="git-am---directoryltgt"> <a class="anchor" href="#git-am---directoryltgt"></a>--directory=&lt;目录&gt; </dt>
<dt class="hdlist1" id="git-am---excludeltgt"> <a class="anchor" href="#git-am---excludeltgt"></a>--exclude=&lt;路径&gt; </dt>
<dt class="hdlist1" id="git-am---includeltgt"> <a class="anchor" href="#git-am---includeltgt"></a>--include=&lt;路径&gt; </dt>
<dt class="hdlist1" id="git-am---reject"> <a class="anchor" href="#git-am---reject"></a>--reject </dt>
<dd>
<p>这些标志会传递给应用补丁的 "git apply"（见 <a href='{{< relurl "docs/git-apply/zh_HANS-CN" >}}'>git-apply[1]</a>）程序。</p>
<div class="paragraph">
<p><code>--whitespace</code> 选项的有效 &lt;行为&gt; 有：<code>nowarn</code>、<code>warn</code>、<code>fix</code>、<code>error</code> 以及 <code>error-all</code>。</p>
</div>
</dd>
<dt class="hdlist1" id="git-am---patch-format"> <a class="anchor" href="#git-am---patch-format"></a>--patch-format </dt>
<dd>
<p>默认情况下，该命令将尝试自动检测补丁格式。这个选项允许用户绕过自动检测，并指定补丁的格式，以便将其解释为补丁。有效的格式是 mbox、mboxrd、stgit、stgit-series 和 hg。</p>
</dd>
<dt class="hdlist1" id="git-am--i"> <a class="anchor" href="#git-am--i"></a>-i </dt>
<dt class="hdlist1" id="git-am---interactive"> <a class="anchor" href="#git-am---interactive"></a>--interactive </dt>
<dd>
<p>交互式运行。</p>
</dd>
<dt class="hdlist1" id="git-am--n"> <a class="anchor" href="#git-am--n"></a>-n </dt>
<dt class="hdlist1" id="git-am---no-verify"> <a class="anchor" href="#git-am---no-verify"></a>--no-verify </dt>
<dd>
<p>默认情况下，会运行 pre-commit 和 commit-msg 钩子。当给出任何 <code>--no-verify</code> 或 <code>-n</code> 时，这些都会被绕过。参见链接 <a href='{{< relurl "docs/githooks/zh_HANS-CN" >}}'>githooks[5]</a>。</p>
</dd>
<dt class="hdlist1" id="git-am---committer-date-is-author-date"> <a class="anchor" href="#git-am---committer-date-is-author-date"></a>--committer-date-is-author-date </dt>
<dd>
<p>默认情况下，该命令将电子邮件中的日期作为提交者日期，并使用提交者的创建时间作为提交者日期。这使得用户可以通过使用与作者日期相同的值来谎报提交者日期。</p>
</dd>
<dt class="hdlist1" id="git-am---ignore-date"> <a class="anchor" href="#git-am---ignore-date"></a>--ignore-date </dt>
<dd>
<p>默认情况下，该命令将电子邮件中的日期作为提交者日期，并使用提交者的创建时间作为提交者日期。这使得用户可以通过使用与提交者日期相同的值来谎报作者日期。</p>
</dd>
<dt class="hdlist1" id="git-am---skip"> <a class="anchor" href="#git-am---skip"></a>--skip </dt>
<dd>
<p>跳过当前的补丁。 这只有在重新启动一个中止的补丁时才有意义。</p>
</dd>
<dt class="hdlist1" id="git-am--Sltkeyidgt"> <a class="anchor" href="#git-am--Sltkeyidgt"></a>-S[&lt;keyid&gt;] </dt>
<dt class="hdlist1" id="git-am---gpg-signltIDgt"> <a class="anchor" href="#git-am---gpg-signltIDgt"></a>--gpg-sign[=&lt;键 ID&gt;] </dt>
<dt class="hdlist1" id="git-am---no-gpg-sign"> <a class="anchor" href="#git-am---no-gpg-sign"></a>--no-gpg-sign </dt>
<dd>
<p>GPG 签名提交。<code>keyid</code> 参数是可选的，默认为提交者身份；如果指定了，则必须与选项相连，不加空格。<code>--no-gpg-sign</code> 用于还原 <code>commit.gpgSign</code> 配置变量和先前的 <code>--gpg-sign</code>。</p>
</dd>
<dt class="hdlist1" id="git-am---continue"> <a class="anchor" href="#git-am---continue"></a>--continue </dt>
<dt class="hdlist1" id="git-am--r"> <a class="anchor" href="#git-am--r"></a>-r </dt>
<dt class="hdlist1" id="git-am---resolved"> <a class="anchor" href="#git-am---resolved"></a>--resolved </dt>
<dd>
<p>补丁失败后（如试图应用冲突的补丁），用户已经手工应用，索引文件存储了应用的结果。 使用从电子邮件中提取的作者和提交日志以及当前的索引文件进行提交，然后继续运行。</p>
</dd>
<dt class="hdlist1" id="git-am---resolvemsgltgt"> <a class="anchor" href="#git-am---resolvemsgltgt"></a>--resolvemsg=&lt;消息&gt; </dt>
<dd>
<p>当发生补丁失败时，&lt;信息&gt; 将在退出前被打印到屏幕上。 这将覆盖标准信息，通知你使用 <code>--continue</code> 或 <code>--skip</code> 来处理失败。 这只是为了在 <em>git rebase</em> 和 <em>git am</em> 之间的内部使用。</p>
</dd>
<dt class="hdlist1" id="git-am---abort"> <a class="anchor" href="#git-am---abort"></a>--abort </dt>
<dd>
<p>恢复原来的分支，放弃打补丁的操作。 将 am 操作中涉及的文件内容恢复到 am 前的状态。</p>
</dd>
<dt class="hdlist1" id="git-am---quit"> <a class="anchor" href="#git-am---quit"></a>--quit </dt>
<dd>
<p>中止打补丁的操作，但保留 HEAD 和索引不被接触。</p>
</dd>
<dt class="hdlist1" id="git-am---retry"> <a class="anchor" href="#git-am---retry"></a>--retry </dt>
<dd>
<p>尝试再次应用最后冲突的补丁。这通常只在为重试尝试传递额外选项时有用（例如，<code>--3way</code>），否则你将再次看到相同的失败。</p>
</dd>
<dt class="hdlist1" id="git-am---show-current-patchdiffraw"> <a class="anchor" href="#git-am---show-current-patchdiffraw"></a>--show-current-patch[=(diff|raw)] </dt>
<dd>
<p>显示`git am` 因冲突而停止的消息。 如果指定了 <code>raw</code>，显示电子邮件的原始内容；如果是 <code>diff</code>，只显示差异部分。 默认为 <code>raw</code>。</p>
</dd>
<dt class="hdlist1" id="git-am---allow-empty"> <a class="anchor" href="#git-am---allow-empty"></a>--allow-empty </dt>
<dd>
<p>在对缺乏补丁的输入邮件信息进行补丁失败后，创建一个空的提交，将邮件信息的内容作为其日志信息。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_讨论"><a class="anchor" href="#_讨论"></a>讨论</h2>
<div class="sectionbody">
<div class="paragraph">
<p>提交者的名字取自信息的 "From:" 行，而提交者的日期则取自信息的 "Date:" 行。 "Subject:" 行是提交的标题，在去掉普通前缀 "[PATCH &lt;任何东西&gt;]" 之后。 "Sbuject: " 是为了用一行文字简洁地描述提交的内容。</p>
</div>
<div class="paragraph">
<p>"From: "、"Date: " 和 "Subject: " 行开始的正文覆盖了从标题中获取的各自的提交者名称和标题值。</p>
</div>
<div class="paragraph">
<p>提交信息由 "Subject: " 中的标题、一个空行和直到补丁开始的信息正文组成。 每行末尾多余的空格会被自动删除。</p>
</div>
<div class="paragraph">
<p>补丁应该是内联的，直接跟在信息后面。 任何形式的行：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>三个破折号和行末，或</p>
</li>
<li>
<p>以 "diff - " 开头的一行，或</p>
</li>
<li>
<p>以 "index: " 开头的一行</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>被认为是一个补丁的开始，提交日志信息在第一次出现这样的行之前就结束了。</p>
</div>
<div class="paragraph">
<p>当最初调用 <code>git am</code> 时，你给了它要处理的邮箱的名字。 当看到第一个不适用的补丁时，它就会在中间中止。 你可以通过以下两种方式之一恢复：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>通过重新运行带有 <code>--skip</code> 选项的命令，跳过当前补丁。</p>
</li>
<li>
<p>手解决工作目录中的冲突，并更新索引文件，使其进入补丁应该产生的状态。 然后用 <code>--continue</code> 选项运行该命令。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>在当前操作完成之前，该命令拒绝处理新的邮箱，所以如果你决定从头开始，在运行带有邮箱名称的命令之前，运行 <code>git am --abort</code>。</p>
</div>
<div class="paragraph">
<p>在应用任何补丁之前，ORIG_HEAD 被设置为当前分支的顶端。 如果你在多个提交中遇到问题，比如在错误的分支上运行 <em>git am</em>，或者提交中的错误更容易通过改变邮箱来解决（比如 "From: " 行中的错误），这就很有用了。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_钩子"><a class="anchor" href="#_钩子"></a>钩子</h2>
<div class="sectionbody">
<div class="paragraph">
<p>这个命令可以运行 <code>applypatch-msg</code>, <code>pre-applypatch</code>, 和 <code>post-applypatch</code> 钩子。 更多信息见 <a href='{{< relurl "docs/githooks/zh_HANS-CN" >}}'>githooks[5]</a>。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_配置"><a class="anchor" href="#_配置"></a>配置</h2>
<div class="sectionbody">
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Missing <code>zh_HANS-CN/includes/cmd-config-section-all.txt</code></p>
</div>
<div class="paragraph">
<p>See original version for this content.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
<div class="paragraph">
<p>Missing <code>zh_HANS-CN/config/am.txt</code></p>
</div>
<div class="paragraph">
<p>See original version for this content.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参见"><a class="anchor" href="#_参见"></a>参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='{{< relurl "docs/git-apply/zh_HANS-CN" >}}'>git-apply[1]</a>, <a href='{{< relurl "docs/git-format-patch/zh_HANS-CN" >}}'>git-format-patch[1]</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>