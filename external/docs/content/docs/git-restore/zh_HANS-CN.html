---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-restore Documentation
docname: git-restore
lang: zh_HANS-CN
aliases:
- "/docs/git-restore/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-restore - 恢复工作树文件</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git restore</em> [&lt;options&gt;] [--source=&lt;tree&gt;] [--staged] [--worktree] [--] &lt;pathspec&gt;&#8230;&#8203;
<em>git restore</em> [&lt;options&gt;] [--source=&lt;tree&gt;] [--staged] [--worktree] --pathspec-from-file=&lt;file&gt; [--pathspec-file-nul] 。
<em>git restore</em> (-p|--patch) [&lt;options&gt;] [--source=&lt;tree&gt;] [--staged] [--worktree] [--] [&lt;pathspec&gt;&#8230;&#8203;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>用还原源的一些内容还原工作树中的指定路径。如果一个路径被跟踪，但在还原源中不存在，它将被删除以匹配源。</p>
</div>
<div class="paragraph">
<p>该命令还可以用来用`--staged`恢复索引中的内容，或者用`--staged --worktree`同时恢复工作树和索引。</p>
</div>
<div class="paragraph">
<p>默认情况下，如果给了`--staged`，内容将从`HEAD`恢复，否则从索引恢复。使用`--source`来恢复不同的提交。</p>
</div>
<div class="paragraph">
<p>关于这三个命令的区别，见<a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a>中的 "重置、恢复和还原"。</p>
</div>
<div class="paragraph">
<p>这个命令是试验性的。其行为可能会改变。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-restore--sltgt"> <a class="anchor" href="#git-restore--sltgt"></a>-s &lt;目录树&gt; </dt>
<dt class="hdlist1" id="git-restore---sourceltgt"> <a class="anchor" href="#git-restore---sourceltgt"></a>--source=&lt;目录树&gt; </dt>
<dd>
<p>用给定树的内容恢复工作树的文件。通常是通过命名与之相关的提交、分支或标签来指定源树。</p>
<div class="paragraph">
<p>如果没有指定，如果给了`--staged`，则从`HEAD`恢复内容，否则从索引恢复。</p>
</div>
<div class="paragraph">
<p>作为一种特殊情况，如果正好有一个合并基数，你可以使用`"A&#8230;&#8203;B "作为`A`和`B`的合并基数的快捷方式。你最多可以漏掉`A`和`B`中的一个，在这种情况下，它默认为`HEAD`。</p>
</div>
</dd>
<dt class="hdlist1" id="git-restore--p"> <a class="anchor" href="#git-restore--p"></a>-p </dt>
<dt class="hdlist1" id="git-restore---patch"> <a class="anchor" href="#git-restore---patch"></a>--patch </dt>
<dd>
<p>交互式地选择还原源和还原位置之间的差异中的猎物。参见 <a href='{{< relurl "docs/git-add/zh_HANS-CN" >}}'>git-add[1]</a> 的 <em>'互动模式</em>' 部分，了解如何操作 <code>--patch</code> 模式。</p>
<div class="paragraph">
<p>请注意，`--patch`可以不接受任何pathspec，并会提示恢复所有修改的路径。</p>
</div>
</dd>
<dt class="hdlist1" id="git-restore--W"> <a class="anchor" href="#git-restore--W"></a>-W </dt>
<dt class="hdlist1" id="git-restore---worktree"> <a class="anchor" href="#git-restore---worktree"></a>--worktree </dt>
<dt class="hdlist1" id="git-restore--S"> <a class="anchor" href="#git-restore--S"></a>-S </dt>
<dt class="hdlist1" id="git-restore---staged"> <a class="anchor" href="#git-restore---staged"></a>--staged </dt>
<dd>
<p>指定恢复的位置。如果两个选项都没有指定，默认情况下会还原工作树。指定`--staged`将只恢复索引。指定两个选项将同时还原。</p>
</dd>
<dt class="hdlist1" id="git-restore--q"> <a class="anchor" href="#git-restore--q"></a>-q </dt>
<dt class="hdlist1" id="git-restore---quiet"> <a class="anchor" href="#git-restore---quiet"></a>--quiet </dt>
<dd>
<p>安静，抑制反馈信息。意味着 <code>--no-progress</code>。</p>
</dd>
<dt class="hdlist1" id="git-restore---progress"> <a class="anchor" href="#git-restore---progress"></a>--progress </dt>
<dt class="hdlist1" id="git-restore---no-progress"> <a class="anchor" href="#git-restore---no-progress"></a>--no-progress </dt>
<dd>
<p>当它附加到终端时，除非指定 <code>--quiet</code>，否则默认情况下会在标准错误流中报告进度状态。这个标志可以启用进度报告，即使没有附在到终端，而不管 <code>--quiet</code>。</p>
</dd>
<dt class="hdlist1" id="git-restore---ours"> <a class="anchor" href="#git-restore---ours"></a>--ours </dt>
<dt class="hdlist1" id="git-restore---theirs"> <a class="anchor" href="#git-restore---theirs"></a>--theirs </dt>
<dd>
<p>从索引中恢复工作目录树中的文件时，未合并的路径应使用第 #2 阶段（‘我们的’）或第 #3 阶段（‘他们的’）。 从工作目录树（即使用 <code>--source</code> 选项）中检出路径时，不能使用该选项。</p>
<div class="paragraph">
<p>注意，在`git rebase`和`git pull --rebase`过程中，'我们的&#8217;和&#8217;他们的&#8217;可能会出现互换。详见 <a href='{{< relurl "docs/git-checkout/zh_HANS-CN" >}}'>git-checkout[1]</a> 中对相同选项的解释。</p>
</div>
</dd>
<dt class="hdlist1" id="git-restore--m"> <a class="anchor" href="#git-restore--m"></a>-m </dt>
<dt class="hdlist1" id="git-restore---merge"> <a class="anchor" href="#git-restore---merge"></a>--merge </dt>
<dd>
<p>从索引中恢复工作目录树上的文件时，在未合并路径中重新创建冲突合并。 该选项不能用于从工作目录树中检出路径（即使用 <code>--source</code> 选项）。</p>
</dd>
<dt class="hdlist1" id="git-restore---conflictltgt"> <a class="anchor" href="#git-restore---conflictltgt"></a>--conflict=&lt;样式&gt; </dt>
<dd>
<p>与上面的 <code>--merge</code> 选项相同，但改变了冲突块的显示方式，覆盖 <code>merge.conflictStyle</code> 配置变量。可能的值是 "merge"（默认）和 "diff3"（除了 "merge" 样式显示的内容外，还显示原始内容）。</p>
</dd>
<dt class="hdlist1" id="git-restore---ignore-unmerged"> <a class="anchor" href="#git-restore---ignore-unmerged"></a>--ignore-unmerged </dt>
<dd>
<p>当从索引中恢复工作目录树上的文件时，如果有未合并的条目，并且没有指定 <code>--ours</code>、<code>--theirs</code> 、<code>--merge</code> 或 <code>--conflict</code> ，不要中止操作。工作目录树上未合并的路径将被忽略。</p>
</dd>
<dt class="hdlist1" id="git-restore---ignore-skip-worktree-bits"> <a class="anchor" href="#git-restore---ignore-skip-worktree-bits"></a>--ignore-skip-worktree-bits </dt>
<dd>
<p>在稀疏检出模式下，默认情况下只更新由`&lt;路径规范&gt;<code>和$GIT_DIR/info/sparse-checkout 中稀疏模式匹配的条目。这个选项忽略了稀疏模式，无条件地恢复了符合 `&lt;路径规范&gt;</code> 中的任何文件。</p>
</dd>
<dt class="hdlist1" id="git-restore---recurse-submodules"> <a class="anchor" href="#git-restore---recurse-submodules"></a>--recurse-submodules </dt>
<dt class="hdlist1" id="git-restore---no-recurse-submodules"> <a class="anchor" href="#git-restore---no-recurse-submodules"></a>--no-recurse-submodules </dt>
<dd>
<p>如果`&lt;pathspec&gt;<code>命名了一个活动的子模块，并且恢复的位置包括工作树，只有在给出这个选项的情况下，子模块才会被更新，在这种情况下，它的工作树将被恢复到超级项目中记录的提交，并且任何本地修改都会被覆盖。如果什么都不使用（或</code>--no-recurse-submodules`），子模块的工作树将不会被更新。就像<a href='{{< relurl "docs/git-checkout/zh_HANS-CN" >}}'>git-checkout[1]</a>，这将分离子模块的`HEAD`。</p>
</dd>
<dt class="hdlist1" id="git-restore---overlay"> <a class="anchor" href="#git-restore---overlay"></a>--overlay </dt>
<dt class="hdlist1" id="git-restore---no-overlay"> <a class="anchor" href="#git-restore---no-overlay"></a>--no-overlay </dt>
<dd>
<p>在覆盖模式下，该命令在恢复时不会删除文件。在无覆盖模式下，不出现在 <code>--source</code> 树中的被追踪文件会被删除，以使它们与 <code>&lt;目录树&gt;</code> 完全匹配。默认是无覆盖模式。</p>
</dd>
<dt class="hdlist1" id="git-restore---pathspec-from-fileltfilegt"> <a class="anchor" href="#git-restore---pathspec-from-fileltfilegt"></a>--pathspec-from-file=&lt;file&gt; </dt>
<dd>
<p>Pathspec 在 <code>&lt;文件&gt;</code> 中传递，而不是在命令行参数中传递。如果 <code>&lt;文件&gt;</code> 正好是 <code>-</code>，则使用标准输入。路径规范元素由 LF 或 CR/LF 分隔。可以引用配置变量 <code>core.quotePath</code> 的路径规范元素（请参见 <a href='{{< relurl "docs/git-config/zh_HANS-CN" >}}'>git-config[1]</a>）。另请参见 <code>--pathspec-file-nul</code> 和全局 <code>--literal-pathspecs</code>。</p>
</dd>
<dt class="hdlist1" id="git-restore---pathspec-file-nul"> <a class="anchor" href="#git-restore---pathspec-file-nul"></a>--pathspec-file-nul </dt>
<dd>
<p>只有在使用 <code>--pathspec-from-file</code> 选项时才有意义。指定路径元素用 NUL 字符分隔，所有其他字符都按字面意思（包括换行符和引号）表示。</p>
</dd>
<dt class="hdlist1" id="git-restore---"> <a class="anchor" href="#git-restore---"></a>-- </dt>
<dd>
<p>不将之后的参数解释为选项。</p>
</dd>
<dt class="hdlist1" id="git-restore-ltgt82308203"> <a class="anchor" href="#git-restore-ltgt82308203"></a>&lt;路径规范&gt;&#8230;&#8203; </dt>
<dd>
<p>限制受操作影响的路径。</p>
<div class="paragraph">
<p>更多细节请参见 <a href='{{< relurl "docs/gitglossary/zh_HANS-CN" >}}'>gitglossary[7]</a> 中的 <em>路径规范</em> 条目。</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_实例"><a class="anchor" href="#_实例"></a>实例</h2>
<div class="sectionbody">
<div class="paragraph">
<p>下面的序列切换到 "master "分支，将 "Makefile "恢复到两个修订版，错误地删除了hello.c，并从索引中取回它。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git switch master
$ git restore --source master~2 Makefile  <b class="conum">(1)</b>
$ rm -f hello.c
$ git restore hello.c                     <b class="conum">(2)</b></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>将一个文件从另一个提交中取出</p>
</li>
<li>
<p>从索引中恢复 hello.c</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果你想恢复_所有的C源文件，使之与索引中的版本一致，你可以说</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore '*.c'</pre>
</div>
</div>
<div class="paragraph">
<p>注意 "*.c "周围的引号。 文件`hello.c`也将被恢复，尽管它已经不在工作树中了，因为文件globbing是用来匹配索引中的条目的（不是由shell在工作树中）。</p>
</div>
<div class="paragraph">
<p>要恢复当前目录下的所有文件</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore .</pre>
</div>
</div>
<div class="paragraph">
<p>或者用 <em>top</em> 路径规范恢复所有工作目录树文件（见<a href='{{< relurl "docs/gitglossary/zh_HANS-CN" >}}'>gitglossary[7]</a>）</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore :/</pre>
</div>
</div>
<div class="paragraph">
<p>将索引中的文件恢复到与 <code>HEAD</code> 中的版本一致（这与使用<a href='{{< relurl "docs/git-reset/zh_HANS-CN" >}}'>git-reset[1]</a>相同）</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore --staged hello.c</pre>
</div>
</div>
<div class="paragraph">
<p>或者你可以同时恢复索引和工作目录树（这与使用 <a href='{{< relurl "docs/git-checkout/zh_HANS-CN" >}}'>git-checkout[1]</a> 相同）</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore --source=HEAD --staged --worktree hello.c</pre>
</div>
</div>
<div class="paragraph">
<p>或更实用但可读性较差的简短形式：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ git restore -s@ -SW hello.c</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参见"><a class="anchor" href="#_参见"></a>参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='{{< relurl "docs/git-checkout/zh_HANS-CN" >}}'>git-checkout[1]</a>, <a href='{{< relurl "docs/git-reset/zh_HANS-CN" >}}'>git-reset[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>