---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-reflog Documentation
docname: git-reflog
lang: zh_HANS-CN
aliases:
- "/docs/git-reflog/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-reflog - 管理重引用日志信息</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git reflog</em> [show] [&lt;log-options&gt;] [&lt;ref&gt;]
<em>git reflog list</em>
<em>git reflog expire</em> [--expire=&lt;time&gt;] [--expire-unreachable=&lt;time&gt;]
	[--rewrite] [--updateref] [--stale-fix]
	[--dry-run | -n] [--verbose] [--all [--single-worktree] | &lt;refs&gt;&#8230;&#8203;]
<em>git reflog delete</em> [--rewrite] [--updateref]
	[--dry-run | -n] [--verbose] &lt;ref&gt;@{&lt;specifier&gt;}&#8230;&#8203;
<em>git reflog exists</em> &lt;ref&gt;</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>该命令管理记录在引用日志中的信息。</p>
</div>
<div class="paragraph">
<p>引用日志（或称 "reflogs"）记录了本地仓库中分支和其他引用的提示更新时间。参考日志在各种 Git 命令中都很有用，可以用来指定引用的旧值。例如，<code>HEAD@{2}</code> 表示 “两步前 HEAD 所在的位置”，<code>master@{one.week.ago}</code> 表示 “一周前本仓库中 master 所在的位置”，等等。详见 <a href='{{< relurl "docs/gitrevisions/zh_HANS-CN" >}}'>gitrevisions[7]</a>。</p>
</div>
<div class="paragraph">
<p>该命令采取不同的子命令，并根据子命令有不同的选项：</p>
</div>
<div class="paragraph">
<p>"show" 子命令（也是默认命令，在没有任何子命令的情况下）显示命令行中提供的引用日志（或默认的 <code>HEAD</code>）。引用日志包括所有最近的操作，此外，<code>HEAD</code> 引用日志还记录分支切换。 <code>git reflog show</code> 是 <code>git log -g --abbrev-commit --pretty=oneline</code> 的别名；详见 <a href='{{< relurl "docs/git-log/zh_HANS-CN" >}}'>git-log[1]</a>。</p>
</div>
<div class="paragraph">
<p>"list" 子命令列出了所有具有相应引用日志的引用。</p>
</div>
<div class="paragraph">
<p>"expire" 子命令用于删除旧的引用日志条目。超过 <code>expire</code> 时间的条目，或超过 <code>expire-unreachable</code> 时间且当前 tip 无法访问的条目，都会从引用日志中删除。 终端用户通常不会直接使用该子项，请参见 <a href='{{< relurl "docs/git-gc/zh_HANS-CN" >}}'>git-gc[1]</a>。</p>
</div>
<div class="paragraph">
<p>"delete" 子命令用于删除应用日志中的单个条目。其参数必须是一个_exact_条目（例如"<code>git reflog delete master@{2}</code>"）。最终用户通常也不会直接使用该子命令。</p>
</div>
<div class="paragraph">
<p>"exists" 子命令检查引用是否有引用日志。 如果引用日志存在，则以零状态退出；如果不存在，则以非零状态退出。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_show显示的选项"><a class="anchor" href="#_show显示的选项"></a><code>show</code>（显示）的选项</h3>
<div class="paragraph">
<p><code>git reflog show</code> 接受 <code>git log</code> 接受的任何选项。</p>
</div>
</div>
<div class="sect2">
<h3 id="_expire_的选项"><a class="anchor" href="#_expire_的选项"></a><code>expire</code> 的选项</h3>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-reflog---all"> <a class="anchor" href="#git-reflog---all"></a>--all </dt>
<dd>
<p>处理所有引用的引用日志。</p>
</dd>
<dt class="hdlist1" id="git-reflog---single-worktree"> <a class="anchor" href="#git-reflog---single-worktree"></a>--single-worktree </dt>
<dd>
<p>默认情况下，如果指定了 `--all`选项，所有工作区的引用日志都会被处理。此选项限制只处理当前工作区的引用日志。</p>
</dd>
<dt class="hdlist1" id="git-reflog---expireltgt"> <a class="anchor" href="#git-reflog---expireltgt"></a>--expire=&lt;时间&gt; </dt>
<dd>
<p>剪除超过指定时间的条目。如果未指定此选项，则过期时间取自配置设置 <code>gc.reflogExpire</code>，默认为 90 天。<code>--expire=all</code> 会剪除任何年龄的条目；<code>--expire=never</code> 会关闭剪除可到达条目的功能（但请参阅 <code>--expire-unreachable</code>）。</p>
</dd>
<dt class="hdlist1" id="git-reflog---expire-unreachableltgt"> <a class="anchor" href="#git-reflog---expire-unreachableltgt"></a>--expire-unreachable=&lt;时间&gt; </dt>
<dd>
<p>剪除从分支当前顶端无法到达的超过 <code>&lt;时间&gt;</code> 的条目。如果未指定此选项，则过期时间取自配置设置 <code>gc.reflogExpireUnreachable</code>，默认为 30 天。<code>--expire-unreachable=all</code> 会修剪无法访问的条目，无论其年龄大小；<code>--expire-unreachable=never</code> 会关闭对无法访问条目的早期修剪（但请参见 <code>--expire</code>）。</p>
</dd>
<dt class="hdlist1" id="git-reflog---updateref"> <a class="anchor" href="#git-reflog---updateref"></a>--updateref </dt>
<dd>
<p>如果前一个顶层条目已被剪枝，则将引用更新为顶层引用日志条目的值（即 &lt;引用&gt;@{0}）。 (符号引用将忽略此选项）</p>
</dd>
<dt class="hdlist1" id="git-reflog---rewrite"> <a class="anchor" href="#git-reflog---rewrite"></a>--rewrite </dt>
<dd>
<p>如果重写日志条目的前一个条目被剪枝，则调整其 “旧” SHA-1，使其等于现在排在其前面的条目的 “新” SHA-1 字段。</p>
</dd>
<dt class="hdlist1" id="git-reflog---stale-fix"> <a class="anchor" href="#git-reflog---stale-fix"></a>--stale-fix </dt>
<dd>
<p>删除任何指向 “中断提交” 的引用日志条目。中断提交是指从任何引用提示都无法到达的提交，它直接或间接地指向丢失的提交、树或二进制对象。</p>
<div class="paragraph">
<p>这种计算涉及遍历所有可到达的对象，也就是说，其代价与 <em>git prune</em> 相同。 它的主要目的是修复旧版本 Git 垃圾回收所造成的损坏，因为旧版本的 Git 无法保护引用日志所引用的对象。</p>
</div>
</dd>
<dt class="hdlist1" id="git-reflog--n"> <a class="anchor" href="#git-reflog--n"></a>-n </dt>
<dt class="hdlist1" id="git-reflog---dry-run"> <a class="anchor" href="#git-reflog---dry-run"></a>--dry-run </dt>
<dd>
<p>不要实际修剪任何条目，只需显示本应修剪的内容。</p>
</dd>
<dt class="hdlist1" id="git-reflog---verbose"> <a class="anchor" href="#git-reflog---verbose"></a>--verbose </dt>
<dd>
<p>在屏幕上打印额外信息。</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_delete删除的选项"><a class="anchor" href="#_delete删除的选项"></a><code>delete</code>（删除）的选项</h3>
<div class="paragraph">
<p><code>git reflog delete</code> 接受选项 <code>--updateref</code>、<code>--rewrite</code>、<code>-n</code>、<code>--dry-run</code> 和 <code>--verbose</code>，其含义与与 <code>expire</code> 一起使用时相同。</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>