---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-for-each-ref Documentation
docname: git-for-each-ref
lang: zh_HANS-CN
aliases:
- "/docs/git-for-each-ref/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-for-each-ref - 输出每个引用的信息</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git for-each-ref</em> [--count=&lt;count&gt;] [--shell|--perl|--python|--tcl]
		   [(--sort=&lt;key&gt;)&#8230;&#8203;] [--format=&lt;format&gt;]
		   [--include-root-refs] [ --stdin | &lt;pattern&gt;&#8230;&#8203; ]
		   [--points-at=&lt;object&gt;]
		   [--merged[=&lt;object&gt;]] [--no-merged[=&lt;object&gt;]]
		   [--contains[=&lt;object&gt;]] [--no-contains[=&lt;object&gt;]]
		   [--exclude=&lt;pattern&gt; &#8230;&#8203;]</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>遍历所有与 <code>&lt;模式&gt;</code> 匹配的引用，并根据给定的 <code>&lt;格式&gt;</code> 显示它们，然后根据给定的 <code>&lt;键&gt;</code> 对它们进行排序。 如果给定了 <code>&lt;数量&gt;</code>，则在显示这么多记录后停止。 在指定的宿主语言中，<code>&lt;格式&gt;</code> 中的内插值可选择引用为字符串字面量，以便在该语言中直接求值。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-for-each-ref-ltgt82308203"> <a class="anchor" href="#git-for-each-ref-ltgt82308203"></a>&lt;模式&gt;&#8230;&#8203; </dt>
<dd>
<p>如果给出一个或多个模式，则只显示至少与一个模式匹配的 refs，匹配方式可以是使用 fnmatch(3) 或字面匹配，在后一种情况下，完全匹配或从头匹配到斜线。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---stdin"> <a class="anchor" href="#git-for-each-ref---stdin"></a>--stdin </dt>
<dd>
<p>如果提供了 <code>--stdin</code>，则会从标准输入而不是参数列表中读取模式列表。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---countltgt"> <a class="anchor" href="#git-for-each-ref---countltgt"></a>--count=&lt;数量&gt; </dt>
<dd>
<p>默认情况下，该命令会显示与 <code>&lt;模式&gt;</code> 匹配的所有记录。 该选项可使其在显示了这么多索引后停止。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---sortltgt"> <a class="anchor" href="#git-for-each-ref---sortltgt"></a>--sort=&lt;键&gt; </dt>
<dd>
<p>要排序的字段名。 前缀 <code>-</code> 表示按值的降序排序。 如果未指定，则使用 <code>引用名</code> 。 可以多次使用 --sort=&lt;键&gt; 选项，在这种情况下，最后一个键将成为主键。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---formatltgt"> <a class="anchor" href="#git-for-each-ref---formatltgt"></a>--format=&lt;格式&gt; </dt>
<dd>
<p>一个字符串，从显示的 ref 和它指向的对象之间插入 <code>%(字段名)</code>。此外，字符串字面 <code>%%</code> 会显示为 <code>%</code>，而 <code>%xx</code> - 其中 <code>xx</code> 是十六进制数字 - 会显示为十六进制代码 <code>xx</code> 的字符。例如，<code>%00`插值为 `\0</code> (NUL)，<code>%09`插值为 `\t</code> (TAB)，<code>%0a`插值为 `\n</code> (LF)。</p>
<div class="paragraph">
<p>未指定时，<code>&lt;格式&gt;</code> 默认为 <code>%(对象名) SPC %(对象类型) TAB %(引用名)</code>。</p>
</div>
</dd>
<dt class="hdlist1" id="git-for-each-ref---colorltwhengt"> <a class="anchor" href="#git-for-each-ref---colorltwhengt"></a>--color[=&lt;when&gt;] </dt>
<dd>
<p>尊重`--format`选项中指定的任何颜色。<code>&lt;什么时候&gt;`字段必须是`always</code>、<code>never`或`auto`之一（如果没有</code>&lt;什么时候&gt;<code>，则表现为`always</code>）。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---shell"> <a class="anchor" href="#git-for-each-ref---shell"></a>--shell </dt>
<dt class="hdlist1" id="git-for-each-ref---perl"> <a class="anchor" href="#git-for-each-ref---perl"></a>--perl </dt>
<dt class="hdlist1" id="git-for-each-ref---python"> <a class="anchor" href="#git-for-each-ref---python"></a>--python </dt>
<dt class="hdlist1" id="git-for-each-ref---tcl"> <a class="anchor" href="#git-for-each-ref---tcl"></a>--tcl </dt>
<dd>
<p>如果给定，替代 <code>%(字段名)</code> 占位符的字符串将被引述为适合指定主机语言的字符串字面量。 这样做的目的是生成可直接 <code>eval</code> 的脚本。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---points-atltgt"> <a class="anchor" href="#git-for-each-ref---points-atltgt"></a>--points-at=&lt;对象&gt; </dt>
<dd>
<p>只列出指向给定对象的引用。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---mergedltgt"> <a class="anchor" href="#git-for-each-ref---mergedltgt"></a>--merged[=&lt;对象&gt;] </dt>
<dd>
<p>仅列出提示可从指定提交（如未指定，则为 HEAD）到达的引用。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---no-mergedltgt"> <a class="anchor" href="#git-for-each-ref---no-mergedltgt"></a>--no-merged[=&lt;对象&gt;] </dt>
<dd>
<p>仅列出提示无法从指定提交（如未指定，则为 HEAD）到达的引用。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---containsltgt"> <a class="anchor" href="#git-for-each-ref---containsltgt"></a>--contains[=&lt;对象&gt;] </dt>
<dd>
<p>仅列出包含指定提交（如未指定，则为 HEAD）的引用。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---no-containsltgt"> <a class="anchor" href="#git-for-each-ref---no-containsltgt"></a>--no-contains[=&lt;对象&gt;] </dt>
<dd>
<p>仅列出不包含指定提交的引用（如未指定，则为 HEAD）。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---ignore-case"> <a class="anchor" href="#git-for-each-ref---ignore-case"></a>--ignore-case </dt>
<dd>
<p>排序和筛选引用不区分大小写。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---omit-empty"> <a class="anchor" href="#git-for-each-ref---omit-empty"></a>--omit-empty </dt>
<dd>
<p>在格式化的引用后不打印换行，因为格式化的引用会扩展为空字符串。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---excludeltgt"> <a class="anchor" href="#git-for-each-ref---excludeltgt"></a>--exclude=&lt;模式&gt; </dt>
<dd>
<p>如果给出一个或多个模式，则只显示不匹配任何排除模式的参考文件。匹配规则与上文的 <code>&lt;模式&gt;</code> 相同。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref---include-root-refs"> <a class="anchor" href="#git-for-each-ref---include-root-refs"></a>--include-root-refs </dt>
<dd>
<p>列出根引用（HEAD 和伪引用），除了常规引用之外。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_字段名"><a class="anchor" href="#_字段名"></a>字段名</h2>
<div class="sectionbody">
<div class="paragraph">
<p>引用对象中结构化字段的各种值可用于插值到输出结果中，或用作排序键。</p>
</div>
<div class="paragraph">
<p>所有对象都可以使用以下名称：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-for-each-ref-"> <a class="anchor" href="#git-for-each-ref-"></a>引用名 </dt>
<dd>
<p>引用的名称（$GIT_DIR/ 后面的部分）。 对于非含混的引用短名，可添加 <code>:short</code>。 选项 core.warnAmbiguousRefs 用于选择严格缩写模式。如果添加了 <code>lstrip=&lt;N&gt;</code> (<code>rstrip=&lt;N&gt;</code>)，则会从引用名的前面（后面）删除 <code>&lt;N&gt;</code> 斜线分隔的路径组件（例如，<code>%(refname:lstrip=2)</code> 会将 <code>refs/tags/foo</code> 变成 <code>foo</code>，<code>%(refname:rstrip=2)</code> 会将 <code>refs/tags/foo</code> 变成 <code>refs</code>）。 如果 <code>&lt;N&gt;</code> 是负数，则从指定的末端剥离尽可能多的路径组件，以留下 <code>-&lt;N&gt;</code> 路径组件（例如，<code>%(refname:lstrip=-2)</code> 将 <code>refs/tags/foo</code> 转换为 <code>tags/foo</code> 和 <code>%(refname:rstrip=-1)</code> 将 <code>refs/tags/foo</code> 转换为 <code>refs</code>）。当引用没有足够的组件时，如果使用正 &lt;N&gt; 进行剥离，结果将变为空字符串；如果使用负 &lt;N&gt; 进行剥离，结果将变为完整的引用名称。 这两种情况都不是错误。</p>
<div class="paragraph">
<p><code>strip</code> 可作为 <code>lstrip</code> 的同义词使用。</p>
</div>
</dd>
<dt class="hdlist1" id="git-for-each-ref-objecttype"> <a class="anchor" href="#git-for-each-ref-objecttype"></a>objecttype </dt>
<dd>
<p>对象的类型（ <code>blob</code> ， <code>tree</code> ， <code>commit</code> ， <code>tag</code> ）。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-objectsize"> <a class="anchor" href="#git-for-each-ref-objectsize"></a>objectsize </dt>
<dd>
<p>对象的大小（与 <em>git cat-file -s</em> 报告相同）。 添加 <code>:disk</code> 可获得对象在磁盘上所占的大小（以字节为单位）。请参阅下文 <code>注意事项</code> 部分关于磁盘大小的说明。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-objectname"> <a class="anchor" href="#git-for-each-ref-objectname"></a>objectname </dt>
<dd>
<p>对象名称（又称 SHA-1）。 如果是对象名称的非明确缩写，请添加 <code>:short</code>。 若要使用具有所需长度的对象名称缩写，请添加 <code>:short=&lt;长度&gt;</code>，其中最小长度为 MINIMUM_ABBREV。为确保对象名称的唯一性，长度可以超出设定值。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-deltabase"> <a class="anchor" href="#git-for-each-ref-deltabase"></a>deltabase </dt>
<dd>
<p>如果给定对象存储为 delta，则扩展为 delta 基的对象名称。 否则，它会扩展为空对象名称（全部为零）。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref--1"> <a class="anchor" href="#git-for-each-ref--1"></a>上有仓库 </dt>
<dd>
<p>可视为显示引用的 <em>'上游</em>' 的本地引用的名称。与上面的 <code>引用名</code> 相同，尊重 <code>:short</code>、<code>:lstrip</code> 和 <code>:rstrip</code>。 此外，还尊重 <code>:track</code>，以显示 "[前方 N，后方 M]" 和 <code>:trackshort</code>，以显示简短版本："&gt;"（在前）、"&lt;"（在后）、"&lt;&gt;"（在前和在后）或 "="（同步）。每当遇到未知的上游引用时，<code>:track</code> 也会打印 "[gone]"。添加 <code>:track,nobracket</code>，可显示不带括号的跟踪信息（即 "前方 N，后方 M"）。</p>
<div class="paragraph">
<p>对于任何远程跟踪分支 <code>%(upstream)</code>，<code>%(upstream:remotename)</code> 和 <code>%(upstream:remoteref)`分别指远程的名称和被跟踪的远程引用名称。换句话说，远程跟踪分支可以通过使用引用规范 `%(upstream:remoteref):%(upstream)</code> 从 <code>%(upstream:remotename)</code> 抓取来明确地单独更新。</p>
</div>
<div class="paragraph">
<p>如果引用没有关联跟踪信息，则该选项无效。 除 <code>nobracket</code> 以外的所有选项都是互斥的，但如果同时使用，则选择最后一个选项。</p>
</div>
</dd>
<dt class="hdlist1" id="git-for-each-ref-push"> <a class="anchor" href="#git-for-each-ref-push"></a>push </dt>
<dd>
<p>本地引用的名称，代表显示引用的 <code>@{push}`位置。与 `upstream</code> 相同，尊重 <code>:short</code>、<code>:lstrip</code>、<code>:rstrip</code>、<code>:track</code>、<code>:trackshort</code>、<code>:remotename</code> 和 <code>:remoteref`选项。如果没有配置 `@{push}</code> ref，则产生空字符串。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-HEAD"> <a class="anchor" href="#git-for-each-ref-HEAD"></a>HEAD </dt>
<dd>
<p>如果 HEAD 与当前引用（已签出分支）匹配，则为 <em>*</em>，否则为 ''。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-color"> <a class="anchor" href="#git-for-each-ref-color"></a>color </dt>
<dd>
<p>更改输出颜色。后跟 <code>:&lt;颜色名称&gt;</code>，其中颜色名称在 <a href='{{< relurl "docs/git-config/zh_HANS-CN" >}}'>git-config[1]</a> 的 “配置文件” 部分的 “值” 中有描述。 例如，<code>%(color:bold red)</code>。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref--1-1"> <a class="anchor" href="#git-for-each-ref--1-1"></a>对齐 </dt>
<dd>
<p>将 %(align:&#8230;&#8203;) 和 %(end) 之间的内容左对齐、中间对齐或右对齐。align: "之后是 <code>width=&lt;宽度&gt;</code> 和 <code>position=&lt;位置&gt;</code>，顺序不限，中间用逗号隔开，其中 <code>&lt;位置&gt;</code> 可以是左对齐、右对齐或中间对齐，默认为左对齐 <code>&lt;宽度&gt;</code> 是对齐后内容的总长度。为简洁起见，可以省略前缀 "width=" 和/或 "position="，而使用裸露的 &lt;宽度&gt; 和 &lt;位置&gt;。 例如，<code>%(align:&lt;宽度&gt;,&lt;位置&gt;)</code>。如果内容长度大于宽度，则不执行对齐。如果与 <code>--quote</code> 一起使用，%(align:&#8230;&#8203;) 和 %(end) 之间的所有内容都会被加引号，但如果是嵌套内容，则只有最上层的内容会被加引号。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref--1-1-1"> <a class="anchor" href="#git-for-each-ref--1-1-1"></a>如果 </dt>
<dd>
<p>作为 %(if)&#8230;&#8203;%(then)&#8230;&#8203;%(end) 或 %(if)&#8230;&#8203;%(then)&#8230;&#8203;%(else)&#8230;&#8203;%(end) 使用。 如果在 %(if)之后有一个带值或字符串字面意义的原子，则打印 %(then) 之后的所有内容；如果使用了 %(else) 原子，则打印 %(else) 之后的所有内容。当我们使用 %(HEAD) 原子打印 "*" 或 ""，并希望仅在 <em>HEAD</em> 引用上应用 <em>if</em> 条件时，这将非常有用。 添加 ":equals=&lt;字符串&gt;" 或 ":notequals=&lt;字符串&gt;" 可将 %(if:&#8230;&#8203;) 原子和 %(then) 原子之间的值与给定字符串进行比较。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-symref"> <a class="anchor" href="#git-for-each-ref-symref"></a>symref </dt>
<dd>
<p>所给符号引用指向的引用。如果不是符号引用，则不会打印任何内容。与上文的 <code>引用名</code> 相同，遵从 <code>:short</code>、<code>:lstrip</code> 和 <code>:rstrip</code> 选项。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signature"> <a class="anchor" href="#git-for-each-ref-signature"></a>signature </dt>
<dd>
<p>检查提交的 GPG 签名。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signaturegrade"> <a class="anchor" href="#git-for-each-ref-signaturegrade"></a>signature:grade </dt>
<dd>
<p>显示 "G" 代表一个好的（有效的）签名，"B" 代表一个坏的签名，"U" 代表一个有效性未知的好的签名，"X" 代表一个已经过期的好的签名，"Y" 代表一个由过期的钥匙制作的好的签名，"R" 代表一个由撤销的密钥制作的好的签名，"E" 如果不能检查签名（如缺少密钥），"N" 代表没有签名。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signaturesigner"> <a class="anchor" href="#git-for-each-ref-signaturesigner"></a>signature:signer </dt>
<dd>
<p>提交的 GPG 签名的签名者。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signaturekey"> <a class="anchor" href="#git-for-each-ref-signaturekey"></a>signature:key </dt>
<dd>
<p>提交的 GPG 签名密钥。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signaturefingerprint"> <a class="anchor" href="#git-for-each-ref-signaturefingerprint"></a>signature:fingerprint </dt>
<dd>
<p>提交的 GPG 签名指纹。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signatureprimarykeyfingerprint"> <a class="anchor" href="#git-for-each-ref-signatureprimarykeyfingerprint"></a>signature:primarykeyfingerprint </dt>
<dd>
<p>提交的 GPG 签名的主键指纹。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-signaturetrustlevel"> <a class="anchor" href="#git-for-each-ref-signaturetrustlevel"></a>signature:trustlevel </dt>
<dd>
<p>提交的 GPG 签名的信任级别。可能的输出包括 <code>ultimate</code> ， <code>fully</code> ， <code>marginal</code> ， <code>never</code> 和 <code>undifined</code>。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref--1-1-1-1"> <a class="anchor" href="#git-for-each-ref--1-1-1-1"></a>工作目录树路径 </dt>
<dd>
<p>如果引用在任何链接的工作树中签出，则该引用签出所在工作目录的绝对路径。否则为空字符串。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-ahead-behindltgt"> <a class="anchor" href="#git-for-each-ref-ahead-behindltgt"></a>ahead-behind:&lt;提交对象&gt; </dt>
<dd>
<p>用空格分隔的两个整数，分别表示将输出引用与格式中指定的 <code>&lt;提交对象&gt;</code> 进行比较时，超前和滞后提交的次数。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-describeoptions"> <a class="anchor" href="#git-for-each-ref-describeoptions"></a>describe[:options] </dt>
<dd>
<p>人类可读的名字，像 <a href='{{< relurl "docs/git-describe/zh_HANS-CN" >}}'>git-describe[1]</a>；空字符串表示不可描述的提交。 <code>describe</code> 字符串后面可以有冒号和零个或多个逗号分隔的选项。 当标签同时被添加或删除时，描述可能不一致。</p>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-for-each-ref-tagsltgt"> <a class="anchor" href="#git-for-each-ref-tagsltgt"></a>tags=&lt;布尔值&gt; </dt>
<dd>
<p>详细内容请参见 <a href='{{< relurl "docs/git-describe/zh_HANS-CN" >}}'>git-describe[1]</a> 中的相应选项。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-abbrevltgt"> <a class="anchor" href="#git-for-each-ref-abbrevltgt"></a>abbrev=&lt;数字&gt; </dt>
<dd>
<p>至少使用 &lt;数字&gt; 十六进制数字；详见 <a href='{{< relurl "docs/git-describe/zh_HANS-CN" >}}'>git-describe[1]</a> 中的相应选项。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-matchltgt"> <a class="anchor" href="#git-for-each-ref-matchltgt"></a>match=&lt;模式&gt; </dt>
<dd>
<p>只考虑与给定的 <code>glob(7)</code> 模式匹配的标签，不包括 "refs/tags/" 前缀；详见 <a href='{{< relurl "docs/git-describe/zh_HANS-CN" >}}'>git-describe[1]</a> 中的相应选项。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-excludeltgt"> <a class="anchor" href="#git-for-each-ref-excludeltgt"></a>exclude=&lt;模式&gt; </dt>
<dd>
<p>不考虑与给定的 <code>glob(7)</code> 模式（不包括 "refs/tags/" 前缀）匹配的标签；详情参见 <a href='{{< relurl "docs/git-describe/zh_HANS-CN" >}}'>git-describe[1]</a> 中的相应选项。</p>
</dd>
</dl>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>除上述内容外，对于提交和标记对象，头字段名称（ <code>tree</code> ， <code>parent</code> ， <code>object</code> ， <code>type</code> 和 <code>tag</code> ）可用于指定头字段名称中的值。 字段 <code>tree</code> 和 <code>parent</code> 也可以与修饰符 <code>:short</code> 和 <code>:short=&lt;长度&gt;</code> 一起使用，就像 <code>对象名</code> 一样。</p>
</div>
<div class="paragraph">
<p>对于提交和标记对象，特殊的 <code>creatordate</code> 和 <code>creator</code> 字段将与 <code>committer</code> 或 <code>tagger</code> 字段中的相应日期或姓名-电子邮件-日期元组相对应，具体取决于对象类型。 这些都是为混合使用注释标记和轻量级标记而设计的。</p>
</div>
<div class="paragraph">
<p>对于标签对象，前缀为星号 (<code>*</code>) 的 <code>fieldname</code> 会扩展为剥离对象的 <code>fieldname</code> 值，而不是标签对象本身的值。</p>
</div>
<div class="paragraph">
<p>以姓名-电子邮件-日期元组为值的字段（ <code>author</code> ， <code>committer</code> 和 <code>tagger</code>）可以后缀 <code>name</code> ， <code>email</code> 和 <code>date</code>，以提取命名组件。 对于电子邮件字段（ <code>authoremail</code> ， <code>committeremail</code> 和 <code>taggeremail</code> ），可添加 <code>:trim</code> 以获取不带角括号的电子邮件，并添加 <code>:localpart</code> 以从修剪后的电子邮件中获取 <code>@</code> 符号之前的部分。除此之外，还可以使用 <code>:mailmap</code> 选项和相应的 <code>:mailmap,trim</code> 和 <code>:mailmap,localpart</code>（顺序并不重要），根据 .mailmap 文件或 mailmap.file 或 mailmap.blob 配置变量（参见 <a href='{{< relurl "docs/gitmailmap/zh_HANS-CN" >}}'>gitmailmap[5]</a>）中设置的文件，获取姓名和电子邮件的值。</p>
</div>
<div class="paragraph">
<p>对象中的原始数据是 <code>raw</code>。</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-for-each-ref-rawsize"> <a class="anchor" href="#git-for-each-ref-rawsize"></a>raw:size </dt>
<dd>
<p>对象的原始数据大小。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>请注意，<code>--format=%(raw)</code> 不能与 <code>--python</code> ， <code>--shell</code> 和 <code>--tcl</code> 一起使用，因为这些语言的字符串变量类型可能不支持任意二进制数据。</p>
</div>
<div class="paragraph">
<p>提交或标记对象中的信息是 <code>contents</code>，从中可使用 <code>contents:&lt;部分&gt;</code> 提取不同部分：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-for-each-ref-contentssize"> <a class="anchor" href="#git-for-each-ref-contentssize"></a>contents:size </dt>
<dd>
<p>提交或标记信息的大小（字节）。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-contentssubject"> <a class="anchor" href="#git-for-each-ref-contentssubject"></a>contents:subject </dt>
<dd>
<p>信息的第一段（通常为单行）将作为提交或标记信息的 "主题"。 也可以使用字段 <code>subject</code> 代替 <code>contents:subject</code> ，以获得相同的结果。对于适合文件名的主题行，可在 <code>subject</code> 中添加 <code>:sanitize</code>。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-contentsbody"> <a class="anchor" href="#git-for-each-ref-contentsbody"></a>contents:body </dt>
<dd>
<p>"subject" 后的其余提交内容或标记信息。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-contentssignature"> <a class="anchor" href="#git-for-each-ref-contentssignature"></a>contents:signature </dt>
<dd>
<p>tag的可选GPG签名。</p>
</dd>
<dt class="hdlist1" id="git-for-each-ref-contentslinesN"> <a class="anchor" href="#git-for-each-ref-contentslinesN"></a>contents:lines=N </dt>
<dd>
<p>信息的前 <code>N</code> 行。</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>此外，<a href='{{< relurl "docs/git-interpret-trailers/zh_HANS-CN" >}}'>git-interpret-trailers[1]</a> 中提到的的尾注可作为 <code>trailers[:options]</code> 获取（或使用历史别名 <code>contents:trailers[:options]</code>）。有关有效的 [:option] 值，请参阅 <a href='{{< relurl "docs/git-log/zh_HANS-CN" >}}'>git-log[1]</a> 的 <code>trailers</code> 部分。</p>
</div>
<div class="paragraph">
<p>为便于排序，具有数值的字段按数值顺序排序（ <code>objectsize</code> , <code>authordate</code> , <code>committerdate</code> , <code>creatordate</code> , <code>taggerdate</code> ）。 所有其他字段都按字节值顺序排序。</p>
</div>
<div class="paragraph">
<p>还有一个按版本排序的选项，可以通过使用字段名 <code>version:refname</code> 或其别名 <code>v:refname</code> 来实现。</p>
</div>
<div class="paragraph">
<p>在任何情况下，如果字段名指向的字段不适用于引用所引用的对象，都不会导致错误。 它会返回一个空字符串替代输出。</p>
</div>
<div class="paragraph">
<p>As a special case for the date-type fields, you may specify a format for the date by adding <code>:</code> followed by date format name (see the values the <code>--date</code> option to <a href='{{< relurl "docs/git-rev-list/zh_HANS-CN" >}}'>git-rev-list[1]</a> takes). If this formatting is provided in a <code>--sort</code> key, references will be sorted according to the byte-value of the formatted string rather than the numeric value of the underlying timestamp.</p>
</div>
<div class="paragraph">
<p>有些原子，如 %(align) 和 %(if) 总是需要一个匹配的 %(end)。 我们称它们为 “起始原子”，有时用 %($open) 表示。</p>
</div>
<div class="paragraph">
<p>当脚本语言的特定引用生效时，顶层起始原子和与其匹配的 %(end) 之间的所有内容都会根据起始原子的语义进行评估，只有其从顶层得到的结果才会被引用。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_实例"><a class="anchor" href="#_实例"></a>实例</h2>
<div class="sectionbody">
<div class="paragraph">
<p>直接生成格式化文本的示例。 显示最近 3 次标记的提交：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/bin/sh

git for-each-ref --count=3 --sort='-*authordate' \
--format='From: %(*作者名) %(*作者邮箱)
Subject: %(*主题)
Date: %(*authordate)
Ref: %(*引用名)

%(*body)
' 'refs/tags'</pre>
</div>
</div>
<div class="paragraph">
<p>一个简单的示例，说明如何在输出中使用 shell eval，并演示如何使用 --shell。 列出所有文件头的前缀：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/bin/sh

git for-each-ref --shell --format="ref=%(refname)" refs/heads | \
while read entry
do
	eval "$entry"
	echo `dirname $ref`
done</pre>
</div>
</div>
<div class="paragraph">
<p>关于标签的报告更详细一些，表明格式可能是整个脚本：</p>
</div>
<div class="listingblock">
<div class="content">
<pre>#!/bin/sh

fmt='
	r=%(引用名)
	t=%(*对象类型)
	T=${r#refs/tags/}

	o=%(*objectname)
	n=%(*authorname)
	e=%(*authoremail)
	s=%(*subject)
	d=%(*authordate)
	b=%(*body)

	kind=Tag
	if test "z$t" = z
	then
		# could be a lightweight tag
		t=%(对象类型)
		kind="Lightweight tag"
		o=%(对象名)
		n=%(作者名)
		e=%(作者邮箱)
		s=%(主题)
		d=%(authordate)
		b=%(主体)
	fi
	echo "$kind $T points at a $t object $o"
	if test "z$t" = zcommit
	then
		echo "The commit was authored by $n $e
at $d, and titled

    $s

其信息如下：
"
		echo "$b" | sed -e "s/^/    /"
		echo
	fi
'

eval=`git for-each-ref --shell --format="$fmt" \
	--sort='*对象类型' \
	--sort=-taggerdate \
	refs/tags`
eval "$eval"</pre>
</div>
</div>
<div class="paragraph">
<p>举例说明 %(if)&#8230;&#8203;%(then)&#8230;&#8203;%(else)&#8230;&#8203;%(end) 的用法。 这会给当前分支加上星号前缀。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git for-each-ref --format="%(if)%(HEAD)%(then)* %(else)  %(end)%(refname:short)" refs/heads/</pre>
</div>
</div>
<div class="paragraph">
<p>举例说明 %(if)&#8230;&#8203;%(then)&#8230;&#8203;%(end)的用法。 如果存在授权名称，则打印该名称。</p>
</div>
<div class="listingblock">
<div class="content">
<pre>git for-each-ref --format="%(refname)%(if)%(authorname)%(then) Authored by: %(authorname)%(end)"</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注意事项"><a class="anchor" href="#_注意事项"></a>注意事项</h2>
<div class="sectionbody">
<div class="paragraph">
<p>需要注意的是，磁盘上对象的大小会被准确地报告出来，但在得出哪些记录或对象造成了磁盘使用量的结论时应小心谨慎。打包的非 delta 对象的大小可能远大于与之相对的 delta 对象的大小，但选择哪个对象为基准对象，哪个对象为 delta 对象是任意的，在重新打包时可能会发生变化。</p>
</div>
<div class="paragraph">
<p>还请注意，对象数据库中可能存在一个对象的多个副本；在这种情况下，无法确定将报告哪个副本的大小或 delta 基数。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_注释"><a class="anchor" href="#_注释"></a>注释</h2>
<div class="sectionbody">
<div class="paragraph">
<p>当组合多个 <code>--contains</code> 和 <code>--no-contains</code> 过滤器时，只显示至少包含一个 <code>--contains</code> 的提交，并且不包含 <code>--no-contains</code> 的提交引用。</p>
</div>
<div class="paragraph">
<p>当结合多个 <code>--merged</code> 和 <code>--no-merged</code> 过滤器时，只显示至少有一个 <code>--merged</code> 提交和没有 <code>--no-merged</code> 提交的引用。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参见"><a class="anchor" href="#_参见"></a>参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='{{< relurl "docs/git-show-ref/zh_HANS-CN" >}}'>git-show-ref[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>