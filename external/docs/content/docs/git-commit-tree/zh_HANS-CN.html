---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-commit-tree Documentation
docname: git-commit-tree
lang: zh_HANS-CN
aliases:
- "/docs/git-commit-tree/zh_HANS-CN/index.html"
---
<div class="sect1">
<h2 id="_名称"><a class="anchor" href="#_名称"></a>名称</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-commit-tree -创建一个新的提交对象</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_概述"><a class="anchor" href="#_概述"></a>概述</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git commit-tree</em> &lt;目录树&gt; [(-p &lt;父对象&gt;)&#8230;&#8203;]
<em>git commit-tree</em> [(-p &lt;父对象&gt;)&#8230;&#8203;] [-S[&lt;keyid&gt;]] [(-m &lt;消息&gt;)&#8230;&#8203;]
		  [(-F &lt;文件&gt;)&#8230;&#8203;] &lt;目录树&gt;</pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_描述"><a class="anchor" href="#_描述"></a>描述</h2>
<div class="sectionbody">
<div class="paragraph">
<p>这通常不是最终用户想要直接运行的。 请参见 <a href='{{< relurl "docs/git-commit/zh_HANS-CN" >}}'>git-commit[1]</a>。</p>
</div>
<div class="paragraph">
<p>根据提供的树对象创建新的提交对象，并将新的提交对象 id 发送到 stdout。除非给出 <code>-m</code> 或 `-F`选项，否则日志信息将从标准输入读取。</p>
</div>
<div class="paragraph">
<p><code>-m</code> 和 <code>-F</code> 选项可以以任意顺序给出任意次数。提交日志信息将按照选项的顺序排列。</p>
</div>
<div class="paragraph">
<p>一个提交对象可以有任意数量的父对象。如果只有一个父对象，它就是一个普通的提交。如果有一个以上的父提交对象，提交就会在多行历史记录之间进行合并。初始（根）提交没有父对象。</p>
</div>
<div class="paragraph">
<p>树表示工作目录的特定目录状态，而提交则表示 “时间” 上的状态，并说明如何到达该状态。</p>
</div>
<div class="paragraph">
<p>通常情况下，一次提交会确定一个新的 "HEAD" 状态，虽然 Git 并不关心你把关于该状态的注释保存在哪里，但在实践中，我们倾向于把结果写入 <code>.git/HEAD</code> 指向的文件，这样我们就能随时看到上次提交的状态。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_选项"><a class="anchor" href="#_选项"></a>选项</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-commit-tree-ltgt"> <a class="anchor" href="#git-commit-tree-ltgt"></a>&lt;目录树&gt; </dt>
<dd>
<p>一个现有的目录树对象。</p>
</dd>
<dt class="hdlist1" id="git-commit-tree--pltgt"> <a class="anchor" href="#git-commit-tree--pltgt"></a>-p &lt;父提交&gt; </dt>
<dd>
<p>每个 <code>-p</code> 表示父提交对象的 id。</p>
</dd>
<dt class="hdlist1" id="git-commit-tree--mltgt"> <a class="anchor" href="#git-commit-tree--mltgt"></a>-m &lt;信息&gt; </dt>
<dd>
<p>提交日志信息中的一个段落。可以给出多个段落，每个 &lt;信息&gt; 都将成为自己的段落。</p>
</dd>
<dt class="hdlist1" id="git-commit-tree--Fltgt"> <a class="anchor" href="#git-commit-tree--Fltgt"></a>-F &lt;文件&gt; </dt>
<dd>
<p>从给定文件中读取提交日志信息。使用 <code>-</code> 从标准输入读取。可以多次给定该文件，每个文件的内容都会成为自己的段落。</p>
</dd>
<dt class="hdlist1" id="git-commit-tree--Sltkeyidgt"> <a class="anchor" href="#git-commit-tree--Sltkeyidgt"></a>-S[&lt;keyid&gt;] </dt>
<dt class="hdlist1" id="git-commit-tree---gpg-signltIDgt"> <a class="anchor" href="#git-commit-tree---gpg-signltIDgt"></a>--gpg-sign[=&lt;键 ID&gt;] </dt>
<dt class="hdlist1" id="git-commit-tree---no-gpg-sign"> <a class="anchor" href="#git-commit-tree---no-gpg-sign"></a>--no-gpg-sign </dt>
<dd>
<p>GPG 签名提交。<code>keyid</code> 参数是可选的，默认为提交者身份；如果指定，必须与选项粘连，不能有空格。<code>--no-gpg-sign</code> 用于抵消命令行中先前给出的 `--gpg-sign`选项。</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_提交信息"><a class="anchor" href="#_提交信息"></a>提交信息</h2>
<div class="sectionbody">
<div class="paragraph">
<p>一个提交封装了：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>所有父对象 ID</p>
</li>
<li>
<p>作者姓名、电子邮件和日期</p>
</li>
<li>
<p>提交者姓名、电子邮件和提交时间。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>提交注释从标准输入流读取。如果没有通过 "&lt;" 重定向提供更新日志条目，<em>git commit-tree</em> 就会等待输入条目，并以 ^D 结束。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_日期格式"><a class="anchor" href="#_日期格式"></a>日期格式</h2>
<div class="sectionbody">
<div class="paragraph">
<p><code>GIT_AUTHOR_DATE</code>, <code>GIT_COMMITTER_DATE</code> 环境变量：</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-commit-tree-Git"> <a class="anchor" href="#git-commit-tree-Git"></a>Git 内部格式 </dt>
<dd>
<p><code>&lt;unix 时间戳&gt; &lt;时区偏移量&gt;</code>，其中 <code>&lt;unix 时间戳&gt;</code> 是自 UNIX epoch 以来的秒数。 <code>&lt;时区偏移量&gt;</code> 是相对于 UTC 的正或负偏移量。例如，CET（比 UTC 提前1小时）为 <code>+0100</code>。</p>
</dd>
<dt class="hdlist1" id="git-commit-tree-RFC2822"> <a class="anchor" href="#git-commit-tree-RFC2822"></a>RFC 2822 </dt>
<dd>
<p>The standard date format as described by RFC 2822, for example <code>Thu, 07 Apr 2005 22:13:13 +0200</code>.</p>
</dd>
<dt class="hdlist1" id="git-commit-tree-ISO8601"> <a class="anchor" href="#git-commit-tree-ISO8601"></a>ISO 8601 </dt>
<dd>
<p>按 ISO 8601 标准指定的时间和日期，例如 <code>2005-04-07T22:13:13</code>。解析器也接受空格代替 <code>T</code> 字符。秒的小数部分将被忽略，例如 <code>2005-04-07T22:13:13.019</code> 将被视为 <code>2005-04-07T22:13:13</code> 。</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
此外，日期部分还接受以下格式：<code>YYYY.MM.DD</code>，<code>MM/DD/YYYY</code> 和 <code>DD.MM.YYYY</code>。
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_讨论"><a class="anchor" href="#_讨论"></a>讨论</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Git在某种程度上是与字符编码无关的。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>blob对象的内容是未经解释的字节序列。 在核心层没有编码转换。</p>
</li>
<li>
<p>路径名以UTF-8规范化形式C编码，这适用于树对象、索引文件、参考名称，以及命令行参数、环境变量和配置文件（<code>.git/config</code>（见<a href='{{< relurl "docs/git-config/zh_HANS-CN" >}}'>git-config[1]</a>），<a href='{{< relurl "docs/gitignore/zh_HANS-CN" >}}'>gitignore[5]</a>，<a href='{{< relurl "docs/gitattributes/zh_HANS-CN" >}}'>gitattributes[5]</a> 和<a href='{{< relurl "docs/gitmodules/zh_HANS-CN" >}}'>gitmodules[5]</a>）中的路径名。</p>
<div class="paragraph">
<p>请注意，Git 在核心层将路径名简单地视为非 NUL 字节的序列，没有路径名编码的转换（除了 Mac 和 Windows）。因此，即使在使用传统的扩展ASCII编码的平台和文件系统上，使用非ASCII的路径名大多也能工作。然而，在这种系统上创建的仓库在基于UTF-8的系统（如Linux、Mac、Windows）上将无法正常工作，反之亦然。 此外，许多基于Git的工具简单地认为路径名称是UTF-8，而不能正确显示其他编码。</p>
</div>
</li>
<li>
<p>提交日志信息通常以UTF-8编码，但也支持其他扩展ASCII编码。这包括ISO-8859-x、CP125x和其他许多编码，但不包括UTF-16/32、EBCDIC和CJK多字节编码（GBK、Shift-JIS、Big5、EUC-x、CP9xx等）。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>尽管我们鼓励提交日志信息使用UTF-8编码，但核心系统和Git Porcelain的设计并不强制要求项目使用UTF-8。 如果某个项目的所有参与者都认为使用传统编码更方便，Git也不会禁止。 然而，有几件事需要注意。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><em>git commit</em> 和 <em>git commit-tree</em> 如果收到的提交日志信息不像是有效的 UTF-8 字符串，就会发出警告，除非你明确表示你的项目使用的是传统编码。 说这个的方法是在 <code>.git/config</code> 文件中设置 <code>i18n.commitEncoding</code>，像这样：</p>
<div class="listingblock">
<div class="content">
<pre>[i18n]
	commitEncoding = ISO-8859-1</pre>
</div>
</div>
<div class="paragraph">
<p>用上述设置创建的提交对象在它的 <code>encoding</code> 头中记录了 <code>i18n.commitEncoding</code> 的值。 这是为了帮助以后看这些对象的人。 缺少这个头意味着提交日志信息是以 UTF-8 编码的。</p>
</div>
</li>
<li>
<p><em>git log</em> 、<em>git show</em> 、<em>git blame</em> 和它们的朋友们会查看提交对象的 <code>encoding</code> 头，并尝试将日志信息重新编码为 UTF-8，除非另有指定。 您可以在`.git/config` 文件中使用 <code>i18n.logOutputEncoding</code> 指定所需的输出编码，像这样：</p>
<div class="listingblock">
<div class="content">
<pre>[i18n]
	logOutputEncoding = ISO-8859-1</pre>
</div>
</div>
<div class="paragraph">
<p>如果你没有这个配置变量，则使用`i18n.commitEncoding`的值来代替。</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>请注意，我们特意选择在提交对象层面上，不对提交日志信息进行重新编码，因为重新编码为UTF-8不一定是一个可逆的操作。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_文件"><a class="anchor" href="#_文件"></a>文件</h2>
<div class="sectionbody">
<div class="paragraph">
<p>/etc/mailname</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_参见"><a class="anchor" href="#_参见"></a>参见</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href='{{< relurl "docs/git-write-tree/zh_HANS-CN" >}}'>git-write-tree[1]</a> <a href='{{< relurl "docs/git-commit/zh_HANS-CN" >}}'>git-commit[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>属于 <a href='{{< relurl "docs/git/zh_HANS-CN" >}}'>git[1]</a> 文档</p>
</div>
</div>
</div>