---
### DO NOT EDIT! Generated by script/update-docs.rb

category: manual
section: documentation
subsection: manual
title: Git - git-http-backend Documentation
docname: git-http-backend
lang: fr
aliases:
- "/docs/git-http-backend/fr/index.html"
---
<div class="sect1">
<h2 id="_nom"><a class="anchor" href="#_nom"></a>NOM</h2>
<div class="sectionbody">
<div class="paragraph">
<p>git-http-backend - Implémentation côté serveur de Git sur HTTP</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis"><a class="anchor" href="#_synopsis"></a>SYNOPSIS</h2>
<div class="sectionbody">
<div class="verseblock">
<pre class="content"><em>git http-backend</em></pre>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description"><a class="anchor" href="#_description"></a>DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Un simple programme CGI pour servir le contenu d&#8217;un dépôt Git aux clients Git qui accèdent au dépôt via les protocoles http:// et https://. Le programme supporte les clients qui récupèrent des données en utilisant à la fois le protocole HTTP intelligent et le protocole HTTP muet rétrocompatible, ainsi que les clients qui poussent des données en utilisant le protocole HTTP intelligent. Il supporte également le protocole "v2" de Git, plus efficace, s&#8217;il est correctement configuré ; voir la discussion sur <code>GIT_PROTOCOL</code> dans la section ENVIRONNEMENT ci-dessous.</p>
</div>
<div class="paragraph">
<p>Il vérifie que le répertoire possède le fichier magique "git-daemon-export-ok", et il refusera d&#8217;exporter tout répertoire Git qui n&#8217;a pas été explicitement marqué pour l&#8217;exportation de cette manière (à moins que la variable d&#8217;environnement <code>GIT_HTTP_EXPORT_ALL</code> ne soit définie).</p>
</div>
<div class="paragraph">
<p>Par défaut, seul le service <code>upload-pack</code> est activé, qui sert les clients <em>git fetch-pack</em> et <em>git ls-remote</em>, qui sont invoqués à partir de <em>git fetch</em>, <em>git pull</em>, et <em>git clone</em>. Si le client est authentifié, le service <code>receive-pack</code> est activé et sert les clients <em>git send-pack</em>, qui sont invoqués à partir de <em>git push</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_services"><a class="anchor" href="#_services"></a>SERVICES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Ces services peuvent être activés/désactivés grâce au ficher de configuration par dépôt :</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-http-backend-httpgetanyfile"> <a class="anchor" href="#git-http-backend-httpgetanyfile"></a>http.getanyfile </dt>
<dd>
<p>Ceci sert les clients Git plus anciens que la version 1.6.6 qui ne sont pas en mesure d&#8217;utiliser le service de téléversement de paquet. Lorsqu&#8217;il est activé, les clients sont capables de lire n&#8217;importe quel fichier dans le dépôt, y compris les objets qui ne sont plus accessibles depuis une branche mais qui sont toujours présents. Il est activé par défaut, mais un dépôt peut le désactiver en mettant cet élément de configuration à <code>false</code>.</p>
</dd>
<dt class="hdlist1" id="git-http-backend-httpuploadpack"> <a class="anchor" href="#git-http-backend-httpuploadpack"></a>http.uploadpack </dt>
<dd>
<p>Cela sert aux clients <em>git fetch-pack</em> et <em>git ls-remote</em>. Il est activé par défaut, mais un dépôt peut le désactiver en définissant cet élément de configuration sur <code>false</code>.</p>
</dd>
<dt class="hdlist1" id="git-http-backend-httpreceivepack"> <a class="anchor" href="#git-http-backend-httpreceivepack"></a>http.receivepack </dt>
<dd>
<p>Ceci sert les clients <em>git send-pack</em>, permettant de pousser. Il est désactivé par défaut pour les utilisateurs anonymes, et activé par défaut pour les utilisateurs authentifiés par le serveur web. Il peut être désactivé en mettant cet élément à <code>false</code>, ou activé pour tous les utilisateurs, y compris les utilisateurs anonymes, en le mettant à <code>true</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_traduction_durl"><a class="anchor" href="#_traduction_durl"></a>TRADUCTION D’URL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Pour déterminer l&#8217;emplacement du dépôt sur le disque, <em>git http-backend</em> concatène les variables d&#8217;environnement PATH_INFO, qui est définie automatiquement par le serveur web, et GIT_PROJECT_ROOT, qui doit être définie manuellement dans la configuration du serveur web. Si GIT_PROJECT_ROOT n&#8217;est pas défini, <em>git http-backend</em> lit PATH_TRANSLATED, qui est également défini automatiquement par le serveur web.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exemples"><a class="anchor" href="#_exemples"></a>EXEMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Tous les exemples suivants font correspondre <code>http://$hostname/git/foo/bar.git</code> à <code>/var/www/git/foo/bar.git</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1" id="git-http-backend-Apache2x"> <a class="anchor" href="#git-http-backend-Apache2x"></a>Apache 2.x </dt>
<dd>
<p>Assurez-vous que mod_cgi, mod_alias et mod_env sont activés, définissez GIT_PROJECT_ROOT (ou DocumentRoot) de manière appropriée, et créez un ScriptAlias pour le CGI :</p>
<div class="listingblock">
<div class="content">
<pre>SetEnv GIT_PROJECT_ROOT /var/www/git
SetEnv GIT_HTTP_EXPORT_ALL
ScriptAlias /git/ /usr/libexec/git-core/git-http-backend/

# Ce n'est pas strictement nécessaire avec Apache et une version moderne de
# git-http-backend, car le serveur web transmettra l'en-tête dans l'environnement
# l'environnement en tant que HTTP_GIT_PROTOCOL, et http-backend le copiera dans
# GIT_PROTOCOL. Mais vous pouvez avoir besoin de cette ligne (ou quelque chose de similaire si vous
# utilisez un serveur web différent), ou si vous voulez supporter d'anciennes versions de Git
# qui ne faisaient pas cette copie.
#
# Avoir le serveur web qui met en place GIT_PROTOCOL est tout à fait acceptable même avec les
# versions modernes (et aura la priorité sur HTTP_GIT_PROTOCOL,
# ce qui signifie qu'il peut être utilisé pour passer outre la demande du client).
SetEnvIf Git-Protocol ".*" GIT_PROTOCOL=$0</pre>
</div>
</div>
<div class="paragraph">
<p>Pour permettre un accès anonyme en lecture mais un accès authentifié en écriture, il faut une autorisation à la fois pour l&#8217;annonce initiale (que nous détectons comme une poussée via le paramètre de service dans la chaîne de requête) et pour l&#8217;invocation de receive-pack lui-même :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>RewriteCond %{QUERY_STRING} service=git-receive-pack [OR]
RewriteCond %{REQUEST_URI} /git-receive-pack$
RewriteRule ^/git/ - [E=AUTHREQUIRED:yes]

&lt;LocationMatch "^/git/"&gt;
	Order Deny,Allow
	Deny from env=AUTHREQUIRED

	AuthType Basic
	AuthName "Git Access"
	Require group committers
	Satisfy Any
	...
&lt;/LocationMatch&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Si vous n&#8217;avez pas <code>mod_rewrite</code> disponible pour tester la correspondance de la chaîne de requête, il est suffisant de protéger <code>git-receive-pack</code> lui-même, comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;LocationMatch "^/git/.*/git-receive-pack$"&gt;
	AuthType Basic
	AuthName "Git Access"
	Require group committers
	...
&lt;/LocationMatch&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Dans ce mode, le serveur ne demandera pas d&#8217;authentification avant que le client ne commence la phase de négociation de l&#8217;objet de la poussée, plutôt que lors du contact initial. Pour cette raison, vous devez également activer l&#8217;option de configuration <code>http.receivepack</code> dans tous les dépôts qui devraient accepter une poussée. Le comportement par défaut, si <code>http.receivepack</code> n&#8217;est pas activé, est de rejeter toute poussée par des utilisateurs non authentifiés ; la requête initiale rapportera donc <code>403 Forbidden</code> au client, sans même lui donner l&#8217;opportunité de s&#8217;authentifier.</p>
</div>
<div class="paragraph">
<p>Pour exiger l&#8217;authentification à la fois pour les lectures et les écritures, utilisez une directive Location autour du dépôt ou de l&#8217;un de ses répertoires parents :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>&lt;Location /git/private&gt;
	AuthType Basic
	AuthName "Private Git Access"
	Require group committers
	...
&lt;/Location&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Pour servir gitweb à la même url, utilisez un ScriptAliasMatch uniquement pour les URLs que <em>git http-backend</em> peut gérer, et transférez le reste à gitweb :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>ScriptAliasMatch \
	"(?x)^/git/(.*/(HEAD | \
			info/refs | \
			objects/(info/[^/]+ | \
				 [0-9a-f]{2}/[0-9a-f]{38} | \
				 pack/pack-[0-9a-f]{40}\.(pack|idx)) | \
			git-(upload|receive)-pack))$" \
	/usr/libexec/git-core/git-http-backend/$1

ScriptAlias /git/ /var/www/cgi-bin/gitweb.cgi/</pre>
</div>
</div>
<div class="paragraph">
<p>Pour servir plusieurs dépôts de différents espaces <a href='{{< relurl "docs/gitnamespaces/fr" >}}'>gitnamespaces[7]</a> dans un seul dépôt :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SetEnvIf Request_URI "^/git/([^/]*)" GIT_NAMESPACE=$1
ScriptAliasMatch ^/git/[^/]*(.*) /usr/libexec/git-core/git-http-backend/storage.git$1</pre>
</div>
</div>
</dd>
<dt class="hdlist1" id="git-http-backend-Apache2xstatiqueacclr"> <a class="anchor" href="#git-http-backend-Apache2xstatiqueacclr"></a>Apache 2.x statique accéléré </dt>
<dd>
<p>Similaire à ci-dessus, mais Apache peut être utilisé pour renvoyer des fichiers statiques stockés sur le disque. Sur de nombreux systèmes, cela peut être plus efficace car Apache peut demander au noyau de copier le contenu du fichier depuis le système de fichiers directement sur le réseau :</p>
<div class="listingblock">
<div class="content">
<pre>SetEnv GIT_PROJECT_ROOT /var/www/git

AliasMatch ^/git/(.*/objects/[0-9a-f]{2}/[0-9a-f]{38})$          /var/www/git/$1
AliasMatch ^/git/(.*/objects/pack/pack-[0-9a-f]{40}.(pack|idx))$ /var/www/git/$1
ScriptAlias /git/ /usr/libexec/git-core/git-http-backend/</pre>
</div>
</div>
<div class="paragraph">
<p>Ceci peut être combiné avec la configuration de gitweb :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>SetEnv GIT_PROJECT_ROOT /var/www/git

AliasMatch ^/git/(.*/objects/[0-9a-f]{2}/[0-9a-f]{38})$          /var/www/git/$1
AliasMatch ^/git/(.*/objects/pack/pack-[0-9a-f]{40}.(pack|idx))$ /var/www/git/$1
ScriptAliasMatch \
	"(?x)^/git/(.*/(HEAD | \
			info/refs | \
			objects/info/[^/]+ | \
			git-(upload|receive)-pack))$" \
	/usr/libexec/git-core/git-http-backend/$1
ScriptAlias /git/ /var/www/cgi-bin/gitweb.cgi/</pre>
</div>
</div>
</dd>
<dt class="hdlist1" id="git-http-backend-Lighttpd"> <a class="anchor" href="#git-http-backend-Lighttpd"></a>Lighttpd </dt>
<dd>
<p>Assurez-vous que <code>mod_cgi</code>, <code>mod_alias</code>, <code>mod_auth</code>, <code>mod_setenv</code> sont chargés, puis définissez <code>GIT_PROJECT_ROOT</code> de manière appropriée et redirigez toutes les requêtes vers le CGI :</p>
<div class="listingblock">
<div class="content">
<pre>alias.url += ( "/git" =&gt; "/usr/lib/git-core/git-http-backend" )
$HTTP["url"] =~ "^/git" {
	cgi.assign = ("" =&gt; "")
	setenv.add-environment = (
		"GIT_PROJECT_ROOT" =&gt; "/var/www/git",
		"GIT_HTTP_EXPORT_ALL" =&gt; ""
	)
}</pre>
</div>
</div>
<div class="paragraph">
<p>Pour permettre un accès anonyme en lecture mais un accès authentifié en écriture :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$HTTP["querystring"] =~ "service=git-receive-pack" {
	include "git-auth.conf"
}
$HTTP["url"] =~ "^/git/.*/git-receive-pack$" {
	include "git-auth.conf"
}</pre>
</div>
</div>
<div class="paragraph">
<p>où <code>git-auth.conf</code> ressemble à quelque chose comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>auth.require = (
	"/" =&gt; (
		"method" =&gt; "basic",
		"realm" =&gt; "Git Access",
		"require" =&gt; "valid-user"
	       )
)
# ...et configurer auth.backend ici</pre>
</div>
</div>
<div class="paragraph">
<p>Pour exiger une authentification à la fois pour les lectures et les écritures :</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$HTTP["url"] =~ "^/git/private" {
	include "git-auth.conf"
}</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_environnement"><a class="anchor" href="#_environnement"></a>ENVIRONNEMENT</h2>
<div class="sectionbody">
<div class="paragraph">
<p><em>git http-backend</em> s’appuie sur les variables d’environnement <code>CGI</code> définies par le serveur web appelant, notamment :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PATH_INFO (si GIT_PROJECT_ROOT est défini, sinon PATH_TRANSLATED)</p>
</li>
<li>
<p>REMOTE_USER</p>
</li>
<li>
<p>REMOTE_ADDR</p>
</li>
<li>
<p>CONTENT_TYPE</p>
</li>
<li>
<p>QUERY_STRING</p>
</li>
<li>
<p>REQUEST_METHOD</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>La variable d&#8217;environnement <code>GIT_HTTP_EXPORT_ALL</code> peut être passée à <em>git-http-backend</em> pour contourner la vérification du fichier "git-daemon-export-ok" dans chaque dépôt avant d&#8217;autoriser l&#8217;exportation de ce dépôt.</p>
</div>
<div class="paragraph">
<p>La variable d&#8217;environnement <code>GIT_HTTP_MAX_REQUEST_BUFFER</code> (ou l&#8217;option de configuration <code>http.maxRequestBuffer</code>) peut être définie pour changer la plus grande requête de négociation de refs que git traitera pendant une récupération ; toute récupération nécessitant un tampon plus grand n&#8217;aboutira pas. Cette valeur n&#8217;a normalement pas besoin d&#8217;être modifiée, mais peut être utile si vous récupérez des données d&#8217;un dépôt avec un très grand nombre de refs. La valeur peut être spécifiée avec une unité (par exemple, <code>100M</code> pour 100 mégaoctets). La valeur par défaut est de 10 mégaoctets.</p>
</div>
<div class="paragraph">
<p>Les clients peuvent rechercher des capacités optionnelles du protocole (comme le protocole v2) en utilisant l&#8217;en-tête HTTP <code>Git-Protocol</code>. Afin de les prendre en charge, le contenu de cet en-tête doit apparaître dans la variable d&#8217;environnement <code>GIT_PROTOCOL</code>. La plupart des serveurs web passeront cet en-tête au CGI via la variable <code>HTTP_GIT_PROTOCOL</code>, et <code>git-http-backend</code> le copiera automatiquement dans <code>GIT_PROTOCOL</code>. Cependant, certains serveurs web peuvent être plus sélectifs sur les en-têtes qu&#8217;ils passent, dans ce cas ils doivent être configurés explicitement (voir la mention de <code>Git-Protocol</code> dans la configuration d&#8217;Apache dans la section EXEMPLES précédente).</p>
</div>
<div class="paragraph">
<p>Le processus de backend définit GIT_COMMITTER_NAME à <em>$REMOTE_USER</em> et GIT_COMMITTER_EMAIL à <em>${REMOTE_USER}@http.${REMOTE_ADDR}</em>, s&#8217;assurant que tous les reflogs créés par <em>git-receive-pack</em> contiennent des informations d&#8217;identification de l&#8217;utilisateur distant qui a effectué la poussée.</p>
</div>
<div class="paragraph">
<p>Toutes les variables d&#8217;environnement <code>CGI</code> sont disponibles pour chacun des crochets invoqués par <em>git-receive-pack</em>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_git"><a class="anchor" href="#_git"></a>GIT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Fait partie de la suite <a href='{{< relurl "docs/git/fr" >}}'>git[1]</a></p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_traduction"><a class="anchor" href="#_traduction"></a>TRADUCTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Cette  page de manuel a été traduite par Jean-Noël Avila &lt;jn.avila AT free DOT fr&gt; et les membres du projet git-manpages-l10n. Veuillez signaler toute erreur de traduction par un rapport de bogue sur le site <a href="https://github.com/jnavila/git-manpages-l10n" class="bare">https://github.com/jnavila/git-manpages-l10n</a> .</p>
</div>
</div>
</div>