---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: pl
  chapter:
    title: Podstawy Gita
    number: 2
  section:
    title: Cofanie zmian
    number: 4
    cs_number: '2.4'
    previous: book/pl/v2/Podstawy-Gita-Podgląd-historii-rewizji
    next: book/pl/v2/Podstawy-Gita-Praca-ze-zdalnym-repozytorium
title: Git - Cofanie zmian
---
<h2 id="_undoing">Cofanie zmian</h2>
<div class="paragraph">
<p>W każdym momencie może zajść potrzeba cofnięcia jakiejś zmiany. Poniżej przyjrzymy się kilku podstawowym funkcjom cofającym modyfikacje.
Bądź ostrożny, ponieważ nie wszystkie cofnięcia można odwrócić. Jest to jedno z niewielu miejsc Gita, w których należy być naprawdę ostrożnym, gdyż można stracić bezpowrotnie część pracy.</p>
</div>
<div class="paragraph">
<p>Jeden z częstych przypadków to zbyt pochopne wykonanie rewizji i pominięcie w niej części plików, lub też pomyłka w notce do zmian. Jeśli chcesz poprawić wcześniejszą, błędną rewizję, wystarczy uruchomić git commit raz jeszcze, tym razem, z opcją <code>--amend</code> (popraw):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit --amend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Polecenie bierze zawartość poczekalni i zatwierdza jako dodatkowe zmiany. Jeśli niczego nie zmieniłeś od ostatniej rewizji (np. uruchomiłeś polecenie zaraz po poprzednim zatwierdzeniu zmian) wówczas twoja migawka się nie zmieni ale będziesz miał możliwość modyfikacji notki.</p>
</div>
<div class="paragraph">
<p>Jak zwykle zostanie uruchomiony edytor z załadowaną treścią poprzedniego komentarza. Edycja przebiega dokładnie tak samo jak zawsze, z tą różnicą, że na końcu zostanie nadpisana oryginalna treść notki.</p>
</div>
<div class="paragraph">
<p>Czas na przykład. Zatwierdziłeś zmiany a następnie zdałeś sobie sprawę, że zapomniałeś dodać do poczekalni pliku, który chciałeś oryginalnie umieścić w wykonanej rewizji. Wystarczy, że wykonasz następujące polecenie:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit -m 'initial commit'
$ git add forgotten_file
$ git commit --amend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wszystkie trzy polecenia zakończą się jedną rewizją - druga operacja commit zastąpi wynik pierwszej.</p>
</div>
<div class="sect3">
<h3 id="_unstaging">Usuwanie pliku z poczekalni</h3>
<div class="paragraph">
<p>Następne dwie sekcje pokazują jak zarządzać poczekalnią i zmianami w katalogu roboczym. Dobra wiadomość jest taka, że polecenie używane do określenia stanu obu obszarów przypomina samo jak cofnąć wprowadzone w nich zmiany. Na przykład, powiedzmy, że zmieniłeś dwa pliki i chcesz teraz zatwierdzić je jako dwie osobne rewizje, ale odruchowo wpisałeś <code>git add *</code> co spowodowało umieszczenie obu plików w poczekalni. Jak w takiej sytuacji usunąć stamtąd jeden z nich? Polecenie <code>git status</code> przypomni ci, że:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git add .
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README
    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tekst znajdujący się zaraz pod nagłówkiem “Changes to be committed” mówi "użyj <code>git reset HEAD &lt;plik&gt;...</code> żeby usunąć plik z poczekalni. Nie pozostaje więc nic innego jak zastosować się do porady i zastosować ją na pliku <code>CONTRIBUTING.md</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git reset HEAD CONTRIBUTING.md
Unstaged changes after reset:
M	CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Polecenie wygląda odrobinę dziwacznie, ale działa. Plik <code>CONTRIBUTING.md</code> ciągle zawiera wprowadzone modyfikacje ale nie znajduje się już w poczekalni.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Uwaga</div>
</td>
<td class="content">
<div class="paragraph">
<p>W chwili gdy wywołasz polecenie <code>git reset</code> z opcją <code>--hard</code> <em>może</em> być ono niebezpieczne, ale w tym przypadku plik z katalogu roboczego pozostaje nietknięty. Wywołanie <code>git reset</code> bez opcji jest bezpieczne - dotyczy tylko poczekalni.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>W tej chwili ta "magiczna inwokacja" jest wszystkim co powineneś wiedzieć na temat polecenia <code>git reset</code>. Zagłębimy się w szczegóły co robi polecenie <code>reset</code> oraz jak używać go do robienia naprawdę ciekawych rzeczy w rozdziale <a href="{{< relurl "book/pl/v2/ch00/_git_reset" >}}">Reset Demystified</a>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_cofanie_zmian_w_zmodyfikowanym_pliku">Cofanie zmian w zmodyfikowanym pliku</h3>
<div class="paragraph">
<p>Co jeśli okaże się, że nie chcesz jednak zatrzymać zmian wykonanych w pliku <code>CONTRIBUTING.md</code>? W jaki sposób łatwo cofnąć wprowadzone modyfikacje czyli przywrócić plik do stanu w jakim był po ostatniej rewizji (lub początkowym sklonowaniu, lub jakkolwiek dostał się do katalogu roboczego)? Z pomocą przybywa raz jeszcze polecenie <code>git status</code>. W ostatnim przykładzie, pliki będące poza poczekalnią wyglądają następująco:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git konkretnie wskazuje jak pozbyć się dokonanych zmian. Zróbmy zatem co każe Git:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -- CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README</code></pre>
</div>
</div>
<div class="paragraph">
<p>Możesz teraz przeczytać, że zmiany zostały cofnięte.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Ważne</div>
</td>
<td class="content">
<div class="paragraph">
<p>Powinieneś sobie już także zdawać sprawę, że polecenie <code>git checkout -- [file]</code> jest dość niebezpieczne: wszelkie zmiany jakie wykonałeś w pliku przepadają - w rzeczy samej został on nadpisany poprzednią wersją. Nigdy nie używaj tego polecenia dopóki nie jesteś absolutnie pewny, że nie chcesz i nie potrzebujesz już danego pliku.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Jeśli jedynie chcesz się go chwilowo pozbyć przyjrzymy się specjalnemu poleceniu schowka (stash) oraz gałęziom w <a href="{{< relurl "book/pl/v2/ch00/_git_branching" >}}">Gałęzie Gita</a> - są to generalnie znacznie lepsze sposoby.</p>
</div>
<div class="paragraph">
<p>Pamiętaj, że wszystko co <em>zatwierdzasz</em> do repozytorium Gita może zostać w niemalże dowolnym momencie odtworzone. Nawet rewizje, które znajdowały się w usuniętych gałęziach, albo rewizje nadpisane zatwierdzeniem poprawiającym <code>--amend</code> mogą być odtworzone (odzyskiwanie danych opisujemy w <a href="{{< relurl "book/pl/v2/ch00/_data_recovery" >}}">Odzyskiwanie danych</a>). Jednakże, cokolwiek utraciłeś a nie było to nigdy wcześniej zatwierdzane do repozytorium, prawdopodobnie odeszło na zawsze.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>