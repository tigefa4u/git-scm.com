---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: pl
  chapter:
    title: Git na serwerze
    number: 4
  section:
    title: Uruchomienie Git na serwerze
    number: 2
    cs_number: '4.2'
    previous: book/pl/v2/Git-na-serwerze-Protokoły
    next: book/pl/v2/Git-na-serwerze-Generowanie-Twojego-publicznego-klucza-SSH
title: Git - Uruchomienie Git na serwerze
---
<h2 id="_git_on_the_server">Uruchomienie Git na serwerze</h2>
<div class="paragraph">
<p>Zajmiemy się teraz skonfigurowaniem usługi Git działającej ze wspomnianymi wyżej protokołami na Twoim własnym serwerze.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Zademonstrujemy tutaj polecenia i kroki potrzebne do wykonania podstawowych, uproszczonych instalacji na serwerze opartym na Linuksie, choć możliwe jest również uruchomienie tych usług na serwerach Mac lub Windows.
Skonfigurowanie serwera produkcyjnego w ramach Twojej infrastruktury z pewnością będzie się wiązało z różnicami w środkach bezpieczeństwa lub narzędziach systemu operacyjnego, ale miejmy nadzieję, że da Ci to ogólne pojęcie o tym, które czynności są wymagane.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Aby wstępnie skonfigurować dowolny serwer Git należy wyeksportować istniejące repozytorium jak repozytorium czyste – takie, które nie posiada katalogu roboczego. Można to zrobić w bardzo prosty sposób.
Aby sklonować repozytorium jako nowe, czyste repozytorium, należy uruchomić polecenie <code>clone</code> z opcją <code>--bare</code>.
Zgodnie z przyjętą konwencję, czyste repozytorium przechowywane jest w katalogu, którego nazwa kończy się na <code>.git</code>, np:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone --bare my_project my_project.git
Cloning into bare repository 'my_project.git'...
done.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Teraz powinieneś mieć kopię katalogu Git w katalogu <code>my_project.git</code>.</p>
</div>
<div class="paragraph">
<p>Ogólnie rzecz biorąc odpowiada to następującemu poleceniu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cp -Rf my_project/.git my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Istnieje kilka różnic w pliku konfiguracyjnym; ale dla naszych celów polecenia te wykonują te same czynności.
Biorą samo repozytorium Git, bez kopii roboczej i tworzą dedykowany dla niego katalog.</p>
</div>
<div class="sect3">
<h3 id="_bare_repo">Umieszczanie czystego repozytorium na serwerze</h3>
<div class="paragraph">
<p>Teraz, gdy posiadasz już czystą kopię repozytorium, pozostaje jedynie umieścić ją na serwerze i odpowiednio skonfigurować wybrane protokoły.
Powiedzmy, że masz serwer <code>git.example.com</code>, masz do niego dostęp po SSH i chcesz, żeby wszystkie repozytoria przechowywane były w katalogu <code>/opt/git</code>.
Możesz dodać nowe repozytorium kopiując tam Twoje czyste repozytorium:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ scp -r my_project.git user@git.example.com:/opt/git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Od tej chwili inni użytkownicy, którzy mają do tego serwera dostęp SSH oraz uprawnienia do odczytu katalogu <code>/opt/git</code> mogą sklonować Twoje repozytorium za pomocą:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone user@git.example.com:/opt/git/my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jeśli użytkownik może łączyć się z serwerem za pomocą SSH i ma uprawnienia do zapisu dla katalogu <code>/opt/git/my_project.git</code>, automatycznie zyskuje możliwość pchania zmian do tego repozytorium.</p>
</div>
<div class="paragraph">
<p>Git automatycznie doda do katalogu dostęp do zapisu dla grupy jeśli uruchomisz polecenie <code>git init</code> z opcją <code>--shared</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh user@git.example.com
$ cd /opt/git/my_project.git
$ git init --bare --shared</code></pre>
</div>
</div>
<div class="paragraph">
<p>Widać zatem, że bardzo prosto jest wziąć repozytorium Git, utworzyć jego czystą kopię i umieścić na serwerze do którego posiadasz wraz ze współpracownikami dostęp SSH.
Jesteś teraz przygotowany do wspólnej pracy nad danym projektem.</p>
</div>
<div class="paragraph">
<p>Warto zaznaczyć, że to właściwie wszystko czego potrzeba, aby utworzyć działający serwer Git, do którego dostęp ma kilka osób – wystarczy utworzyć dla nich konta SSH i wstawić czyste repozytorium gdzieś, gdzie osoby te mają dostęp i uprawnienia do zapisu i odczytu.
Więcej nie trzeba – można działać.</p>
</div>
<div class="paragraph">
<p>W następnych sekcjach zobaczysz jak przeprowadzić bardziej zaawansowaną konfigurację.
Sprawdzimy jak uniknąć konieczności tworzenia kont użytkowników dla każdej osoby, jak dodać publiczny dostęp tylko do odczytu, jak skonfigurować interfejs WWW i inne.
Miej jednak na uwadze, że do pracy nad prywatnym projektem w kilka osób, wszystko, czego <em>potrzebujesz</em>, to serwer z dostępem SSH i czyste repozytorium.</p>
</div>
</div>
<div class="sect3">
<h3 id="_prosta_konfiguracja">Prosta konfiguracja</h3>
<div class="paragraph">
<p>Jeśli pracujesz w niewielkim zespole, albo testujesz Git w firmie i nie masz wielu programistów, wszystko jest proste.
Jednym z najbardziej skomplikowanych aspektów konfiguracji serwera Git jest zarządzanie użytkownikami.
Jeśli chcesz udostępnić niektóre repozytoria tylko do odczytu dla wybranych użytkowników, a pozwolić innym na zapis do nich, mogą pojawić się problemy z poprawną konfiguracją uprawnień.</p>
</div>
<div class="sect4">
<h4 id="_dostęp_ssh">Dostęp SSH</h4>
<div class="paragraph">
<p>
eśli już masz serwer, do którego wszyscy programiści mają dostęp SSH najprościej jest właśnie na nim stworzyć pierwsze repozytorium, ponieważ nie wymaga to praktycznie żadnej pracy (jak opisaliśmy to w poprzedniej sekcji).
Jeśli potrzebujesz bardziej wyrafinowanej konfiguracji uprawnień dla repozytoriów możesz skorzystać z normalnych uprawnień systemu plików Twojego systemu operacyjnego.</p>
</div>
<div class="paragraph">
<p>Jeśli zamierzasz umieścić Twoje repozytoria na serwerze, w którym nie istnieją konta użytkowników dla wszystkich osób z zespołu, którym chcesz nadać uprawnienia do zapisu, będziesz musiał dodać im możliwość dostępu po SSH.
Zakładamy oczywiście, że na serwerze, na którym chcesz przechowywać repozytoria Git ma już zainstalowany serwer SSH i właśnie w ten sposób uzyskujesz do niego dostęp.</p>
</div>
<div class="paragraph">
<p>Istnieje kilka sposobów pozwolenia na dostęp osobom z zespołu.
Pierwszym z nich jest utworzenie dla wszystkich kont użytkowników, co jest prostą, aczkolwiek żmudną czyunnością.
Niekoniecznie możesz mieć ochotę wywoływania wiele razy <code>adduser</code> oraz ustawiania haseł tymczasowych dla każdego użytkownika.</p>
</div>
<div class="paragraph">
<p>Drugi sposób polega na utworzeniu jednego konta użytkownika <code>git</code> oraz poproszeniu każdego użytkownika, który ma mieć dostęp do zapisu, by przesłał Ci swój publiczny klucz SSH.
Nadesłane klucze należy dodać do pliku <code>~/.ssh/authorized_keys</code> w katalogu domowym użytkownika <code>git</code>.
Od tej chwili każda z osób będzie miała dostęp do serwera jako użytkownik <code>git</code>.
Nie wpływa to w żaden sposób na dane z rewizji – użytkownik SSH, na którego się logujesz nie jest używany do generowania tych danych.</p>
</div>
<div class="paragraph">
<p>Można jeszcze skonfigurować serwer SSH tak, aby dane uwierzytelniające przechowywane były na serwerze LDAP, albo w innym miejscu do tego przeznaczonym, które możesz posiadać w firmie.
Jeśli tylko użytkownik ma dostęp do powłoki systemu każdy mechanizm uwierzytelniania SSH powinien działać.</p>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>