---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: ja
  chapter:
    title: '付録 C: Gitのコマンド'
    number: 3
  section:
    title: 基本的なスナップショット
    number: 3
    cs_number: A3.3
    previous: book/ja/v2/付録-C:-Gitのコマンド-プロジェクトの取得と作成
    next: book/ja/v2/付録-C:-Gitのコマンド-ブランチとマージ
title: Git - 基本的なスナップショット
url: "/book/ja/v2/付録-C:-Gitのコマンド-基本的なスナップショット.html"
---
<h2 id="_基本的なスナップショット">基本的なスナップショット</h2>
<div class="paragraph">
<p>コンテンツをステージングしたり、それを歴史に対してコミットしたりする基本的なワークフローについては、基本的なコマンドが少しあるだけです。</p>
</div>
<div class="sect3">
<h3 id="_git_add">git add</h3>
<div class="paragraph">
<p><code>git add</code> コマンドは、次のコミット用に、ワーキングディレクトリからステージングエリア（または “インデックス”）へコンテンツを追加します。<code>git commit</code> コマンドの実行時、デフォルトではこのステージングエリアしか参照しません。そのため、 <code>git add</code> は、次のコミットのスナップショットが正確にはどのようになっていて欲しいのかを組み立てるのに使用されます。</p>
</div>
<div class="paragraph">
<p>このコマンドは、Gitの中でも非常に重要なコマンドです。本書の中でも、何十回も言及したり使用したりしています。ここでは、その中で見られるユニークな使用法をいくつか取り上げます。</p>
</div>
<div class="paragraph">
<p><code>git add</code> の紹介と詳細な説明を最初に行ったのは <a href="{{< relurl "book/ja/v2/ch00/r_tracking_files" >}}">新しいファイルの追跡</a> でした。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_basic_merge_conflicts" >}}">マージ時のコンフリクト</a> では、マージの衝突を解決するためにこのコマンドを使用する方法について言及しました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_interactive_staging" >}}">対話的なステージング</a> では、このコマンドを使って、変更されたファイルのうち、特定の部分だけを対話的にステージングする方法について細かく見てきました。</p>
</div>
<div class="paragraph">
<p>最後に、 <a href="{{< relurl "book/ja/v2/ch00/r_tree_objects" >}}">ツリーオブジェクト</a> では、舞台裏で何を行っているかを理解するため、このコマンドを低レベルで模倣しました。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_status">git status</h3>
<div class="paragraph">
<p><code>git status</code> コマンドは、作業ディレクトリとステージングエリアとに対して、ファイルの状態について別々の内容を表示します。それぞれ、変更されているがステージングされていないファイルはどれか、ステージングされているがまだコミットされていないファイルはどれかを表示します。通常の使用法では、これらのステージの間でファイルを移動する方法について、基本的なヒントも表示します。</p>
</div>
<div class="paragraph">
<p>最初に <code>status</code> を取り上げたのは <a href="{{< relurl "book/ja/v2/ch00/r_checking_status" >}}">ファイルの状態の確認</a> で、基本的な使用法と単純化された使用法の両方を取り上げました。本書の全体を通してこのコマンドを使ってきましたが、<code>git status</code> コマンドで行えることのほぼすべてをここで取り上げています。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_diff">git diff</h3>
<div class="paragraph">
<p><code>git diff</code> は、2つの任意のツリーで確認したい場合に使用します。これは、作業中の環境とステージングエリアの差異(<code>git diff</code> だけで表示される)でもよいですし、ステージングエリアと最後のコミットの差異(<code>git diff --staged</code>)でもよいですし、2つのコミットの差異(<code>git diff master branchB</code>)でもよいです。</p>
</div>
<div class="paragraph">
<p><code>git diff</code> の基本的な使用法を最初に見たのは <a href="{{< relurl "book/ja/v2/ch00/r_git_diff_staged" >}}">ステージされている変更 / されていない変更の閲覧</a> でした。ここでは、どの変更がステージングされていて、どの変更がまだステージングされていないのか見る方法を示しました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_commit_guidelines" >}}">コミットの指針</a> では、<code>--check</code> オプションを使って、問題となる空白文字がないかをコミット前に探すのに使いました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_what_is_introduced" >}}">何が変わるのかの把握</a> では、<code>git diff A...B</code> という文法を使って、ブランチ間の差異をより効率的にチェックする方法を見てきました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_advanced_merging" >}}">高度なマージ手法</a> では、<code>-b</code> を使って空白文字の差異をフィルタしました。また、 <code>--theirs</code>、 <code>--ours</code>、 <code>--base</code> を使って、衝突しているファイルのいろいろな段階を比較しました。</p>
</div>
<div class="paragraph">
<p>最後に、 <a href="{{< relurl "book/ja/v2/ch00/r_starting_submodules" >}}">サブモジュールの作り方</a> では、サブモジュールの変更を効率的に比較するために <code>--submodule</code> を使いました。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_difftool">git difftool</h3>
<div class="paragraph">
<p><code>git difftool</code> コマンドは、単に外部ツールを起動して、2つのツリーの差異を表示します。これは、ビルトインの <code>git diff</code> 以外のコマンドを使いたい場合に使用します。</p>
</div>
<div class="paragraph">
<p>このコマンドについては、 <a href="{{< relurl "book/ja/v2/ch00/r_git_diff_staged" >}}">ステージされている変更 / されていない変更の閲覧</a> で簡単に言及しただけです。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_commit">git commit</h3>
<div class="paragraph">
<p><code>git commit</code> コマンドは、<code>git add</code> でステージングされたすべてのファイルの内容を取得し、データベースに新しく永続的なスナップショットを記録し、最後に現在のブランチのブランチポインタをそこまで進めます。</p>
</div>
<div class="paragraph">
<p>コミットの基本を最初に取り上げたのは <a href="{{< relurl "book/ja/v2/ch00/r_committing_changes" >}}">変更のコミット</a> でした。そこではまた、 <code>-a</code> フラグを使って、日々のワークフローで <code>git add</code> を行うステップを省略する方法の実例を示しました。また、<code>-m</code> フラグを使って、コミットメッセージを、エディタを起動するのではなくコマンドラインから渡す方法についても説明しました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_undoing" >}}">作業のやり直し</a> では、<code>--amend</code> オプションを使って最新のコミットを取り消す方法を取り上げました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_git_branches_overview" >}}">ブランチとは</a> では、<code>git commit</code> が何を行っているか、なぜそのようなことをするのかについて非常に細かいところまで説明しました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_signing_commits" >}}">コミットへの署名</a> では、<code>-S</code> フラグを使って、コミットに暗号を使って署名を行う方法を見てきました。</p>
</div>
<div class="paragraph">
<p>最後に、 <a href="{{< relurl "book/ja/v2/ch00/r_git_commit_objects" >}}">コミットオブジェクト</a> では、 <code>git commit</code> コマンドがバックグラウンドで何を行っているのか、またそれが実際どのように実装されているのかを簡単に見てきました。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_reset">git reset</h3>
<div class="paragraph">
<p><code>git reset</code> コマンドは、その動詞から分かるかも知れませんが、主に物事を元に戻すのに使われます。このコマンドは、 <code>HEAD</code> ポインタをあちこち動かし、必要に応じて <code>インデックス</code> またはステージングエリアに変更を加えます。 <code>--hard</code> を使えば作業ディレクトリを変更することもできます。この最後のオプションは、誤って使用すると作業結果を失う可能性があるので、必ずその点を理解した上で使用してください。</p>
</div>
<div class="paragraph">
<p><code>git reset</code> の最も単純な使用法を実質的に初めて取り上げたのは <a href="{{< relurl "book/ja/v2/ch00/r_unstaging" >}}">ステージしたファイルの取り消し</a> でした。ここでは、 <code>git add</code> したファイルのステージを解除するのに使いました。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_git_reset" >}}">リセットコマンド詳説</a> は、全体がこのコマンドの説明に費やされており、このコマンドについてかなり詳細に取り上げています。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_abort_merge" >}}">マージの中止</a> では、 <code>git reset --hard</code> を使用してマージを中断しました。また、<code>git reset</code> コマンドのちょっとしたラッパーである <code>git merge --abort</code> も使用しました。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_rm">git rm</h3>
<div class="paragraph">
<p><code>git rm</code> コマンドは、ステージングエリアおよびGitの作業ディレクトリからファイルを削除するのに使用されます。これは、次のコミット用に <code>git add</code> でファイルの削除をステージングするのに似ています。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_removing_files" >}}">ファイルの削除</a> では、 <code>git rm</code> コマンドの詳細を取り上げました。ファイルを再帰的に削除する方法、 <code>--cached</code> を使って作業ディレクトリにファイルを残しつつステージングエリアからファイルを削除する方法などについて取り上げました。</p>
</div>
<div class="paragraph">
<p>これ以外の方法で <code>git rm</code> を使用したのは <a href="{{< relurl "book/ja/v2/ch00/r_removing_objects" >}}">オブジェクトの削除</a> だけです。ここでは、 <code>git filter-branch</code> を実行した際に、 <code>--ignore-unmatch</code> について簡単に説明しました。これは、削除しようとしているファイルが存在しなかった場合でもエラーとしないオプションで、スクリプトを作成する際に役立ちます。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_mv">git mv</h3>
<div class="paragraph">
<p><code>git mv</code> は簡単な便利コマンドで、ファイルを移動した上で、新しいファイルを <code>git add</code> し、古いファイルを <code>git rm</code> します。</p>
</div>
<div class="paragraph">
<p>このコマンドについては、 <a href="{{< relurl "book/ja/v2/ch00/r_git_mv" >}}">ファイルの移動</a> で簡単に言及しただけです。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_clean">git clean</h3>
<div class="paragraph">
<p><code>git clean</code> コマンドは、作業ディレクトリから不要なファイルを削除するのに使用されます。これには、ビルド時の一時ファイルやマージ衝突ファイルの削除が含まれます。</p>
</div>
<div class="paragraph">
<p><a href="{{< relurl "book/ja/v2/ch00/r_git_clean" >}}">作業ディレクトリの掃除</a> では、cleanコマンドのオプションの多くや、cleanコマンドを使用する シナリオについて取り上げました。</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>