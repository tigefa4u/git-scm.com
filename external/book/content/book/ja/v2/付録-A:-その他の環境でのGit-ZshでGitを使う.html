---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: ja
  chapter:
    title: '付録 A: その他の環境でのGit'
    number: 1
  section:
    title: ZshでGitを使う
    number: 5
    cs_number: A1.5
    previous: book/ja/v2/付録-A:-その他の環境でのGit-BashでGitを使う
    next: book/ja/v2/付録-A:-その他の環境でのGit-PowershellでGitを使う
title: Git - ZshでGitを使う
url: "/book/ja/v2/付録-A:-その他の環境でのGit-ZshでGitを使う.html"
---
<h2 id="_zshでgitを使う">ZshでGitを使う</h2>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Zshには、Git用のタブ補完ライブラリも同梱されています。
`.zshrc`に`autoload -Uz compinit &amp;&amp; compinit`という行を追加するだけで、使えるようになります。
Zshのインターフェイスは、Bashよりさらに強力です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git che&lt;tab&gt;
check-attr        -- display gitattributes information
check-ref-format  -- ensure that a reference name is well formed
checkout          -- checkout branch or paths to working tree
checkout-index    -- copy files from index to working directory
cherry            -- find commits not merged upstream
cherry-pick       -- apply changes introduced by some existing commits</code></pre>
</div>
</div>
<div class="paragraph">
<p>タブ補完の結果が一意に定まらない場合にできることは、候補のリスト表示だけではありません。役に立つ説明が表示されますし、繰り返しタブを押下すれば、グラフィカルにリスト内をナビゲートすることもできます。
この機能は、Gitのコマンド、Gitコマンドの引数、リポジトリ内にあるものの名前（参照やリモートなど）に対して働きます。また、ファイル名や、その他Zsh自身がタブ補完の方法を知っている要素に対しても働きます。</p>
</div>
<div class="paragraph">
<p>また、バージョン管理システムから情報を読み取るためのフレームワークがZshには同梱されています。
ブランチ名をプロンプトの右端に表示するには、 <code>~/.zshrc</code> ファイルに次の内容を追加します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">autoload -Uz vcs_info
precmd_vcs_info() { vcs_info }
precmd_functions+=( precmd_vcs_info )
setopt prompt_subst
RPROMPT=\$vcs_info_msg_0_
# PROMPT=\$vcs_info_msg_0_'%# '
zstyle ':vcs_info:git:*' formats '%b'</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、シェルがGitリポジトリ内にいるときには、ターミナルウィンドウの右側に現在のブランチ名が表示されるようになります。
（左側に表示することももちろん可能です。そうしたければ、PROMPT 部分のコメントを外してください。）
見た目は次のようになります。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/ja/v2/images/zsh-prompt.png" >}}" alt="カスタマイズされた `zsh` のプロンプト">
</div>
<div class="title">図 161. カスタマイズされた <code>zsh</code> のプロンプト</div>
</div>
<div class="paragraph">
<p>vcs_infoについての詳細は、`zshcontrib(1)`マニュアルにあるドキュメントか、オンラインであれば <a href="http://zsh.sourceforge.net/Doc/Release/User-Contributions.html#Version-Control-Information" class="bare">http://zsh.sourceforge.net/Doc/Release/User-Contributions.html#Version-Control-Information</a> を確認してみてください。</p>
</div>
<div class="paragraph">
<p>一方、Gitに同梱されている`git-prompt.sh`というスクリプトでも、プロンプトをカスタマイズすることができます。vcs_infoよりも気に入るかもしれませんね。詳しくは <a href="https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh" class="bare">https://github.com/git/git/blob/master/contrib/completion/git-prompt.sh</a> を確認してみてください。
`git-prompt.sh`はBashとZshの両方に対応しています。</p>
</div>
<div class="paragraph">
<p>Zshは非常にパワフルであり、Zshには自身を改善するためのフレームワークも備わっています。
そのフレームワークの一つに "oh-my-zsh" があります。これは <a href="https://github.com/robbyrussell/oh-my-zsh" class="bare">https://github.com/robbyrussell/oh-my-zsh</a> にあります。
oh-my-zshのプラグインシステムには、強力なGit用タブ補完機能が付属しています。また、各種のプロンプトの「テーマ」が付属していて、バージョン管理に関するデータをプロンプトに表示できます。
<a href="{{< relurl "book/ja/v2/ch00/roh_my_zsh_git" >}}">oh-my-zshのテーマの例</a> は、このシステムでできることの一例に過ぎません。</p>
</div>
<div id="roh_my_zsh_git" class="imageblock">
<div class="content">
<img src="{{< relurl "book/ja/v2/images/zsh-oh-my.png" >}}" alt="oh-my-zshのテーマの例">
</div>
<div class="title">図 162. oh-my-zshのテーマの例</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>