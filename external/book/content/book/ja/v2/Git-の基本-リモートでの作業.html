---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: ja
  chapter:
    title: Git の基本
    number: 2
  section:
    title: リモートでの作業
    number: 5
    cs_number: '2.5'
    previous: book/ja/v2/Git-の基本-作業のやり直し
    next: book/ja/v2/Git-の基本-タグ
title: Git - リモートでの作業
url: "/book/ja/v2/Git-の基本-リモートでの作業.html"
---
<h2 id="r_remote_repos">リモートでの作業</h2>
<div class="paragraph">
<p>Git を使ったプロジェクトで共同作業を進めていくには、リモートリポジトリの扱い方を知る必要があります。
リモートリポジトリとは、インターネット上あるいはその他ネットワーク上のどこかに存在するプロジェクトのことです。
複数のリモートリポジトリを持つこともできますし、それぞれを読み込み専用にしたり読み書き可能にしたりすることもできます。
他のメンバーと共同作業を進めていくにあたっては、これらのリモートリポジトリを管理し、必要に応じてデータのプル・プッシュを行うことで作業を分担していくことになります。
リモートリポジトリの管理には「リモートリポジトリの追加」「不要になったリモートリポジトリの削除」「リモートブランチの管理や追跡対象/追跡対象外の設定」などさまざまな作業が含まれます。
このセクションでは、これらのうちいくつかの作業について説明します。</p>
</div>
<div class="sect3">
<h3 id="_リモートの表示">リモートの表示</h3>
<div class="paragraph">
<p>今までにどのリモートサーバーを設定したのかを知るには <code>git remote</code> コマンドを実行します。
これは、今までに設定したリモートハンドルの名前を一覧表示します。
リポジトリをクローンしたのなら、少なくとも origin という名前が見えるはずです。
これは、クローン元のサーバーに対して Git がデフォルトでつける名前です。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone https://github.com/schacon/ticgit
Cloning into 'ticgit'...
remote: Reusing existing pack: 1857, done.
remote: Total 1857 (delta 0), reused 0 (delta 0)
Receiving objects: 100% (1857/1857), 374.35 KiB | 268.00 KiB/s, done.
Resolving deltas: 100% (772/772), done.
Checking connectivity... done.
$ cd ticgit
$ git remote
origin</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>-v</code> を指定すると、その名前に対応するURLを書き込み用と読み取り用の2つ表示します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote -v
origin	https://github.com/schacon/ticgit (fetch)
origin	https://github.com/schacon/ticgit (push)</code></pre>
</div>
</div>
<div class="paragraph">
<p>複数のリモートを設定している場合は、このコマンドはそれをすべて表示します。
たとえば、他のメンバーとの共同作業のために複数のリモートが設定してあるリポジトリの場合、このようになっています。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd grit
$ git remote -v
bakkdoor  https://github.com/bakkdoor/grit (fetch)
bakkdoor  https://github.com/bakkdoor/grit (push)
cho45     https://github.com/cho45/grit (fetch)
cho45     https://github.com/cho45/grit (push)
defunkt   https://github.com/defunkt/grit (fetch)
defunkt   https://github.com/defunkt/grit (push)
koke      git://github.com/koke/grit.git (fetch)
koke      git://github.com/koke/grit.git (push)
origin    git@github.com:mojombo/grit.git (fetch)
origin    git@github.com:mojombo/grit.git (push)</code></pre>
</div>
</div>
<div class="paragraph">
<p>つまり、これらのユーザーによる変更を容易にプルして取り込めるということです。
さらに、これらのうちのいくつかにはプッシュできる場合もあります（この表示からはそれは読み取れませんが）。</p>
</div>
<div class="paragraph">
<p>ここでは、リモートのプロトコルが多様であることに注意しておきましょう。<a href="{{< relurl "book/ja/v2/ch00/r_git_on_the_server" >}}">サーバー用の Git の取得</a>で、これについて詳しく説明します。</p>
</div>
</div>
<div class="sect3">
<h3 id="_リモートリポジトリの追加">リモートリポジトリの追加</h3>
<div class="paragraph">
<p>これまでのセクションでも何度かリモートリポジトリの追加を行ってきましたが、
ここで改めてその方法をきちんと説明しておきます。
新しいリモート Git リポジトリにアクセスしやすいような名前をつけて追加するには、
<code>git remote add &lt;shortname&gt; &lt;url&gt;</code> を実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote
origin
$ git remote add pb https://github.com/paulboone/ticgit
$ git remote -v
origin	https://github.com/schacon/ticgit (fetch)
origin	https://github.com/schacon/ticgit (push)
pb	https://github.com/paulboone/ticgit (fetch)
pb	https://github.com/paulboone/ticgit (push)</code></pre>
</div>
</div>
<div class="paragraph">
<p>これで、コマンドラインに URL を全部打ち込むかわりに <code>pb</code> という文字列を指定するだけでよくなりました。
たとえば、Paul が持つ情報の中で自分のリポジトリにまだ存在しないものをすべて取得するには、<code>git fetch pb</code> を実行すればよいのです。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch pb
remote: Counting objects: 43, done.
remote: Compressing objects: 100% (36/36), done.
remote: Total 43 (delta 10), reused 31 (delta 5)
Unpacking objects: 100% (43/43), done.
From https://github.com/paulboone/ticgit
 * [new branch]      master     -&gt; pb/master
 * [new branch]      ticgit     -&gt; pb/ticgit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Paul の master ブランチは、ローカルでは <code>pb/master</code> としてアクセスできます。
これを自分のブランチにマージしたり、ローカルブランチとしてチェックアウトして中身を調べたりといったことが可能となります。
（ブランチの役割と使い方については、 <a href="{{< relurl "book/ja/v2/ch00/ch03-git-branching" >}}">[ch03-git-branching]</a> で詳しく説明します。）</p>
</div>
</div>
<div class="sect3">
<h3 id="r_fetching_and_pulling">リモートからのフェッチ、そしてプル</h3>
<div class="paragraph">
<p>ごらんいただいたように、データをリモートリポジトリから取得するには次のコマンドを実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch [remote-name]</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコマンドは、リモートプロジェクトのすべてのデータの中からまだあなたが持っていないものを引き出します。
実行後は、リモートにあるすべてのブランチを参照できるようになり、いつでもそれをマージしたり中身を調べたりすることが可能となります。</p>
</div>
<div class="paragraph">
<p>リポジトリをクローンしたときには、リモートリポジトリに対して自動的に “origin” という名前がつけられます。
つまり、<code>git fetch origin</code> とすると、クローンしたとき (あるいは直近でフェッチを実行したとき) 以降にサーバーにプッシュされた変更をすべて取得することができます。
ひとつ注意すべき点は、 <code>git fetch</code> コマンドはデータをローカルリポジトリに引き出すだけだということです。
ローカルの環境にマージされたり作業中の内容を書き換えたりすることはありません。
したがって、必要に応じて自分でマージをする必要があります。</p>
</div>
<div class="paragraph">
<p>リモートブランチを追跡するためのブランチを作成すれば (次のセクションと <a href="{{< relurl "book/ja/v2/ch00/ch03-git-branching" >}}">[ch03-git-branching]</a> で詳しく説明します)、<code>git pull</code> コマンドを使うことができます。
これは、自動的にフェッチを行い、リモートブランチの内容を現在のブランチにマージします。
おそらくこのほうが、よりお手軽で使いやすいことでしょう。
また、 <code>git clone</code> コマンドはローカルの master ブランチ（実際のところ、デフォルトブランチであれば名前はなんでもかまいません）がリモートの master ブランチを追跡するよう、デフォルトで自動設定します。
<code>git pull</code> を実行すると、通常は最初にクローンしたサーバーからデータを取得し、現在作業中のコードへのマージを試みます。</p>
</div>
</div>
<div class="sect3">
<h3 id="r_pushing_remotes">リモートへのプッシュ</h3>
<div class="paragraph">
<p>あなたのプロジェクトがみんなと共有できる状態に達したら、それを上流にプッシュしなければなりません。
そのためのコマンドが <code>git push [remote-name] [branch-name]</code> です。
追加したコミットを <code>origin</code> サーバー (何度も言いますが、クローンした時点でこのブランチ名とサーバー名が自動設定されます) にプッシュしたい場合は、このように実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコマンドが動作するのは、自分が書き込みアクセス権を持つサーバーからクローンし、かつその後だれもそのサーバーにプッシュしていない場合のみです。
あなた以外の誰かが同じサーバーからクローンし、誰かが上流にプッシュした後で自分がプッシュしようとすると、それは拒否されます。
拒否された場合は、まず誰かがプッシュした作業内容を引き出してきてローカル環境で調整してからでないとプッシュできません。
リモートサーバーへのプッシュ方法の詳細については <a href="{{< relurl "book/ja/v2/ch00/ch03-git-branching" >}}">[ch03-git-branching]</a> を参照ください。</p>
</div>
</div>
<div class="sect3">
<h3 id="r_inspecting_remote">リモートの調査</h3>
<div class="paragraph">
<p>特定のリモートの情報をより詳しく知りたい場合は <code>git remote show [remote-name]</code> コマンドを実行します。
たとえば <code>origin</code> のように名前を指定すると、このような結果が得られます。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote show origin
* remote origin
  Fetch URL: https://github.com/schacon/ticgit
  Push  URL: https://github.com/schacon/ticgit
  HEAD branch: master
  Remote branches:
    master                               tracked
    dev-branch                           tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date)</code></pre>
</div>
</div>
<div class="paragraph">
<p>リモートリポジトリの URL と、追跡対象になっているブランチの情報が表示されます。
また、ご丁寧にも「master ブランチ上で <code>git pull</code> すると、リモートの情報を取得した後で自動的にリモートの master ブランチの内容をマージする」という説明があります。
さらに、引き出してきたすべてのリモート情報も一覧表示されます。</p>
</div>
<div class="paragraph">
<p>ただし、これはほんの一例にすぎません。Git をもっと使い込むようになると、<code>git remote show</code> で得られる情報はどんどん増えていきます。たとえば次のような結果を得ることになるかもしれません。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote show origin
* remote origin
  URL: https://github.com/my-org/complex-project
  Fetch URL: https://github.com/my-org/complex-project
  Push  URL: https://github.com/my-org/complex-project
  HEAD branch: master
  Remote branches:
    master                           tracked
    dev-branch                       tracked
    markdown-strip                   tracked
    issue-43                         new (next fetch will store in remotes/origin)
    issue-45                         new (next fetch will store in remotes/origin)
    refs/remotes/origin/issue-11     stale (use 'git remote prune' to remove)
  Local branches configured for 'git pull':
    dev-branch merges with remote dev-branch
    master     merges with remote master
  Local refs configured for 'git push':
    dev-branch                     pushes to dev-branch                     (up to date)
    markdown-strip                 pushes to markdown-strip                 (up to date)
    master                         pushes to master                         (up to date)</code></pre>
</div>
</div>
<div class="paragraph">
<p>このコマンドは、特定のブランチ上で <code>git push</code> したときにどのブランチに自動プッシュされるのかを表示しています。
また、サーバー上のリモートブランチのうちまだ手元に持っていないもの、手元にあるブランチのうちすでにサーバー上では削除されているもの、<code>git pull</code> を実行したときに自動的にマージされるブランチなども表示されています。</p>
</div>
</div>
<div class="sect3">
<h3 id="_リモートの削除リネーム">リモートの削除・リネーム</h3>
<div class="paragraph">
<p>リモートを参照する名前を変更したい場合、 <code>git remote rename</code> を使うことができます。
たとえば <code>pb</code> を <code>paul</code> に変更したい場合は <code>git remote rename</code> をこのように実行します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote rename pb paul
$ git remote
origin
paul</code></pre>
</div>
</div>
<div class="paragraph">
<p>そうすると、リモートブランチ名も併せて変更されることを付け加えておきましょう。
これまで <code>pb/master</code> として参照していたブランチは、これからは <code>paul/master</code> となります。</p>
</div>
<div class="paragraph">
<p>何らかの理由でリモートを削除したい場合 (サーバーを移動したとか特定のミラーを使わなくなったとか、あるいはプロジェクトからメンバーが抜けたとかいった場合) は <code>git remote rm</code> を使用します。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote rm paul
$ git remote
origin</code></pre>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>