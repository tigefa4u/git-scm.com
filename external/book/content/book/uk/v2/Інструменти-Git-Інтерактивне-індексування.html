---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: uk
  chapter:
    title: Інструменти Git
    number: 7
  section:
    title: Інтерактивне індексування
    number: 2
    cs_number: '7.2'
    previous: book/uk/v2/Інструменти-Git-Вибір-ревізій
    next: book/uk/v2/Інструменти-Git-Ховання-та-чищення
title: Git - Інтерактивне індексування
url: "/book/uk/v2/Інструменти-Git-Інтерактивне-індексування.html"
---
<h2 id="_interactive_staging">Інтерактивне індексування</h2>
<div class="paragraph">
<p>У цій секції ми розглянемо декілька інтерактивних команд Git, що допомагають легко майструвати коміти, щоб вони включали тільки певні комбінації та частини файлів.
Ці інструменти допомагають, коли ви редагуєте багато файлів, а потім вирішуєте, що краще записати ці зміни в декількох цілеспрямованих комітах, ніж в одному великому безладному коміті.
Таким чином ви можете бути впевнені, що ваші коміти є логічно розділеними змінами та можуть бути легко перевірені програмістами, що з вами працюють.
Якщо ви виконаєте <code>git add</code> з опцією <code>-i</code> або <code>--interactive</code>, Git перейде до інтерактивного режиму та покаже щось таке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git add -i
           staged     unstaged path
  1:    unchanged        +0/-1 TODO
  2:    unchanged        +1/-1 index.html
  3:    unchanged        +5/-1 lib/simplegit.rb

*** Commands ***
  1: status     2: update      3: revert     4: add untracked
  5: patch      6: diff        7: quit       8: help
What now&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Як ви бачите, відображення області індексації, що його показує ця команда, разюче відрізняється від звичного – це майже та саме інформація, що ви отримуєте за допомогою <code>git status</code>, проте трохи докладніша й дещо стисліше відображена.
У списку проіндексовані зміни вказані ліворуч, а непроіндексовані - праворуч.</p>
</div>
<div class="paragraph">
<p>Після цього йде секція команд (“Commands”), що дозволяє робити чимало всього, наприклад, індексувати та деіндексувати файли, індексувати частини файлів, додавати не супроводжувані файли та відображати проіндексовані зміни.</p>
</div>
<div class="sect3">
<h3 id="_індексування_та_деіндексування_файлів">Індексування та деіндексування файлів</h3>
<div class="paragraph">
<p>Якщо ви наберете <code>2</code> або <code>u</code> після запиту <code>What now&gt;</code>, вас запитають, які файли ви бажаєте проіндексувати:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">What now&gt; 2
           staged     unstaged path
  1:    unchanged        +0/-1 TODO
  2:    unchanged        +1/-1 index.html
  3:    unchanged        +5/-1 lib/simplegit.rb
Update&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Щоб проіндексувати файли <code>TODO</code> та <code>index.html</code>, ви можете набрати числа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Update&gt;&gt; 1,2
           staged     unstaged path
* 1:    unchanged        +0/-1 TODO
* 2:    unchanged        +1/-1 index.html
  3:    unchanged        +5/-1 lib/simplegit.rb
Update&gt;&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>*</code> біля кожного файла означає, що файл є вибраним для індексування.
Якщо ви нічого не наберете, та натиснете Ентер після порожнього запиту <code>Update&gt;&gt;</code>, Git візьме все вибране та проіндексує його:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Update&gt;&gt;
updated 2 paths

*** Commands ***
  1: status     2: update      3: revert     4: add untracked
  5: patch      6: diff        7: quit       8: help
What now&gt; 1
           staged     unstaged path
  1:        +0/-1      nothing TODO
  2:        +1/-1      nothing index.html
  3:    unchanged        +5/-1 lib/simplegit.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Як бачите, файли <code>TODO</code> та <code>index.html</code> проіндексовані, а файл <code>simplegit.rb</code> досі не проіндексований.
Якщо ви тепер бажаєте деіндексувати файл TODO, ви можете використати опцію <code>3</code> або <code>r</code> (від revert, скасувати):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">*** Commands ***
  1: status     2: update      3: revert     4: add untracked
  5: patch      6: diff        7: quit       8: help
What now&gt; 3
           staged     unstaged path
  1:        +0/-1      nothing TODO
  2:        +1/-1      nothing index.html
  3:    unchanged        +5/-1 lib/simplegit.rb
Revert&gt;&gt; 1
           staged     unstaged path
* 1:        +0/-1      nothing TODO
  2:        +1/-1      nothing index.html
  3:    unchanged        +5/-1 lib/simplegit.rb
Revert&gt;&gt; [enter]
reverted one path</code></pre>
</div>
</div>
<div class="paragraph">
<p>Якщо ви знову подивитесь на статус Git, то побачите, що файл <code>TODO</code> деіндексований:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">*** Commands ***
  1: status     2: update      3: revert     4: add untracked
  5: patch      6: diff        7: quit       8: help
What now&gt; 1
           staged     unstaged path
  1:    unchanged        +0/-1 TODO
  2:        +1/-1      nothing index.html
  3:    unchanged        +5/-1 lib/simplegit.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Щоб побачити зміни, які ви проіндексували, ви можете використати команди <code>6</code> або <code>d</code> (від diff, різниця).
Вона показує список індексованих файлів, та ви можете вибрати ті, для яких бажаєте побачити індексовані зміни.
Це дуже схоже на виконання <code>git diff --cached</code> з командного рядка:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">*** Commands ***
  1: status     2: update      3: revert     4: add untracked
  5: patch      6: diff        7: quit       8: help
What now&gt; 6
           staged     unstaged path
  1:        +1/-1      nothing index.html
Review diff&gt;&gt; 1
diff --git a/index.html b/index.html
index 4d07108..4335f49 100644
--- a/index.html
+++ b/index.html
@@ -16,7 +16,7 @@ Date Finder

 &lt;p id="out"&gt;...&lt;/p&gt;

-&lt;div id="footer"&gt;contact : support@github.com&lt;/div&gt;
+&lt;div id="footer"&gt;contact : email.support@github.com&lt;/div&gt;

 &lt;script type="text/javascript"&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>За допомогою цих команд, ви можете використовувати інтерактивний режим додавання щоб поратися в області індексування з легкістю.</p>
</div>
</div>
<div class="sect3">
<h3 id="_індексування_латок_patch">Індексування латок (patch)</h3>
<div class="paragraph">
<p>Git також може індексувати окремі <em>частини</em> файлів без індексування решти частин.
Наприклад, якщо ви зробили дві зміни у файлі <code>simplegit.rg</code>, проте бажаєте проіндексувати тільки одну з них, це дуже легко зробити в Git.
Наберіть <code>5</code> або <code>p</code> (від patch - латка) в тому ж інтерактивному запиті, про який було розказано вище.
Git спитає, які файли ви бажаєте частково індексувати. Потім, для кожної секції вибраних файлів, відобразить шмати різниці файлів та запитає, чи бажаєте ви проіндексувати кожен:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">diff --git a/lib/simplegit.rb b/lib/simplegit.rb
index dd5ecc4..57399e0 100644
--- a/lib/simplegit.rb
+++ b/lib/simplegit.rb
@@ -22,7 +22,7 @@ class SimpleGit
   end

   def log(treeish = 'master')
-    command("git log -n 25 #{treeish}")
+    command("git log -n 30 #{treeish}")
   end

   def blame(path)
Stage this hunk [y,n,a,d,/,j,J,g,e,?]?</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наразі у вас багато варіантів.
Набравши <code>?</code> ви побачите список своїх можливостей:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Stage this hunk [y,n,a,d,/,j,J,g,e,?]? ? (Проіндексувати цей шмат [y,n,a,d,/,j,J,g,e,?]? ?)
y - stage this hunk (проіндексувати цей шмат)
n - do not stage this hunk (не індексувати цей шмат)
a - stage this and all the remaining hunks in the file (індексувати цей і решту шматів у файлі)
d - do not stage this hunk nor any of the remaining hunks in the file (не індексувати ані цей шмат ані решту шматів у файлі)
g - select a hunk to go to (вибрати шмат до якого перейти)
/ - search for a hunk matching the given regex (шукати шмат за регулярним виразом)
j - leave this hunk undecided, see next undecided hunk (залишити цей шмат нерозв'язаним, перейти до наступного нерозв'язаного шмата)
J - leave this hunk undecided, see next hunk (залишити цей шмат нерозв'язаним, перейти до наступного шмата)
k - leave this hunk undecided, see previous undecided hunk (залишити цей шмат нерозв'язаним, перейти до попереднього нерозв'язаного шмата)
K - leave this hunk undecided, see previous hunk (залишити цей шмат нерозв'язаним, перейти до попереднього шмата)
s - split the current hunk into smaller hunks (подрібнити цей шмат)
e - manually edit the current hunk (редагувати поточний шмат вручну)
? - print help (надрукувати допомогу)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Зазвичай вам буде достатньо <code>y</code> та <code>n</code>, якщо ви бажаєте індексувати кожен, проте індексування всіх шматів у деяких файлах, або відтермінування рішення щодо шмату також можуть бути корисними.
Якщо ви проіндексуєте одну частину файлу та залишите іншу неіндексованою, ваш статус буде виглядати так:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">What now&gt; 1
           staged     unstaged path
  1:    unchanged        +0/-1 TODO
  2:        +1/-1      nothing index.html
  3:        +1/-1        +4/-0 lib/simplegit.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Статус файлу <code>simplegit.rb</code> цікавий.
Він показує, що декілька рядків індексовані, а декілька ні.
Ви частково проіндексували файл.
Тепер ви можете покинути скрипт інтерактивного додавання та виконати <code>git commit</code> щоб зберегти частково проіндексовані файли.</p>
</div>
<div class="paragraph">
<p>Вам не обов’язково бути в інтерактивному режимі додавання щоб частково проіндексувати файл — ви можете запустити той самий скрипт за допомогою <code>git add -p</code> або <code>git add --patch</code> з командного рядка.</p>
</div>
<div class="paragraph">
<p>Більш того, ви можете використовувати цей режим для часткового скидання (resetting) файлів за допомогою команди <code>git reset --patch</code>, отримувати частини файлів командою <code>git checkout --patch) та заховувати частини файлів командою `git stash save --patch</code>.
Ми докладніше розглянемо кожну з них, коли дійдемо до складніших використань цих команд.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>