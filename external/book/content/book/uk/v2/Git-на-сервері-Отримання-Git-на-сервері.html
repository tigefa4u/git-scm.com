---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: uk
  chapter:
    title: Git на сервері
    number: 4
  section:
    title: Отримання Git на сервері
    number: 2
    cs_number: '4.2'
    previous: book/uk/v2/Git-на-сервері-Протоколи
    next: book/uk/v2/Git-на-сервері-Генерація-вашого-публічного-ключа-SSH
title: Git - Отримання Git на сервері
url: "/book/uk/v2/Git-на-сервері-Отримання-Git-на-сервері.html"
---
<h2 id="_getting_git_on_a_server">Отримання Git на сервері</h2>
<div class="paragraph">
<p>Тепер ми розглянемо налаштування сервісу Git з цими протоколами на вашому власному сервері.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Зауваження</div>
</td>
<td class="content">
<div class="paragraph">
<p>Тут ми продемонструємо команди та кроки, що потрібні для базового, спрощеного встановлення на Linux сервері, хоча ці сервіси також можуть працювати під Mac або Windows серверами.
Насправді налаштування виробничого серверу у вашій інфраструктурі безперечно буде накладати відмінності у міри безпеки чи в роботі з системними утилітами, проте сподіваємось, що ця секція дасть вам загальне уявлення про процес.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Щоб налаштувати сервер Git, спочатку треба експортувати існуюче сховище до нового чистого сховища — сховища, що не містить робочої теки.
Це доволі просто зробити.
Щоб зробити клон вашого сховища та створити нове чисте сховище, треба виконати команду clone з опцією <code>--bare</code>.
За умовною домовленістю, теки чистих сховищ закінчуються суфіксом <code>.git</code>, наприклад:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone --bare my_project my_project.git
Cloning into bare repository 'my_project.git'...
done.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Тепер у вас є копія даних теки Git у теці <code>my_project.git</code>.</p>
</div>
<div class="paragraph">
<p>Це майже рівнозначно виконанню</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cp -Rf my_project/.git my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Є декілька незначних відмінностей у файлі конфігурації, проте для наших цілей, це майже одне й те саме.
Ми беремо саме сховище Git, без робочої теки, та створюємо теку спеціально і тільки для нього.</p>
</div>
<div class="sect3">
<h3 id="_bare_repo">Розміщення чистого сховища на сервер</h3>
<div class="paragraph">
<p>Тепер, коли у вас є чиста копія вашого сховища, все, що вам потрібно зробити — це розмістити його на сервері та налаштувати протоколи.
Припустімо, ви налаштували сервер за назвою <code>git.example.com</code>, до якого у вас є SSH доступ, та ви бажаєте зберігати усі ваші сховища Git під текою <code>/srv/git</code>.
Якщо тека <code>/srv/git</code> вже існує на сервері, ви можете налаштувати своє нове сховище, просто копіюванням вашого чистого сховища:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ scp -r my_project.git user@git.example.com:/srv/git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наразі інші користувачі, що мають SSH доступ на читання теки <code>/srv/git</code> на цьому сервері, можуть зробити клон вашого сховища, виконавши</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone user@git.example.com:/srv/git/my_project.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Якщо користувач зайде через SSH до серверу та має доступ на запис до теки <code>/srv/git/my_project.git</code>, він автоматично матиме право викладати зміни.</p>
</div>
<div class="paragraph">
<p>Git автоматично додасть групові права на запис до сховища вірно, якщо ви виконаєте команду <code>git init</code> з опцією <code>--shared</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh user@git.example.com
$ cd /srv/git/my_project.git
$ git init --bare --shared</code></pre>
</div>
</div>
<div class="paragraph">
<p>Бачите як просто взяти сховище Git, створити його чисту версію, та розмістити її на сервері, до якого ви та ваші колеги мають SSH доступ.
Тепер ви готові до співпраці над одним проектом.</p>
</div>
<div class="paragraph">
<p>Важливо зазначити, що це літерально все, що вам потрібно щоб отримати працюючий корисний Git сервер, до якого мають доступ декілька людей — просто додайте SSH акаунти на сервері, та закиньте кудись чисте сховище, до якого всі користувачі мають доступ на читання та запис.
Ось і все — більше нічого не треба.</p>
</div>
<div class="paragraph">
<p>У декількох наступних секціях, ви побачите як перейти до більш витончених схем.
Ми розглянемо як не створювати акаунти для кожного користувача, як додати відкритий доступ на читання сховища, налаштування веб інтерфейсу та інше.
Втім, пам’ятайте, що для співпраці з декількома людьми над закритим проектом, усе що <em>треба</em> — це SSH сервер і чисте сховище.</p>
</div>
</div>
<div class="sect3">
<h3 id="_маленькі_проекти">Маленькі проекти</h3>
<div class="paragraph">
<p>Якщо ви маленька контора, або ви просто випробовуєте Git у вашій організації, та маєте тільки кількох програмістів, усе дуже просто.
Один з найскладніших аспектів налаштування серверу Git — керування користувачами.
Якщо ви бажаєте, щоб якісь сховища були доступні на читання деяким користувачам, а на читання та запис іншим, налаштувати доступ та права може бути трохи складніше.</p>
</div>
<div class="sect4">
<h4 id="_ssh_доступ">SSH доступ</h4>
<div class="paragraph">
<p>
Якщо у вас є сервер, до якого всі ваші програмісти вже мають SSH доступ, зазвичай найпростіше встановити ваше перше сховище там, адже вам майже нічого не доведеться робити (як ми побачимо у наступній секцій).
Якщо вам потрібен складніший контроль над доступом та правами до вашого сховища, ви можете з ними впоратися за допомогою звичайних прав доступу до файлів операційної системи вашого серверу.</p>
</div>
<div class="paragraph">
<p>Якщо ви бажаєте розмістити ваші сховища на сервері, до якого не у всіх з вашої команди, у кого має бути доступ на запис, є акаунти, вам треба налаштувати SSH доступ для них.
Ми далі припускаємо, що на вашому сервері SSH сервер вже є встановленим, та ви саме так заходите на сервер.</p>
</div>
<div class="paragraph">
<p>Є декілька способів надати доступ усій вашій команді.
Ви можете просто додати акаунти всім, що є найпростішим варіантом, проте може бути трудомістким варіантом.
Ви можете не захотіти виконувати <code>adduser</code> та встановлювати тимчасові паролі для кожного користувача.</p>
</div>
<div class="paragraph">
<p>Другий метод — це створити єдиного користувача <em>git</em>, попросити кожного користувача, у котрого має бути доступ на запис відправити вам публічний ключ SSH, та додати всі ключі до файлу <code>~/.ssh/authorized_keys</code> вашого нового користувача <em>git</em>.
Після цього, усі будуть мати доступ до машини через користувача <em>git</em>.
Це ніяким чином не впливає на дані коміту — користувач SSH, з якого ви підключаєтесь, не впливає на коміти, що ви записуєте.</p>
</div>
<div class="paragraph">
<p>Інший спосіб — це зробити, щоб SSH сервер авторизувався з LDAP серверу чи іншого централізованого джерела авторизації, що у вас може бути вже встановленим.
Доки кожен користувач має доступ до командного рядка на машині, будь-якої автонтефікації SSH буде достатньо.</p>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>