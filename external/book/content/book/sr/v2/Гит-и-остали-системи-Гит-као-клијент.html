---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: sr
  chapter:
    title: Гит и остали системи
    number: 9
  section:
    title: Гит као клијент
    number: 1
    cs_number: '9.1'
    previous: book/sr/v2/Прилагођавање-програма-Гит-Резиме
    next: book/sr/v2/Гит-и-остали-системи-Мигрирање-на-Гит
title: Git - Гит као клијент
url: "/book/sr/v2/Гит-и-остали-системи-Гит-као-клијент.html"
---
<p>Свет није савршен.
У већини случајева не можете одмах да пребаците сваки пројекат са којим дођете у контакт на Гит.
Некад сте заглављени на пројекту који користи неки други VCS, а волели бисте да је то Гит.
Први део овог поглавља ћемо посветити учењу начина на које можете да користите Гит као клијент када је пројекат на којем радите хостован на другом систему.</p><p>У једном тренутку ћете можда пожелети да конвертујете свој постојећи пројекат у Гит.
Други део овог поглавља покрива начин миграције пројекта на Гит из неколико одређених система, као и метода која ће функционисати ако не постоје већ готови алати за увоз.</p>
<h2 id="_гит_као_клијент">Гит као клијент</h2>
<div class="paragraph">
<p>
Програм Гит је програмерима толико угодан за коришћење да су многи људи открили како да га користе на својој радној станици, чак и ако остатак тима користи потпуно другачији VCS.
Постоји много оваквих адаптера који се називају „мостови”.
Овде ћемо покрити неке на које ћете највероватније наићи.</p>
</div>
<div class="sect3">
<h3 id="_git_svn">Гит и Subversion</h3>
<div class="paragraph">
<p>
Велики део развојних пројеката отвореног кода и порпиличан број корпоративних пројеката користе Subversion да управља њиховим изворним кодом.
Присутан је већ више од десет година и већину тог времена је био <em>де факто</em> VCS избор за пројекте отвореног кода.
У многим стварима је врло сличан са CVS који је пре тога био татамата света контроле изворног кода.</p>
</div>
<div class="paragraph">
<p>
Једна од одличних могућности програма Гит је двосмерни мост према програму Subversion који се зове <code>git svn</code>.
Овај алат вам омогућава да програм Гит користите као важећи клијент Subversion сервера, тако да можете користити све локалне могућности програма Гит и да их затим гурнете на Subversion сервер као да се и локално користили Subversion.
Ово значи да можете радити локално гранање и спајање, користите стејџ, употребљавате ребазирање и избор <em>(cherry-picking)</em> и тако даље, док ваши сарадници настављају да раде на своје мрачне прастаре начине.
То је добар начин да провучете програм Гит у корпоративно окружење и помогнете да ваше колеге програмери постану ефикаснији док ви лобирате да се инфраструктура промени тако да у потпуности подржава програм Гит.
Subversion мост је уводна дрога у DVCS свет.</p>
</div>
<div class="sect4">
<h4 id="_git_svn_2"><code>git svn</code></h4>
<div class="paragraph">
<p>Основна команда у програму Гит за све команде премошћавања до Subversion је <code>git svn</code>.
Постоји поприличан број команди, тако да ћемо приказати најчешће док пролазимо кроз неколико једноставних процеса рада.</p>
</div>
<div class="paragraph">
<p>Важно је приметити да када користите <code>git svn</code>, ви имате интеракцију са програмом Subversion, а то је систем који функционише веома различито у односу на програм Гит.
Мада <strong>можете</strong> да радите локално гранање и спајање, у општем случају је најбоље да историју држите што је могуће више линеарном тако што ребазирате свој рад и избегавате да радите ствари као што је истовремена интеракција са удаљеним Гит репозиторијумом.</p>
</div>
<div class="paragraph">
<p>Немојте поново да исписујете своју историју и покушате поново да је гурнете и немојте да истовремено гурате на паралелни Гит репозиторијум како би сарађивали са колегама који за развој користе Гит.
Subversion може да има са једну линеарну историју, и врло је једноставно да га збуните.
Ако радите у тиму где неко користи SVN, а остали користе Гит, обезбедите да сви за сарадњу користе SVN сервер – на тај начин ће вам живот бити једноставнији.</p>
</div>
</div>
<div class="sect4">
<h4 id="_подешавање">Подешавање</h4>
<div class="paragraph">
<p>Да бисте пробали ову функционалност, потребан вам је типичан SVN репозиторијум на који има те право уписа.
Ако желите да копирате ове примере, мораћете да направите копију мог тест репозиторијума по којој можете да пишете.
То једноставно можете урадити алатом који се зове <code>svnsync</code> и долази уз програм Subversion.
Као подршку овим тестовима, направили смо нови Subversion репозиторијум на Google Code који је представљао делимичну копију пројекта <code>protobuf</code>, алата који кодира структуре података тако да могу да се преносе кроз мрежу.</p>
</div>
<div class="paragraph">
<p>Да бисте успешно пратили, најпре морате да креирате нови локални Subversion репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ mkdir /tmp/test-svn
$ svnadmin create /tmp/test-svn</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затим омогућите свим корисницима право да мењају <em>revprops</em> – то се на једноставан начин ради тако да додате скрипту <code>pre-revprop-change</code> која увек враћа повратну вредност 0:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /tmp/test-svn/hooks/pre-revprop-change
#!/bin/sh
exit 0;
$ chmod +x /tmp/test-svn/hooks/pre-revprop-change</code></pre>
</div>
</div>
<div class="paragraph">
<p>Овај пројекат сада можете да синхронизујете на своју локалну машину тако што позовете <code>svnsync init</code> са ’из’ и ’у’ репозиторијумима.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ svnsync init file:///tmp/test-svn \
  http://progit-example.googlecode.com/svn/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово поставља особине за позив синхронизације.
Затим клонирате кôд извршавајући:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ svnsync sync file:///tmp/test-svn
Committed revision 1.
Copied properties for revision 1.
Transmitting file data .............................[...]
Committed revision 2.
Copied properties for revision 2.
[…]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Мада ова операција може да потраје само неколико минута, ако уместо на локални оригинални репозиторијум покушате да копирате на други удаљени репозиторијум, процес ће трајати скоро сат времена, мада постоји мање од 100 комитова.
Subversion мора да клонира ревизије једну по једну, па да их затим гурне на други репозиторијум – потпуно неефикасно, али је то једини начин да се ово уради.</p>
</div>
</div>
<div class="sect4">
<h4 id="_први_кораци">Први кораци</h4>
<div class="paragraph">
<p>Сада када имате Subversion репозиторијум у који можете да уписујете, можете да прођете кроз типичан процес рада.
Почећете да командом <code>git svn clone</code> која увози комплетан Subversion репозиторијум у локални Гит репозиторијум.
Упамтите да ако увозите из реалног хостованог Subversion репозиторијума, фајл <code>file:///tmp/test-svn</code> приказан овде треба да замените са URL адресом вашег Subversion репозиторијума:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn clone file:///tmp/test-svn -T trunk -b branches -t tags
Initialized empty Git repository in /private/tmp/progit/test-svn/.git/
r1 = dcbfb5891860124cc2e8cc616cded42624897125 (refs/remotes/origin/trunk)
    A	m4/acx_pthread.m4
    A	m4/stl_hash.m4
    A	java/src/test/java/com/google/protobuf/UnknownFieldSetTest.java
    A	java/src/test/java/com/google/protobuf/WireFormatTest.java
…
r75 = 556a3e1e7ad1fde0a32823fc7e4d046bcfd86dae (refs/remotes/origin/trunk)
Found possible branch point: file:///tmp/test-svn/trunk =&gt; file:///tmp/test-svn/branches/my-calc-branch, 75
Found branch parent: (refs/remotes/origin/my-calc-branch) 556a3e1e7ad1fde0a32823fc7e4d046bcfd86dae
Following parent with do_switch
Successfully followed parent
r76 = 0fb585761df569eaecd8146c71e58d70147460a2 (refs/remotes/origin/my-calc-branch)
Checked out HEAD:
  file:///tmp/test-svn/trunk r75</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово извршава еквивалент две команде – <code>git svn init</code> након које следи <code>git svn fetch</code> – над URL адресом коју наведете.
Може да потраје.
Тест пројекат има само око 75 комитова и база кода није толико велика, али програм Гит мора да одјави сваку верзију, једну по једну, па да је засебно комитује.
За пројекат са стотинама или хиљадама комитова, ово буквално може да потраје сатима или чак данима док се не заврши.</p>
</div>
<div class="paragraph">
<p><code>-T trunk -b branches -t tags</code> део говори програму Гит да овај Subversion репозиторијум прати основне конвенције гранања и означавања.
Ако свом стаблу, гранама или ознакама желите да дате другачија имена, промените ове опције.
Пошто је ово толико уобичајено, комплетан део можете да замените са <code>-s</code>, што значи стандардни распоред и подразумева све те опције.
Следећа команда је еквивалентна:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn clone file:///tmp/test-svn -s</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом тренутку би требало да имате исправан Гит репозиторијум које увезао ваше гране и ознаке:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -a
* master
  remotes/origin/my-calc-branch
  remotes/origin/tags/2.0.2
  remotes/origin/tags/release-2.0.1
  remotes/origin/tags/release-2.0.2
  remotes/origin/tags/release-2.0.2rc1
  remotes/origin/trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите како овај алат управља Subversion ознакама као удаљеним референцама.

Хајде да детаљније погледамо водоводном командом програма Гит <code>show-ref</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git show-ref
556a3e1e7ad1fde0a32823fc7e4d046bcfd86dae refs/heads/master
0fb585761df569eaecd8146c71e58d70147460a2 refs/remotes/origin/my-calc-branch
bfd2d79303166789fc73af4046651a4b35c12f0b refs/remotes/origin/tags/2.0.2
285c2b2e36e467dd4d91c8e3c0c0e1750b3fe8ca refs/remotes/origin/tags/release-2.0.1
cbda99cb45d9abcb9793db1d4f70ae562a969f1e refs/remotes/origin/tags/release-2.0.2
a9f074aa89e826d6f9d30808ce5ae3ffe711feda refs/remotes/origin/tags/release-2.0.2rc1
556a3e1e7ad1fde0a32823fc7e4d046bcfd86dae refs/remotes/origin/trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Програм Гит ово не ради када клонира са Гит сервера; ево како изгледа репозиторијум након свежег клонирања:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git show-ref
c3dcbe8488c6240392e8a5d7553bbffcb0f94ef0 refs/remotes/origin/master
32ef1d1c7cc8c603ab78416262cc421b80a8c2df refs/remotes/origin/branch-1
75f703a3580a9b81ead89fe1138e6da858c5ba18 refs/remotes/origin/branch-2
23f8588dde934e8f33c263c6d8359b2ae095f863 refs/tags/v0.1.0
7064938bd5e7ef47bfd79a685a62c1e2649e2ce7 refs/tags/v0.2.0
6dcb09b5b57875f334f61aebed695e2e4193db5e refs/tags/v1.0.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Програм Гит преузима ознаке директно у <code>refs/tags</code>, уместо да их третира као удаљене гране.</p>
</div>
</div>
<div class="sect4">
<h4 id="_комитовање_назад_на_subversion">Комитовање назад на Subversion</h4>
<div class="paragraph">
<p>Сада када имате функционалан репозиторијум, можете да урадите неки посао на пројекту и гурнете своје комитове узводно, тако што програм Гит ефективно користите као SVN клијент.
Ако уредите један од фајлова и комитујете га, имаћете комит који постоји локално у програму Гит и не постоји на Subversion серверу:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit -am 'Adding git-svn instructions to the README'
[master 4af61fd] Adding git-svn instructions to the README
 1 file changed, 5 insertions(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Затим, своју измену морате да гурнете узводно.
Приметите како ово мења начин на који радите са програмом Subversion – можете да урадите неколико комитова док ста ван мреже, па да их све одједном гурнете на Subversion сервер.
Када желите да гурнете на Subversion сервер, извршите команду <code>git svn dcommit</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
    M	README.txt
Committed r77
    M	README.txt
r77 = 95e0222ba6399739834380eb10afcd73e0670bc5 (refs/remotes/origin/trunk)
No changes between 4af61fd05045e07598c553167e0f31c84fd6ffe1 and refs/remotes/origin/trunk
Resetting to the latest refs/remotes/origin/trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово узима све комитове које сте направили преко кода са Subversion сервера, за сваки од њих врши Subversion комит, па онда поново исписује ваш локални Гит комит тако да укључи јединствени идентификатор.
То је важно јер значи да се све SHA-1 контролне суме ваших комитова мењају.
Делимично због овог разлога, истовремени рад са удаљеним Гит верзијама вашег пројекта и Subversion сервером није добра идеја.
Ако погледате последњи комит, можете видети уметнути нови <code>git-svn-id</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log -1
commit 95e0222ba6399739834380eb10afcd73e0670bc5
Author: ben &lt;ben@0b684db3-b064-4277-89d1-21af03df0a68&gt;
Date:   Thu Jul 24 03:08:36 2014 +0000

    Adding git-svn instructions to the README

    git-svn-id: file:///tmp/test-svn/trunk@77 0b684db3-b064-4277-89d1-21af03df0a68</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите да је SHA-1 контролна сума када сте раније комитовали почињала са <code>4af61fd</code>, а да сада почиње са <code>95e0222</code>.
Ако желите да гурнете и на Гит и на Subversion сервер, прво морате да гурнете (<code>dcommit</code>) на Subversion сервер, јер та акција мења ваше комит податке.</p>
</div>
</div>
<div class="sect4">
<h4 id="_повлачење_нових_измена">Повлачење нових измена</h4>
<div class="paragraph">
<p>Ако радите са другим програмерима, онда ће у неком тренутку један од вас гурнути, па ће онда неко други покушати да гурне измену која изазива конфликт.
Та измена ће бити одбијена док не спојите њихов рад.
У <code>git svn</code> то изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...

ERROR from SVN:
Transaction is out of date: File '/trunk/README.txt' is out of date
W: d5837c4b461b7c0e018b49d12398769d2bfc240a and refs/remotes/origin/trunk differ, using rebase:
:100644 100644 f414c433af0fd6734428cf9d2a9fd8ba00ada145 c80b6127dd04f5fcda218730ddf3a2da4eb39138 M	README.txt
Current branch master is up to date.
ERROR: Not all changes have been committed into SVN, however the committed
ones (if any) seem to be successfully integrated into the working tree.
Please see the above messages for details.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да бисте разрешили ову ситуацију, можете да извршите <code>git svn rebase</code>, која повлачи евентуалне измене на серверу које још увек немате и ребазира ваш рад (ако га има) на врх онога што се налази на серверу:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn rebase
Committing to file:///tmp/test-svn/trunk ...

ERROR from SVN:
Transaction is out of date: File '/trunk/README.txt' is out of date
W: eaa029d99f87c5c822c5c29039d19111ff32ef46 and refs/remotes/origin/trunk differ, using rebase:
:100644 100644 65536c6e30d263495c17d781962cfff12422693a b34372b25ccf4945fe5658fa381b075045e7702a M	README.txt
First, rewinding head to replay your work on top of it...
Applying: update foo
Using index info to reconstruct a base tree...
M	README.txt
Falling back to patching base and 3-way merge...
Auto-merging README.txt
ERROR: Not all changes have been committed into SVN, however the committed
ones (if any) seem to be successfully integrated into the working tree.
Please see the above messages for details.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада је сав ваш рад преко онога што се налази на Subversion серверу, тако да можете успешно извршити <code>dcommit</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
    M	README.txt
Committed r85
    M	README.txt
r85 = 9c29704cc0bbbed7bd58160cfb66cb9191835cd8 (refs/remotes/origin/trunk)
No changes between 5762f56732a958d6cfda681b661d2a239cc53ef5 and refs/remotes/origin/trunk
Resetting to the latest refs/remotes/origin/trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите да за разлику од програма Гит, који од вас захтева да пре него што гурнете спојите сав узводни рад који још увек немате локално, <code>git svn</code> од вас то тражи само ако измене изазивају конфликт (слично као што ради и Subversion).
Ако неко други гурне измену једног фајла, панда ви гурнете измену неког другог фајла, ваша <code>dcommit</code> ће функционисати без проблема:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
    M	configure.ac
Committed r87
    M	autogen.sh
r86 = d8450bab8a77228a644b7dc0e95977ffc61adff7 (refs/remotes/origin/trunk)
    M	configure.ac
r87 = f3653ea40cb4e26b6281cec102e35dcba1fe17c4 (refs/remotes/origin/trunk)
W: a0253d06732169107aa020390d9fefd2b1d92806 and refs/remotes/origin/trunk differ, using rebase:
:100755 100755 efa5a59965fbbb5b2b0a12890f1b351bb5493c18 e757b59a9439312d80d5d43bb65d4a7d0389ed6d M	autogen.sh
First, rewinding head to replay your work on top of it...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је важно да се запамти, је крајњи исход стање пројекта које није постојало ни на једном од ваших компјутера када сте гурнули.
Ако измене нису компатибилне али не изазивају конфликт, можете имати проблеме који се тешко откривају.
То је разлика у односу на употребу Гит сервера – у програму Гит Git стање можете потпуно тестирати на свом клијентском систему пре него што га објавите, док у SVN, никада не можете бити сигурни да су стања непосредно пре и након комита идентична.</p>
</div>
<div class="paragraph">
<p>Ову команду би такође требало да извршите за повлачење измена са Subversion сервера, чак и ако сами нисте спремни да комитујете.
Можете извршити <code>git svn fetch</code> да само преузмете нове податке, али <code>git svn rebase</code> преузима па ажурира ваше локалне комитове.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn rebase
    M	autogen.sh
r88 = c9c5f83c64bd755368784b444bc7a0216cc1e17b (refs/remotes/origin/trunk)
First, rewinding head to replay your work on top of it...
Fast-forwarded master to refs/remotes/origin/trunk.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Повремено извршавање <code>git svn rebase</code> обезбеђује да је ваш кôд увек у свежем стању.
Ипак, да бисте ово извршили, морате бити сигурни да је ваш радни директоријум чист.
Ако имате локалне измене, морате прво или да сакријете свој рад, или да га привремено комитујете пре покретања <code>git svn rebase</code> – у супротном ће команда прекинути извршавање ако види да ће резултат ребазирања изазвати конфликт при спајању.</p>
</div>
</div>
<div class="sect4">
<h4 id="_проблеми_са_гит_гранањем">Проблеми са Гит гранањем</h4>
<div class="paragraph">
<p>Када вам Гит процес рада постане удобан, вероватно ћете почети да креирате тематске гране, радите на њима, па их спајате у главну.
Ако гурате на Subversion сервер командом <code>git svn</code>, уместо да гране спајате могли бисте да свој рад ребазирате на једну грану.
Ребазирање је пожељније од спајања јер Subversion има линеарну историју и не носи се са спајањима као што то ради програм Гит, тако да <code>git svn</code> следи само првог родитеља када конвертује снимке у Subversion комитове.</p>
</div>
<div class="paragraph">
<p>Претпоставимо да вам историја изгледа на следећи начин: креирали сте <code>experiment</code> грану, направили два комита, па их онда спојили назад у <code>master</code>.
Када извршите <code>dcommit</code>, добијате следећи излаз:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn dcommit
Committing to file:///tmp/test-svn/trunk ...
    M	CHANGES.txt
Committed r89
    M	CHANGES.txt
r89 = 89d492c884ea7c834353563d5d913c6adf933981 (refs/remotes/origin/trunk)
    M	COPYING.txt
    M	INSTALL.txt
Committed r90
    M	INSTALL.txt
    M	COPYING.txt
r90 = cb522197870e61467473391799148f6721bcf9a0 (refs/remotes/origin/trunk)
No changes between 71af502c214ba13123992338569f4669877f55fd and refs/remotes/origin/trunk
Resetting to the latest refs/remotes/origin/trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Извршавање <code>dcommit</code> на грани са спојеном историјом ради како треба, није поново исписала ниједан од комитова које сте направили на <code>experiment</code> грани – уместо тога, све те измене се појављују у SVN верзији једног јединог комита спајања.</p>
</div>
<div class="paragraph">
<p>Када неко други клонира тај рад, све што види је комит спајања са комплетним радом сабијеним у њега, као да сте извршили <code>git merge --squash</code>; не види податке о томе одакле је комит дошао или када је направљен.</p>
</div>
</div>
<div class="sect4">
<h4 id="_subversion_гранање">Subversion гранање</h4>
<div class="paragraph">
<p>Гранање у програму Subversion није исто као гранање у програму Гит; вероватно је најбоље ако можете избећи да га често користите.
Ипак, са <code>git svn</code> можете да креирате и комитујете Subversion гране.</p>
</div>
</div>
<div class="sect4">
<h4 id="_креирање_нове_svn_гране">Креирање нове SVN гране</h4>
<div class="paragraph">
<p>Ако желите да креирате нову Subversion грану, извршите <code>git svn branch [имегране]</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn branch opera
Copying file:///tmp/test-svn/trunk at r90 to file:///tmp/test-svn/branches/opera...
Found possible branch point: file:///tmp/test-svn/trunk =&gt; file:///tmp/test-svn/branches/opera, 90
Found branch parent: (refs/remotes/origin/opera) cb522197870e61467473391799148f6721bcf9a0
Following parent with do_switch
Successfully followed parent
r91 = f1b64a3855d3c8dd84ee0ef10fa89d27f1584302 (refs/remotes/origin/opera)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је еквивалентно Subversion команди <code>svn copy trunk branches/opera</code> и оперише на Subversion серверу.
Важно је приметити да она вас она не одјављује у ту грану; ако у овом тренутку комитујете, так комит иде у <code>trunk</code> на серверу, а не у <code>opera</code>.</p>
</div>
</div>
<div class="sect4">
<h4 id="_пребацивање_активних_грана">Пребацивање активних грана</h4>
<div class="paragraph">
<p>Програм Git открива на коју грану иду ваши <code>dcommit</code> тако што гледа на врх било које  Subversion гране у вашој историји – требало би да имате само једну, а то би у исорији тренутне гране требало да буде последња са <code>git-svn-id</code>.</p>
</div>
<div class="paragraph">
<p>Ако желите истовремено да радите на више од једне гране, команди <code>dcommit</code> можете да подесите локалне гране на одређене Subversion грана започињући их као увезени Subversion комит за ту грану.
Ако желите грану <code>opera</code> на којој можете одвојено да радите, извршите:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch opera remotes/origin/opera</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако сада желите да своју <code>opera</code> грану спојите у <code>trunk</code> (односно вашу <code>master</code> грану), то можете урадити обичном <code>git merge</code> командом.
Али морате навести описну комит поруку (са <code>-m</code>), или ће спајање уместо нечег корисниг да буде „Merge branch opera”.</p>
</div>
<div class="paragraph">
<p>Упамтите да мада за ову операцију користите <code>git merge</code> и спајање ће вероватно бити доста једноставније него што би било у програму Subversion (јер ће програм Гит аутоматски за вас да открије погодну базу за спајање), ово није уобичајен Гит комит спајања.
Ове податке морате да гурнете назад Subversion серверу који не може да обради комит који прати више од једног родитеља; дакле, након што га гурнете узводно, изгледаће као један једини комит који је сабио сав рад на другој грани у један комит.
Када једну грану спојите у другу, можете једноставно да се вратите назад и наставите да радите на тој грани, као и иначе што бисте у програму Гит.
Команда <code>dcommit</code> коју извршавате брише било какве информације које кажу која грана је спојена, тако да ће накнадна израчунавања базе спајања вити погрешна – <code>dcommit</code> чини да резултат ваше <code>git merge</code> команде изгледа као да се извршили <code>git merge --squash</code>.
Нажалост, не постоји добар начин да се избегне оваква ситуација – Subversion не може да забележи ову информацију, тако да ће вас увек спутавати његова ограничења док год га користите као свој сервер.
Да бисте спречили проблеме, када је спојите у <code>trunk</code> требало би да обришете локалну грану (у овом случају, <code>opera</code>).</p>
</div>
</div>
<div class="sect4">
<h4 id="_subversion_команде">Subversion команде</h4>
<div class="paragraph">
<p><code>git svn</code> скуп алата обезбеђује већи број команди које помажу да се олакша прелаз на Гит нудећи неку функционалност која је слична оној коју имате у програму Subversion.
Ево неколико команди које вам пружају оно што је Subversion.</p>
</div>
<div class="sect5">
<h6 id="_историја_у_svn_стилу">Историја у SVN стилу</h6>
<div class="paragraph">
<p>Ако сте навикли на Subversion и своју историју желите да видите као излаз у SVN стилу, you можете да извршите <code>git svn log</code> која вам приказује SVN форматирану комит историју:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn log
------------------------------------------------------------------------
r87 | schacon | 2014-05-02 16:07:37 -0700 (Sat, 02 May 2014) | 2 lines

autogen change

------------------------------------------------------------------------
r86 | schacon | 2014-05-02 16:00:21 -0700 (Sat, 02 May 2014) | 2 lines

Merge branch 'experiment'

------------------------------------------------------------------------
r85 | schacon | 2014-05-02 16:00:09 -0700 (Sat, 02 May 2014) | 2 lines

updated the changelog</code></pre>
</div>
</div>
<div class="paragraph">
<p>Требало би да знате две важне ствари у вези команде <code>git svn log</code>.
Прво, она за разлику од праве <code>svn log</code> команде која тражи податке од Subversion сервера тражи податке, ради ван мреже.
Друго, она вам приказује само оне комитове који су комитовани на Subversion сервер.
Локални Фит комитови над којима још нисте извршили <code>dcommit</code> се не појављују; као ни комитови које су у међувремену остали доставили на Subversion сервер.
Она пре приказује последње познато стање комитова на Subversion серверу.</p>
</div>
</div>
<div class="sect5">
<h6 id="_svn_означавање">SVN означавање</h6>
<div class="paragraph">
<p>На сличан начин на који <code>git svn log</code> команда симулира <code>svn log</code> команду ван мреже, еквивалент команде <code>svn annotate</code> можете добити извршавањем <code>git svn blame [ФАЈЛ]</code>.
Излаз изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn blame README.txt
 2   temporal Protocol Buffers - Google's data interchange format
 2   temporal Copyright 2008 Google Inc.
 2   temporal http://code.google.com/apis/protocolbuffers/
 2   temporal
22   temporal C++ Installation - Unix
22   temporal =======================
 2   temporal
79    schacon Committing in git-svn.
78    schacon
 2   temporal To build and install the C++ Protocol Buffer runtime and the Protocol
 2   temporal Buffer compiler (protoc) execute the following:
 2   temporal</code></pre>
</div>
</div>
<div class="paragraph">
<p>Опет, она не приказује комитове које сте локално направили у програму Гит, или оне који су у међувремену гурнути на Subversion сервер.</p>
</div>
</div>
<div class="sect5">
<h6 id="_информације_о_svn_серверу">Информације о SVN серверу</h6>
<div class="paragraph">
<p>Исту врсту информација које вам пружа <code>svn info</code> можете добити ако извршите <code>git svn info</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn info
Path: .
URL: https://schacon-test.googlecode.com/svn/trunk
Repository Root: https://schacon-test.googlecode.com/svn
Repository UUID: 4c93b258-373f-11de-be05-5f7a86268029
Revision: 87
Node Kind: directory
Schedule: normal
Last Changed Author: schacon
Last Changed Rev: 87
Last Changed Date: 2009-05-02 16:07:37 -0700 (Sat, 02 May 2009)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је слично са <code>blame</code> и <code>log</code> у томе што се извршава ван мреже и што је ажурно само до последњег тренутка када сте имали комуникацију са Subversion сервером.</p>
</div>
</div>
<div class="sect5">
<h6 id="_игнорисање_онога_што_игнорише_subversion">Игнорисање онога што игнорише Subversion</h6>
<div class="paragraph">
<p>Ако клонирате Subversion репозиторијум који негде има постављене <code>svn:ignore</code> особине, вероватно ћете хтети да поставите одговарајуће <code>.gitignore</code> фајлове тако да случајно не комитујете фајлове које не би требало.
<code>git svn</code> има две команде које вам помажу у томе.
Прва је <code>git svn create-ignore</code>, која уместо вас аутоматски креира одговарајуће <code>.gitignore</code> фајлове тако да ваш наредни комит не може да их укључи.</p>
</div>
<div class="paragraph">
<p>Друга команда је <code>git svn show-ignore</code>, која на <em>stdout</em> исписује линије које треба поставите у <code>.gitignore</code> фајл, тако њен излаз можете да преусмерите у фајл изузетака пројекта:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn show-ignore &gt; .git/info/exclude</code></pre>
</div>
</div>
<div class="paragraph">
<p>На тај начин не затрпавате пројекат <code>.gitignore</code> фајловима.
Ово је добра опција у случају да сте једини Гит корисник у Subversion тиму и ваше колеге из тима не желе <code>.gitignore</code> фајлове у пројекту.</p>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_git_svn_резиме">Git-Svn резиме</h4>
<div class="paragraph">
<p><code>git svn</code> алату су корисни ако сте заглављени на Subversion серверу, или у неком развојном окружењу у којем је неопходно покретање Subversion сервера.
Ипак, требало би да га сматрате ограниченим програмом Гит, или ћете наићи на проблеме у превођењу коју могу да збуне и вас и ваше сараднике.
Покушајте се држати следећих смерница како не бисте упали у невоље:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Одржавајте линеарну Гит историју која не садржи <code>git merge</code> комитове спајања.
Ребазирајте сав рад који радите ван главне гране назад на њу; не спајајте у главну грану.</p>
</li>
<li>
<p>Не постављате и не сарађујте на одвојеном Гит серверу.
По могућству имајте један који убрзава клонирања за нове програмере, али не гурајте на њега ништа што нема <code>git-svn-id</code> ставку.
Чак можете да додате и <code>pre-receive</code> куку која проверава сваку комит поруку на постојање <code>git-svn-id</code> и одбија гурања које садрже комит поруке без ње.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Ако следите ове препоруке, рад са Subversion сервером може постати подношљив.
Међутим, ако постоји могућност, пређите на прави Гит сервер, на тај начин ћете и ви и тим добити још много више.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_гит_и_меркуријал">Гит и Меркуријал</h3>
<div class="paragraph">
<p>

DVCS свет није само Гит.
Уствари, постоји много других система од којих сваки има свој угао посматрања на то како се исправно врши дистрибуирана контрола верзија.
Осим програма Гит, најпопуларнији је Меркуријал и они су слични у многим аспектима.</p>
</div>
<div class="paragraph">
<p>Добра вест је, ако вам се свиђа понашање програма Гит на клијентској страни, али радите на пројекту чији изворни кôд контролише репозиторијум који хостује Меркуријал, постоји начин да програм Гит користите као клијент Меркуријал репозиторијума.
Пошто је начин на који програм Гит разговара са серверским репозиторијумима помоћу удаљених референци, не би требало да буде изненађење што је овај мост имплементиран као удаљени помоћник.
Име пројекта је <em>git-remote-hg,</em> и може да се пронађе на адреси <a href="https://github.com/felipec/git-remote-hg" class="bare">https://github.com/felipec/git-remote-hg</a>.</p>
</div>
<div class="sect4">
<h4 id="_git_remote_hg">git-remote-hg</h4>
<div class="paragraph">
<p>Најпре је потребно да инсталирате <em>git-remote-hg</em>.
То практично значи да поставите његов фајл негде на путању, отприлике овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ curl -o ~/bin/git-remote-hg \
  https://raw.githubusercontent.com/felipec/git-remote-hg/master/git-remote-hg
$ chmod +x ~/bin/git-remote-hg</code></pre>
</div>
</div>
<div class="paragraph">
<p>…уз претпоставку да се <code>~/bin</code> налази у вредности ваше <code>$PATH</code> променљиве.
<em>Git-remote-hg</em> има још једну зависност: <code>mercurial</code> библиотеку за Пајтон.
Ако имате инсталиран језик Пајтон, то је просто као пасуљ:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ pip install mercurial</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако још увек немате инсталиран Пајтон, најпре посетите <a href="https://www.python.org/" class="bare">https://www.python.org/</a> и набавите га.</p>
</div>
<div class="paragraph">
<p>Последња ствар која вам је потребна је Меркуријал клијент.
Посетите <a href="https://www.mercurial-scm.org/" class="bare">https://www.mercurial-scm.org/</a> и инсталирајте га, ако то већ нисте учинили.</p>
</div>
<div class="paragraph">
<p>Сада можете да пређете на ствар.
Потребан вам је само Меркуријал репозиторијум на који можете да гурате.
На срећу, сваки Меркуријал репозиторијум може да се понаша на овај начин, тако да ћемо једноставно употребити „hello world” репозиторијум који користи свако да научи Меркуријал:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg clone http://selenic.com/repo/hello /tmp/hello</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_први_кораци_2">Први кораци</h4>
<div class="paragraph">
<p>Сада када имамо погодан „серверски” репозиторијум, можемо да прођемо кроз типични процес рада.
Као што можете да видите, ова два система су довољно слична тако да нема много трења.</p>
</div>
<div class="paragraph">
<p>Најпре клонирамо, као што је увек и обичај у програму Гит:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone hg::/tmp/hello /tmp/hello-git
$ cd /tmp/hello-git
$ git log --oneline --graph --decorate
* ac7955c (HEAD, origin/master, origin/branches/default, origin/HEAD, refs/hg/origin/branches/default, refs/hg/origin/bookmarks/master, master) Create a makefile
* 65bb417 Create a standard 'hello, world' program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметићете да рад са Меркуријал репозиторијумом користи стандардну <code>git clone</code> команду.
То је зато јер <em>git-remote-hg</em> функционише на прилично ниском нивоу, користећи сличне механизме којима је имплементиран HTTP/S протокол у програму Гит (удаљени помоћници).
Пошто су и Гит и Меркуријал дизајнирани тако да сваки клијент има комплетну копију историје репозиторијума, ова команда креира потпуни клон, укључујући комплетну историју пројекта, а то обавља прилично брзо.</p>
</div>
<div class="paragraph">
<p>Log команда приказује два комита, од којих на последњи показује читава шума референци.
Испоставља се да неке од њих заиста и нису ту.
Хајде да погледамо шта се заиста налази у <code>.git</code> директоријуму:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ tree .git/refs
.git/refs
├── heads
│   └── master
├── hg
│   └── origin
│       ├── bookmarks
│       │   └── master
│       └── branches
│           └── default
├── notes
│   └── hg
├── remotes
│   └── origin
│       └── HEAD
└── tags

9 directories, 5 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git-remote-hg покушава да ствари буду што природније у Гит стилу, али под хаубом он управља концептуалним мапирањем између два незнатно различита система.
Директоријум <code>refs/hg</code> је место где се чувају стварне референце.
На пример, <code>refs/hg/origin/branches/default</code> је фајл Гит референце који садржи SHA-1 што почиње на „ac7955c” и то је комит на који показује <code>master</code>.
Тако да је директоријум <code>refs/hg</code> нека врста лажног <code>refs/remotes/origin</code>, али уз додато прављење разлике између маркера и грана.</p>
</div>
<div class="paragraph">
<p>Фајл <code>notes/hg</code> је почетна тачка из које <em>git-remote-hg</em> мапира Гит комит хешеве у Меркуријал идентификаторе скупа измена.
Хајде да истражимо мало:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat notes/hg
d4c10386...

$ git cat-file -p d4c10386...
tree 1781c96...
author remote-hg &lt;&gt; 1408066400 -0800
committer remote-hg &lt;&gt; 1408066400 -0800

Notes for master
-
$ git ls-tree 1781c96...
100644 blob ac9117f...	65bb417...
100644 blob 485e178...	ac7955c...

$ git cat-file -p ac9117f
0a04b987be5ae354b710cefeba0e2d9de7ad41a9</code></pre>
</div>
</div>
<div class="paragraph">
<p>Дакле, <code>refs/notes/hg</code> показује на стабло које у Гит бази података објеката представља листу осталих објеката са именима.
<code>git ls-tree</code> исписује режим, тип, хеш објекта и име фајла за ставке унутар стабла.
Када дођемо да једне од ставке стабла, видимо да се у њој налази блоб под именом „ac9117f” (SHA-1 хеш комита на који показује <code>master</code>), и садржајем „0a04b98” (ID Меркуријал скупа измена на врху <code>default</code> гране).</p>
</div>
<div class="paragraph">
<p>Добра вест је да углавном уопште нема потребе да бринемо о свему овоме.
Типичан процес рада се неће много разликовати од рада са Гит удаљеним репозиторијумом.</p>
</div>
<div class="paragraph">
<p>Постоји још једна ствар коју би требало да обрадимо пре него што наставимо: игнорисања.
Меркуријал и Гит за то користе врло сличан механизам, али вероватно не желите да заиста комитујете <code>.gitignore</code> фајл у Меркуријал репозиторијум.
На сву срећу, програм Гит има начин да игнорише фајлове који су локални репозиторијуми на диску, а Меркуријал формат је компатибилан са Гит форматом, тако да једноставно можете да га прекопирате:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cp .hgignore .git/info/exclude</code></pre>
</div>
</div>
<div class="paragraph">
<p>Фајл <code>.git/info/exclude</code> се понаша као <code>.gitignore</code>, али није део комитова.</p>
</div>
</div>
<div class="sect4">
<h4 id="_процес_рада_2">Процес рада</h4>
<div class="paragraph">
<p>Хајде да претпоставимо да смо урадили неки посао и направили неколико комитова на <code>master</code> грану, па сте сада спремни да их гурнете на удаљени репозиторијум.
Ево како наш репозиторијум сада изгледа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --oneline --graph --decorate
* ba04a2a (HEAD, master) Update makefile
* d25d16f Goodbye
* ac7955c (origin/master, origin/branches/default, origin/HEAD, refs/hg/origin/branches/default, refs/hg/origin/bookmarks/master) Create a makefile
* 65bb417 Create a standard 'hello, world' program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наша <code>master</code> грана се налази два комита испред <code>origin/master</code>, али та два комита постоје само на нашој локалној машини.
Хајде да видимо да ли је још неко у исто време радио важан посао:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch
From hg::/tmp/hello
   ac7955c..df85e87  master     -&gt; origin/master
   ac7955c..df85e87  branches/default -&gt; origin/branches/default
$ git log --oneline --graph --decorate --all
* 7b07969 (refs/notes/hg) Notes for default
* d4c1038 Notes for master
* df85e87 (origin/master, origin/branches/default, origin/HEAD, refs/hg/origin/branches/default, refs/hg/origin/bookmarks/master) Add some documentation
| * ba04a2a (HEAD, master) Update makefile
| * d25d16f Goodbye
|/
* ac7955c Create a makefile
* 65bb417 Create a standard 'hello, world' program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Пошто смо употребили заставицу <code>--all</code>, видимо „notes” референце које <em>git-remote-hg</em> интерно користи, али их можемо занемарити.
Остатак је оно што смо и очекивали; <code>origin/master</code> је напредовала за један комит, па се наша историја сада раздвојила.
За разлику од осталих система са којима радимо у овом поглављу, Меркуријал је способан да обради спајања, тако да нема потребе да радимо било шта спектакуларно.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge origin/master
Auto-merging hello.c
Merge made by the 'recursive' strategy.
 hello.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
$ git log --oneline --graph --decorate
*   0c64627 (HEAD, master) Merge remote-tracking branch 'origin/master'
|\
| * df85e87 (origin/master, origin/branches/default, origin/HEAD, refs/hg/origin/branches/default, refs/hg/origin/bookmarks/master) Add some documentation
* | ba04a2a Update makefile
* | d25d16f Goodbye
|/
* ac7955c Create a makefile
* 65bb417 Create a standard 'hello, world' program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Савршено.
Покрећемо тестове и све пролази како треба, тако да смо спремни да свој рад поделимо са остатком тима:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push
To hg::/tmp/hello
   df85e87..0c64627  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>И то је то!
Ако погледате Меркуријал репозиторијум видећете да је ова команда урадила оно што смо и очекивали:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg log -G --style compact
o    5[tip]:4,2   dc8fa4f932b8   2014-08-14 19:33 -0700   ben
|\     Merge remote-tracking branch 'origin/master'
| |
| o  4   64f27bcefc35   2014-08-14 19:27 -0700   ben
| |    Update makefile
| |
| o  3:1   4256fc29598f   2014-08-14 19:27 -0700   ben
| |    Goodbye
| |
@ |  2   7db0b4848b3c   2014-08-14 19:30 -0700   ben
|/     Add some documentation
|
o  1   82e55d328c8c   2005-08-26 01:21 -0700   mpm
|    Create a makefile
|
o  0   0a04b987be5a   2005-08-26 01:20 -0700   mpm
     Create a standard 'hello, world' program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Скуп измена под бројем <em>2</em> је направио Меркуријал, а скупове измена <em>3</em> и <em>4</em> <em>git-remote-hg,</em> гурањем комитова који су креирани програмом Гит.</p>
</div>
</div>
<div class="sect4">
<h4 id="_гране_и_маркери">Гране и маркери</h4>
<div class="paragraph">
<p>Програм Git има само једну врсту грана: референцу која се помера када се направе комитови.
У програму Меркуријал се ова врста референце назива „маркер” <em>(bookmark)</em> и понаша се скоро исто као и грана у програму Гит.</p>
</div>
<div class="paragraph">
<p>Концепт „гране” у програму Меркуријал има много дубље значење.
Грана на којој се креира скуп измена се чува <em>заједно са скупом измена,</em> што значи да ће увек бити у историји репозиторијума.
Ево примера комита који је направљен на <code>develop</code> грани:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg log -l 1
changeset:   6:8f65e5e02793
branch:      develop
tag:         tip
user:        Ben Straub &lt;ben@straub.cc&gt;
date:        Thu Aug 14 20:06:38 2014 -0700
summary:     More documentation</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите линију која почиње са „branch”.
Програм Гит ово не може у потпуности да преслика (и нема потребе за тим; оба типа гране се могу представити као Гит референца), али <em>git-remote-hg</em> мора да разуме разлику, јер је Меркуријал прави.</p>
</div>
<div class="paragraph">
<p>Креирање Меркуријал маркера је једноставно као креирање Гит грана.
На Гит страни:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b featureA
Switched to a new branch 'featureA'
$ git push origin featureA
To hg::/tmp/hello
 * [new branch]      featureA -&gt; featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>И то је све.
На Меркуријал страни, изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg bookmarks
   featureA                  5:bd5ac26f11f9
$ hg log --style compact -G
@  6[tip]   8f65e5e02793   2014-08-14 20:06 -0700   ben
|    More documentation
|
o    5[featureA]:4,2   bd5ac26f11f9   2014-08-14 20:02 -0700   ben
|\     Merge remote-tracking branch 'origin/master'
| |
| o  4   0434aaa6b91f   2014-08-14 20:01 -0700   ben
| |    update makefile
| |
| o  3:1   318914536c86   2014-08-14 20:00 -0700   ben
| |    goodbye
| |
o |  2   f098c7f45c4f   2014-08-14 20:01 -0700   ben
|/     Add some documentation
|
o  1   82e55d328c8c   2005-08-26 01:21 -0700   mpm
|    Create a makefile
|
o  0   0a04b987be5a   2005-08-26 01:20 -0700   mpm
     Create a standard "hello, world" program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите нову ознаку <code>[featureA]</code> на ревизији 5.
Оне се понашају потпуно исто као Гит гране са стране програма Гит, уз један изузетак: маркер не можете да обришете са стране програма Гит (ово је ограничење помоћника за удаљене).</p>
</div>
<div class="paragraph">
<p>Такође можете да радите и на „тешким” Меркуријал гранама: једноставно ставите грану у <code>branches</code> простор имена:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b branches/permanent
Switched to a new branch 'branches/permanent'
$ vi Makefile
$ git commit -am 'A permanent change'
$ git push origin branches/permanent
To hg::/tmp/hello
 * [new branch]      branches/permanent -&gt; branches/permanent</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ево како то изгледа са Меркуријал стране:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg branches
permanent                      7:a4529d07aad4
develop                        6:8f65e5e02793
default                        5:bd5ac26f11f9 (inactive)
$ hg log -G
o  changeset:   7:a4529d07aad4
|  branch:      permanent
|  tag:         tip
|  parent:      5:bd5ac26f11f9
|  user:        Ben Straub &lt;ben@straub.cc&gt;
|  date:        Thu Aug 14 20:21:09 2014 -0700
|  summary:     A permanent change
|
| @  changeset:   6:8f65e5e02793
|/   branch:      develop
|    user:        Ben Straub &lt;ben@straub.cc&gt;
|    date:        Thu Aug 14 20:06:38 2014 -0700
|    summary:     More documentation
|
o    changeset:   5:bd5ac26f11f9
|\   bookmark:    featureA
| |  parent:      4:0434aaa6b91f
| |  parent:      2:f098c7f45c4f
| |  user:        Ben Straub &lt;ben@straub.cc&gt;
| |  date:        Thu Aug 14 20:02:21 2014 -0700
| |  summary:     Merge remote-tracking branch 'origin/master'
[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Име гране „permanent” је снимљено са скупом измена под ознаком <em>7</em>.</p>
</div>
<div class="paragraph">
<p>Гледано са Гит стране, рад са било којоим од ова два стила грана је сити: једноставно одјављујете, комитујете, преузимате, спајате, повлачите и гурате као и иначе.
Једна ствар коју би требало да знате је да Меркуријал не подржава поновно исписисвање историје, може само да додаје у историју.
Ево како наш Меркуријал репозиторијум изгледа након интерактивног ребазирања и наметнутог гурања:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg log --style compact -G
o  10[tip]   99611176cbc9   2014-08-14 20:21 -0700   ben
|    A permanent change
|
o  9   f23e12f939c3   2014-08-14 20:01 -0700   ben
|    Add some documentation
|
o  8:1   c16971d33922   2014-08-14 20:00 -0700   ben
|    goodbye
|
| o  7:5   a4529d07aad4   2014-08-14 20:21 -0700   ben
| |    A permanent change
| |
| | @  6   8f65e5e02793   2014-08-14 20:06 -0700   ben
| |/     More documentation
| |
| o    5[featureA]:4,2   bd5ac26f11f9   2014-08-14 20:02 -0700   ben
| |\     Merge remote-tracking branch 'origin/master'
| | |
| | o  4   0434aaa6b91f   2014-08-14 20:01 -0700   ben
| | |    update makefile
| | |
+---o  3:1   318914536c86   2014-08-14 20:00 -0700   ben
| |      goodbye
| |
| o  2   f098c7f45c4f   2014-08-14 20:01 -0700   ben
|/     Add some documentation
|
o  1   82e55d328c8c   2005-08-26 01:21 -0700   mpm
|    Create a makefile
|
o  0   0a04b987be5a   2005-08-26 01:20 -0700   mpm
     Create a standard "hello, world" program</code></pre>
</div>
</div>
<div class="paragraph">
<p>Креирани су скупови измена <em>8, 9,</em> и <em>10</em> и припадају <code>permanent</code> грани, али су још увек присутни стари скупови измена.
Ово може <strong>тотално</strong> да збуни ваше колеге из тима који користе Меркуријал, па би било добро да то не радите.</p>
</div>
</div>
<div class="sect4">
<h4 id="_меркуријал_резиме">Меркуријал резиме</h4>
<div class="paragraph">
<p>Програми Гит и Меркуријал су довољно слични да је рад са друге стране границе прилично безболан.
Ако избегнете мењање историје која је остала на вашој машини (као што се и иначе препоручује), можда нећете ни приметите да је са друге стране Меркуријал.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_гит_и_базаар">Гит и Базаар</h3>
<div class="paragraph">
<p>Још један од чувених DVCS је <a href="http://bazaar.canonical.com">Базаар</a>.
Базаар је слободан и отвореног кода и чини део <a href="https://www.gnu.org">ГНУ пројекта</a>.
Понаша се потпуно другачије од програма Гит.
Понекада, ако желите да урадите исту ствар као у програму Гит, морате да употребите другу кључну реч, а неке заједничке кључне речи немају исто значење.
Уствари, управљање гранама је веома различито и може да унесе забуну, посебно некоме ко долази из Гит света.
Без обзира на све, могуће је радити на Базаар репозиторијуму из Гит репозиторијума.</p>
</div>
<div class="paragraph">
<p>Постоје многи пројекти који вам омогућавају да програм Гит користите као Базаар клијент.
Овде ћемо употребити пројекат Фелипеа Контрераса који можете пронаћи на адреси <a href="https://github.com/felipec/git-remote-bzr" class="bare">https://github.com/felipec/git-remote-bzr</a>.
Да бисте га инсталирали, једноставно треба да преузмете фајл <em>git-remote-bzr</em> и поставите га у директоријум који је део <code>$PATH</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ wget https://raw.github.com/felipec/git-remote-bzr/master/git-remote-bzr -O ~/bin/git-remote-bzr
$ chmod +x ~/bin/git-remote-bzr</code></pre>
</div>
</div>
<div class="paragraph">
<p>Такође је потребно да имате инсталиран програм Базаар.
И то је све!</p>
</div>
<div class="sect4">
<h4 id="_креирање_гит_репозиторијума_из_базаар_репозиторијума">Креирање Гит репозиторијума из Базаар репозиторијума</h4>
<div class="paragraph">
<p>Ово је једноставно.
Довољно је да клонирате Базаар репозиторијум тако што испред имена наведете <code>bzr::</code>.
Пошто и Гит и Базаар раде потпуно клонирање на вашу машину, Гит клон може да се прикачи на Базаар клон, али се то не препоручује.
It’s much easier to attach your Git clone directly to the same place your Bazaar clone is attached to — the central repository.</p>
</div>
<div class="paragraph">
<p>Претпоставимо да сте радили са удаљеним репозиторијумом који се налази на адреси <code>bzr+ssh://developer@mybazaarserver:myproject</code>.
Затим морате да га клонирате на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone bzr::bzr+ssh://developer@mybazaarserver:myproject myProject-Git
$ cd myProject-Git</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом тренутку имате креиран Гит репозиторијум, али он није оптимизован за ефикасно искоришћење диска.
Зато би требало да пречистите и сажмете ваш Гит репозиторијум, посебно ако је велики:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git gc --aggressive</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_базаар_гране">Базаар гране</h4>
<div class="paragraph">
<p>Базаар вам дозвољава само да клонирате гране, али репозиторијум може да садржи неколико грана, па <code>git-remote-bzr</code> може да клонира и једно и друго.
На пример, ако желите да клонирате грану:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone bzr::bzr://bzr.savannah.gnu.org/emacs/trunk emacs-trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>А да клонирате комплетан репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone bzr::bzr://bzr.savannah.gnu.org/emacs emacs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Друга команда клонира све гране које се налазе у <em>emacs</em> репозиторијуму; међутим, ипак је могуће да се укаже на поједине гране:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git config remote-bzr.branches 'trunk, xwindow'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Неки репозиторијуми вам не дозвољавају да видите њихове гране, па их у том случају морате ручно навести, мада бисте могли да наведете конфигурацију у команди клонирања, можда вам је ово лакше:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git init emacs
$ git remote add origin bzr::bzr://bzr.savannah.gnu.org/emacs
$ git config remote-bzr.branches 'trunk, xwindow'
$ git fetch</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_игнорисање_онога_што_се_игнорише_у_bzrignore">Игнорисање онога што се игнорише у .bzrignore</h4>
<div class="paragraph">
<p>Пошто радите на пројекту којим управља Базаар, не би требало да креирате <code>.gitignore</code> фајл јер нехотично <em>можете</em> да га поставите под контролу верзија и то може засметати осталим људима који користе Базаар.
Решење је да фајл <code>.git/info/exclude</code> креирате или као симболички линк или као обичан фајл.
Касније ћемо видети како се решава ово питање.</p>
</div>
<div class="paragraph">
<p>Базаар за игнорисање фајлова користи исти модел као и програм Гит, али има и две могућности које немају свој еквивалент у програму Гит.
Комплетан опис се налази у <a href="http://doc.bazaar.canonical.com/bzr.2.7/en/user-reference/ignore-help.html">документацији</a>.
Могућности су следеће:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>„!!” вам дозвољава да игноришете одређене фајл шаблоне чак и када су наведени употребом „!” правила.</p>
</li>
<li>
<p>"RE:" на почетку линије вам дозвољава да наведете <a href="https://docs.python.org/3/library/re.html">Пајтон регуларни израз</a> (програм Гит дозвољава само глобове љуске).</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Као последица, постоје две различите ситуације о којима треба да размислите:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Ако <code>.bzrignore</code> фајл не садржи ниједан од ова два посебна префикса, онда једноставно у репозиторијуму можете направити симболички линк на њега: <code>ln -s .bzrignore .git/info/exclude</code>.</p>
</li>
<li>
<p>У супротном, морате да креирате фајл <code>.git/info/exclude</code> и да га прилагодите тако да се игноришу потпуно исти фајлови као у <code>.bzrignore</code>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Шта год да је случај, мораћете остати на опрезу у случају било какве измене фајла <code>.bzrignore</code> и да осигурате да фајл <code>.git/info/exclude</code> увек пресликава <code>.bzrignore</code>.
Заиста, ако би измена <code>.bzrignore</code> фајла садржала једну или више линија које почињу са „!!” или „RE:”, како програм Git не може те линије да интерпретира, морали бисте да преправите свој <code>.git/info/exclude</code> фајл тако да игнорише исте фајлове као оне које игнорише <code>.bzrignore</code> фајл.
Уз то, ако је <code>.git/info/exclude</code> фајл уствари симболички линк, прво морате да обришете симболички линк, копирате <code>.bzrignore</code> у <code>.git/info/exclude</code> па да онда прилагодите овај други.
Међутим, будите опрезни у вези креирања овог фајла, јер је са програмом Гит немогуће поновно укључивање фајла ако је директоријум родитељ тог фајла искључен.</p>
</div>
</div>
<div class="sect4">
<h4 id="_преузимање_измена_са_удаљеног_репозиторијума">Преузимање измена са удаљеног репозиторијума</h4>
<div class="paragraph">
<p>Да бисте преузели измене са удаљеног, повлачите измене као и обично, употребом команди програма Гит.
Под претпоставком да су ваше измене на <code>master</code> грани, спајате или ребазирате свој рад на  <code>origin/master</code> грану:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git pull --rebase origin</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_гурање_вашег_рада_на_удаљени_репозиторијум">Гурање вашег рада на удаљени репозиторијум</h4>
<div class="paragraph">
<p>Пошто и Базаар има концепт комитова спајања, неће бити проблема ако гурнете комит спајања.
Тако да можете радити на грани, спојити измене у <code>master</code> и гурнути свој рад.
Затим, креирате своје гране, тестирате и комитујете рад као и обично.
На крају гурнете свој рад на Базаар репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin master</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_ограничења">Ограничења</h4>
<div class="paragraph">
<p>Радни оквир програма Гит за удаљене помоћнике има нека ограничења која важе.
Тачније, следеће команде не функционишу:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>git push origin :грана-за-брисање (Базаар не прихвата овакав начин брисања референци)</p>
</li>
<li>
<p>git push origin old:new (гурнуће се <code>old</code>)</p>
</li>
<li>
<p>git push --dry-run origin branch (извршиће се гурање)</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h4 id="_резиме_11">Резиме</h4>
<div class="paragraph">
<p>Пошто су модели програма Гит и Базаар слични, нема много отпора када радите с друге стране границе.
Док год пазите на ограничења и свесни сте да удаљени репозиторијум није природно Гит, биће све у реду.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_гит_и_перфорс">Гит и Перфорс</h3>
<div class="paragraph">
<p>

Перфорс је веома популаран систем за контролу верзија у корпоративним окружењима.
На тржишту је од 1995. године што га чини најстаријим системом који је покривен овим поглављем.
Као такав, дизајниран је са ограничењима која су важила тих дана; претпоставља да сте увек повезани на један централни сервер и на локалном диску се чува само једна верзија.
Истини за вољу, његове могућности и ограничења су прилагођене неколицини специфичних проблема, али постоји много пројеката који користе Перфорс тамо где би Гит у суштини функционисао боље.</p>
</div>
<div class="paragraph">
<p>Постоје две опције ако желите да мешате употребу програма Перфорс и Гит.
Прва коју ћемо представите је <em>Git Fusion</em> мост који праве творци програма Перфорс и који вам дозвољава да подстабла Перфорс депоа изложите као Гит репозиторијума по којима може да се чита и пише.
Друга је <em>git-p4,</em> мост на клијентској страни који вам омогућава да програм Гит користите као Перфорс клијент, без потребе било какве реконфигурације Перфорс сервера.</p>
</div>
<div class="sect4">
<h4 id="_p4_git_fusion">Git Fusion</h4>
<div class="paragraph">
<p>
Перфорс нуди производ под називом <em>Git Fusion</em> (доступан на <a href="http://www.perforce.com/git-fusion" class="bare">http://www.perforce.com/git-fusion</a>), који са серверске стране синхронизује Перфорс сервер са Гит репозиторијумима.</p>
</div>
<div class="sect5">
<h6 id="_подешавање_2">Подешавање</h6>
<div class="paragraph">
<p>У нашим примерима ћемо користи најлакшу методу инсталације програма <em>Git Fusion,</em> која представља преузимање виртуелне машине која извршава Перфорс даемон и <em>Git Fusion</em>.
Слику виртуелне машине можете преузети са адресе <a href="http://www.perforce.com/downloads/Perforce/20-User" class="bare">http://www.perforce.com/downloads/Perforce/20-User</a>, па када се преузимање заврши, увезете је у свој омиљени софтвер за виртуелизацију (овде ћемо користити <em>VirtualBox)</em>.</p>
</div>
<div class="paragraph">
<p>Када по први пут покренете машину, питаће вас да подесите лозинку за три Линукс корисника (<code>root</code>, <code>perforce</code>, и <code>git</code>) и наведете име инстанце, које се користи да се та инсталација разликује од осталих на истој мрежи.
Када се све то заврши, видећете следеће:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/git-fusion-boot.png" >}}" alt="Екран при покретању _Git Fusion_ виртуелне машине">
</div>
<div class="title">Слика 145. Екран при покретању <em>Git Fusion</em> виртуелне машине</div>
</div>
<div class="paragraph">
<p>Требало би да прибележите IP адресу која се овде прикаже, касније ћемо је користити.
Затим ћемо да креирамо Перфорс корисника.
Изаберите опцију „Login” на дну екрана и притисните ентер (или направите SSH везу са машином), и пријавите се као <code>root</code>.
Затим употребите следеће команде да креирате корисника:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ p4 -p localhost:1666 -u super user -f john
$ p4 -p localhost:1666 -u john passwd
$ exit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Прва команда ће покренути VI едитор да прилагодите корисника, али можете и прихватити подразумевана подешавања тако што откуцате <code>:wq</code> и притиснете ентер.
Друга ће од вас захтевати да двапут унесете лозинку.
То је све што је потребно да се уради у одзиву љуске, па напустите сесију.</p>
</div>
<div class="paragraph">
<p>Следећа ствар коју морате урадити је да програму Гит наложите да не проверава SSL сертификате.
<em>Git Fusion</em> слика долази са сертификатом, али он је за домен који се не подудара са IP адресом ваше виртуелне машине, тако да ће програм Гит одбити да успостави HTTPS везу.
Ако ће ово бити стална инсталација, консултујте Перфорс <em>Git Fusion</em> упутство да бисте инсталирали одговарајући сертификат; за наше потребе, следеће ће бити довољно:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ export GIT_SSL_NO_VERIFY=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада можете проверити да ли све ради како треба.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone https://10.0.1.254/Talkhouse
Cloning into 'Talkhouse'...
Username for 'https://10.0.1.254': john
Password for 'https://john@10.0.1.254':
remote: Counting objects: 630, done.
remote: Compressing objects: 100% (581/581), done.
remote: Total 630 (delta 172), reused 0 (delta 0)
Receiving objects: 100% (630/630), 1.22 MiB | 0 bytes/s, done.
Resolving deltas: 100% (172/172), done.
Checking connectivity... done.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Слика виртуелне машине долази опремљена са примером пројекта који можете да клонирате.
Овде ћемо да клонирамо преко HTTPS, користећи <code>john</code> корисника којег смо управо креирали изнад; програм Git тражи акредитиве за ову везу, али ће нам кеш акредитива омогућити да онај корак прескочимо у наредним захтевима.</p>
</div>
</div>
<div class="sect5">
<h6 id="_fusion_конфигурација">Fusion конфигурација</h6>
<div class="paragraph">
<p>Када инсталирате програм <em>Git Fusion,</em> пожелећете да измените конфигурацију.
Ово је у суштини прилично лако употребом вашег омиљеног Перфорс клијента; једноставно мапирајте <code>//.git-fusion</code> директоријум на Перфорс серверу у свој радни простор.
Структура фајлова изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ tree
.
├── objects
│   ├── repos
│   │   └── [...]
│   └── trees
│       └── [...]
│
├── p4gf_config
├── repos
│   └── Talkhouse
│       └── p4gf_config
└── users
    └── p4gf_usermap

498 directories, 287 files</code></pre>
</div>
</div>
<div class="paragraph">
<p>Директоријум <code>objects</code> интерно користи програм <em>Git Fusion</em> да мапира Перфорс објекте у Гит и обрнуто, нема потребе да се тамо петљате са било чиме.
У овом директоријуму постоји глобални <code>p4gf_config</code> фајл, као и по један са сваки репозиторијум – ово су конфигурациони фајлови који одређују како се програм <em>Git Fusion</em> понаша.
Хајде да погледамо фајл у корену:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[repo-creation]
charset = utf8

[git-to-perforce]
change-owner = author
enable-git-branch-creation = yes
enable-swarm-reviews = yes
enable-git-merge-commits = yes
enable-git-submodules = yes
preflight-commit = none
ignore-author-permissions = no
read-permission-check = none
git-merge-avoidance-after-change-num = 12107

[perforce-to-git]
http-url = none
ssh-url = none

[@features]
imports = False
chunked-push = False
matrix2 = False
parallel-push = False

[authentication]
email-case-sensitivity = no</code></pre>
</div>
</div>
<div class="paragraph">
<p>Овде нећемо улазити у значење ових заставица, али приметите да је ово само текстуални фајл у INI формату, сличан ономе који и програм Гит користи за конфигурацију.
Овај фајл наводи глобалне опције које затим могу да се преиначе у конфигурационим фајловима одређеног репозиторијума, као што је <code>repos/Talkhouse/p4gf_config</code>.
Ако отворите овај фајл, видећете <code>[@repo]</code> одељак са неким подешавањима која се разликују од глобалних подразумеваних.
Такође чете видети и одељак који изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[Talkhouse-master]
git-branch-name = master
view = //depot/Talkhouse/main-dev/... ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је мапирање између Перфорс гране и Гит гране.
Име одељка може бити произвољно, докле год је јединствено.
<code>git-branch-name</code> вам омогућава да конвертујете путању депоа која би била незгодна за употребу у програму Гит на неко згодније име.
Поставка <code>view</code> контролише како се Перфорс фајлови мапирају у Гит репозиторијум, користећи стандардну синтаксу мапирања погледа.
Може да се наведе више од једног мапирања, као у следећем примеру:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[multi-project-mapping]
git-branch-name = master
view = //depot/project1/main/... project1/...
       //depot/project2/mainline/... project2/...</code></pre>
</div>
</div>
<div class="paragraph">
<p>На овај начин, ако ваше уобичајено мапирање радног простора укључује измене структуре директоријума, то можете пресликати и у Гит репозиторијум.</p>
</div>
<div class="paragraph">
<p>Последњи фајл о коме ћемо причати је <code>users/p4gf_usermap</code> који мапира Перфорс кориснике на Гит кориснике и који вам можда никада неће бити ни потребан.
Када се Перфорс скуп измена конвертује у Гит комит, подразумевано понашање програма <em>Git Fusion</em> је да потражи Перфорс корисника и употреби тамо сачувану имејл адресу и пуно име за поље аутор/комитер у програму Гит.
Када се конвертује у другу страну, подразумевано се претражује Перфорс корисник са имејл адресом сачуваном у Гит пољу аутор комита, па се скуп измена подноси као тај корисник (уз примену дозвола).
У већини случајева, ово понашање је сасвим у реду, али размотрите следећи фајл мапирања:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>john john@example.com "John Doe"
john johnny@appleseed.net "John Doe"
bob employeeX@example.com "Anon X. Mouse"
joe employeeY@example.com "Anon Y. Mouse"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Свака линија је у формату <code>&lt;корисник&gt; &lt;имејл&gt; "&lt;пуно име&gt;"</code>, и креира једно мапирање корисника.
Прве две линије мапирају две различите имејл адресе у исти Перфорс кориснички налог.
Ово је корисно ако сте креирали Гит комитове користећи неколико различитих имејл адреса (или променили имејл адресе), али желите да се све мапирају у истог Перфорс корисника.
Када се из Перфорс скупа измена креира Гит комит, прва линија која се подудара са Перфорс корисником ће се употребити за Гит информације о ауторству комита.</p>
</div>
<div class="paragraph">
<p>Последње две линије маскирају стварна имена и имејл адресе Боба и Џоа у креираним Гит комитовима.
Ово је лепо ако желите да отворите кôд неког интерног пројекта, али не желите да целом свету објавите свој директоријум запослених.
Приметите да би имејл адресе и пуна имена требало да буду јединствени, осим ако не желите да се Гит комитови приписују једном фиктивном аутору.</p>
</div>
</div>
<div class="sect5">
<h6 id="_процес_рада_3">Процес рада</h6>
<div class="paragraph">
<p>Перфорс <em>Git Fusion</em> је двосмерни мост између Перфорс и Гит контроле верзија.
Хајде да погледамо како изгледа рад са Гит стране.
Претпоставићемо да смо мапирали „Jam” пројекат користећи конфигурациони фајл као што је показано изнад и који можемо да клонирамо на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone https://10.0.1.254/Jam
Cloning into 'Jam'...
Username for 'https://10.0.1.254': john
Password for 'https://ben@10.0.1.254':
remote: Counting objects: 2070, done.
remote: Compressing objects: 100% (1704/1704), done.
Receiving objects: 100% (2070/2070), 1.21 MiB | 0 bytes/s, done.
remote: Total 2070 (delta 1242), reused 0 (delta 0)
Resolving deltas: 100% (1242/1242), done.
Checking connectivity... done.
$ git branch -a
* master
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/master
  remotes/origin/rel2.1
$ git log --oneline --decorate --graph --all
* 0a38c33 (origin/rel2.1) Create Jam 2.1 release branch.
| * d254865 (HEAD, origin/master, origin/HEAD, master) Upgrade to latest metrowerks on Beos -- the Intel one.
| * bd2f54a Put in fix for jam's NT handle leak.
| * c0f29e7 Fix URL in a jam doc
| * cc644ac Radstone's lynx port.
[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Када по први пут урадите ово, може да потраје.
Оно што се дешава је да <em>Git Fusion</em> конвертује све примењиве скупове измена из Перфорс Историје у Гит комитове.
Ово се ради локално на серверу, тако да је релативно брзо, али ако имате доста историје, ипак ће потрајати.
Наредна преузимања врше инкременталну конверзију, тако да ће личити на природну Гит брзину.</p>
</div>
<div class="paragraph">
<p>Као што видите, наш репозиторијум изгледа потпуно исто као и било који други Гит репозиторијум са којим можете да радите.
Постоје три гране, и Гит је лепо креирао локалну <code>master</code> грану која прати <code>origin/master</code>.
Хајде да урадимо мало посла и креирамо неколико нових комитова:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># ...
$ git log --oneline --decorate --graph --all
* cfd46ab (HEAD, master) Add documentation for new feature
* a730d77 Whitespace
* d254865 (origin/master, origin/HEAD) Upgrade to latest metrowerks on Beos -- the Intel one.
* bd2f54a Put in fix for jam's NT handle leak.
[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Имамо два нова комита.
Хајде сада да видимо да ли је још неко радио:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch
remote: Counting objects: 5, done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 3 (delta 2), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From https://10.0.1.254/Jam
   d254865..6afeb15  master     -&gt; origin/master
$ git log --oneline --decorate --graph --all
* 6afeb15 (origin/master, origin/HEAD) Update copyright
| * cfd46ab (HEAD, master) Add documentation for new feature
| * a730d77 Whitespace
|/
* d254865 Upgrade to latest metrowerks on Beos -- the Intel one.
* bd2f54a Put in fix for jam's NT handle leak.
[...]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Изгледа да јесте!
Не бисте то знали из овог погледа, али <code>6afeb15</code> је уствари креиран Перфорс клијентом.
Изгледа као још један комит из перспективе програма Гит, што и јесте поента.
Хајде да видимо како се Перфорс сервер носи са комитом спајања:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge origin/master
Auto-merging README
Merge made by the 'recursive' strategy.
 README | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)
$ git push
Counting objects: 9, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (9/9), done.
Writing objects: 100% (9/9), 917 bytes | 0 bytes/s, done.
Total 9 (delta 6), reused 0 (delta 0)
remote: Perforce: 100% (3/3) Loading commit tree into memory...
remote: Perforce: 100% (5/5) Finding child commits...
remote: Perforce: Running git fast-export...
remote: Perforce: 100% (3/3) Checking commits...
remote: Processing will continue even if connection is closed.
remote: Perforce: 100% (3/3) Copying changelists...
remote: Perforce: Submitting new Git commit objects to Perforce: 4
To https://10.0.1.254/Jam
   6afeb15..89cba2b  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Програм Гит сматра да је све прошло успешно.
Хајде да погледамо историју <code>README</code> фајла из перспективе програма Перфорс, користећи граф ревизија могућност команде <code>p4v</code>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/git-fusion-perforce-graph.png" >}}" alt="Перфорс граф ревизија као резултат извршења Гит команде push">
</div>
<div class="title">Слика 146. Перфорс граф ревизија као резултат извршења Гит команде push</div>
</div>
<div class="paragraph">
<p>Ако овај поглед раније нисте видело, може вас донекле збунити, али он приказује исти концепт као и графички приказ Гит историје.
Посматрамо историју <code>README</code> фајла, тако да стабло директоријума горе лево приказује само тај фајл како се појављује у разним гранама.
Горе десно имамо визуелни граф веза између различитих ревизија, а доле десно приказ овог графа у целости.
Остатак погледа приказује детаље изабране ревизије (у овом случају <code>2</code>).</p>
</div>
<div class="paragraph">
<p>Једна ствар коју треба приметити је да граф изгледа потпуно исто као онај из Гит историје.
Перфорс није имао именоване гране у које да смести комитове <code>1</code> и <code>2</code>, па је креирао грану „anonymous” у <code>.git-fusion</code> директоријуму и сместио их у њу.
Ово ђе се десити и именованим Гит гранама које не одговарају именованој Перфорс грани (а касније можете да их мапирате у Перфорс грану помоћу конфигурационог фајла).</p>
</div>
<div class="paragraph">
<p>Већина овога се догађа у позадини, али крајњи резултат је да једна особа у тиму може да користи Гит, друга може да користи Перфорс, а ниједна од њих неће знати шта је избор оне друге.</p>
</div>
</div>
<div class="sect5">
<h6 id="_git_fusion_резиме">Git-Fusion резиме</h6>
<div class="paragraph">
<p>Ако имате (или можете добити) приступ свом Перфорс серверу, <em>Git Fusion</em> је одличан начин да Гит и Перфорс разговарају међусобно.
Потребно је мало конфигурисања, али крива учења није много стрма.
Ово је један од малобројних одељака у овом поглављу где се упозорења о употреби пуне снаке програма Гит не појављују.
Овим не желимо да кажемо како ће Перфорс бити срећан са свиме што му баците – ако покушате да поново испишете историју која је већ гурнута, <em>Git Fusion</em> ће одбити – али <em>Git Fusion</em> се заиста труди да осећај коришћења буде природан.
Можете чак да користите и Гит подмодуле (који ће Перфорс корисницима изгледати чудно) и да спајате гране (ово ће са Перфорс стране бити забележено као интеграција).</p>
</div>
<div class="paragraph">
<p>Ако администратора свог сервера не можете убедити да постави <em>Git Fusion,</em> и даље постоји начин да ова два алата користите заједно.</p>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_git_p4_client">Git-p4</h4>
<div class="paragraph">
<p>
<em>Git-p4</em> је двосмерни мост између програма Гит и Перфорс.
Потпуно се извршава у вашем Гит репозиторијуму, тако да вам не треба никакав приступ Перфорс серверу (осим корисничких акредитива, наравно).
<em>Git-p4</em> није тако флексибилно или комплетно решење као <em>Git Fusion,</em> али омогућава да урадите већину онога што бисте желели да урадите, а да не залазите у окружење сервера.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Да бисте радили са <em>git-p4,</em> потребно је да негде на <code>PATH</code> имате алат <code>p4</code>.
У време писања, он је слободно доступан на адреси <a href="http://www.perforce.com/downloads/Perforce/20-User" class="bare">http://www.perforce.com/downloads/Perforce/20-User</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="_подешавање_3">Подешавање</h6>
<div class="paragraph">
<p>У сврху примера, извршаваћемо Перфорс сервер из <em>Git Fusion</em> OVA (виртуелне машине) као што је приказано изнад, али ћемо прескочити <em>Git Fusion</em> сервер и директно прећи на Перфорс контролу верзија.</p>
</div>
<div class="paragraph">
<p>Да бисте користили <code>p4</code> клијента из командне линије (од којег <em>git-p4</em> зависи), потребно је да поставите неколико променљивих окружења:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ export P4PORT=10.0.1.254:1666
$ export P4USER=john</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_први_кораци_3">Први кораци</h6>
<div class="paragraph">
<p>Као што је и обичај у програму Гит, прва команда је клонирање:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 clone //depot/www/live www-shallow
Importing from //depot/www/live into www-shallow
Initialized empty Git repository in /private/tmp/www-shallow/.git/
Doing initial import of //depot/www/live/ from revision #head into refs/remotes/p4/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово креира оно што се у Гит терминологији назива „shallow” (плитки) клон; у Гит се увози само најновија Перфорс ревизија; упамтите, програм Перфорс није дизајниран тако да сваком кориснику достави сваку ревизију.
Ово је довољно да се програм Гит користи као Перфорс клијент, али за остале сврхе није довољно.</p>
</div>
<div class="paragraph">
<p>Када се заврши, имамо потпуно функционални Гит репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd myproject
$ git log --oneline --all --graph --decorate
* 70eaf78 (HEAD, p4/master, p4/HEAD, master) Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите да за Перфорс сервер постоји „p4” удаљени репозиторијум, али све остало изгледа као стандардни клон.
То уствари и није тачно, јер тамо заправо нема никаквог удаљеног репозиторијума.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote -v</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом репозиторијуму нема ниједног удаљеног репозиторијума.
<em>Git-p4</em> је креирао неке референце које представљају стање сервера и команди <code>git log</code> оне изгледају као удаљене референце, али њима не управља сам програм Гит и не можете да гурнете на њих.</p>
</div>
</div>
<div class="sect5">
<h6 id="_процес_рада_4">Процес рада</h6>
<div class="paragraph">
<p>У реду, хајде да одрадимо неки посао.
Претпоставимо да сте постигли неки напредак на веома важној могућности и спремни сте да их покажете остатку свог тима.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --oneline --all --graph --decorate
* 018467c (HEAD, master) Change page title
* c0fb617 Update link
* 70eaf78 (p4/master, p4/HEAD) Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Направили смо два нова комита које желимо да проследимо Перфорс серверу.
Хајде да проверимо да ли је још неко радио данас:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 sync
git p4 sync
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/www/live/
Import destination: refs/remotes/p4/master
Importing revision 12142 (100%)
$ git log --oneline --all --graph --decorate
* 75cd059 (p4/master, p4/HEAD) Update copyright
| * 018467c (HEAD, master) Change page title
| * c0fb617 Update link
|/
* 70eaf78 Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Изгледа као да се се измене и <code>master</code> и <code>p4/master</code> разишли.
Систем грана програма Перфорс <em>уопште</em> не личи на систем програма Гит, тако да достављање комитова спајања нема никаквог смисла.
<em>Git-p4</em> препоручује да ребазирате своје комитове, па чак обезбеђује и пречицу за то:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 rebase
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/www/live/
No changes to import!
Rebasing the current branch onto remotes/p4/master
First, rewinding head to replay your work on top of it...
Applying: Update link
Applying: Change page title
 index.html | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Вероватно можете видети у излазу, <code>git p4 rebase</code> је пречица за <code>git p4 sync</code> иза које следи <code>git rebase p4/master</code>.
У суштини је мало паметније од тога, посебно када се ради са више грана, али ово је добра апроксимација.</p>
</div>
<div class="paragraph">
<p>Сада је наша историја поново линеарна, па смо спремни да измене допринесемо назад на Перфорс.
Команда <code>git p4 submit</code> ће покушати да креира нову Перфорс ревизију за сваки Гит комит између <code>p4/master</code> и <code>master</code>.
Када је покренете прелазите у свој омиљени едитор и садржај фајла који вам се приказује изгледа отприлике овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># A Perforce Change Specification.
#
#  Change:      The change number. 'new' on a new changelist.
#  Date:        The date this specification was last modified.
#  Client:      The client on which the changelist was created.  Read-only.
#  User:        The user who created the changelist.
#  Status:      Either 'pending' or 'submitted'. Read-only.
#  Type:        Either 'public' or 'restricted'. Default is 'public'.
#  Description: Comments about the changelist.  Required.
#  Jobs:        What opened jobs are to be closed by this changelist.
#               You may delete jobs from this list.  (New changelists only.)
#  Files:       What opened files from the default changelist are to be added
#               to this changelist.  You may delete files from this list.
#               (New changelists only.)

Change:  new

Client:  john_bens-mbp_8487

User: john

Status:  new

Description:
   Update link

Files:
   //depot/www/live/index.html   # edit


######## git author ben@straub.cc does not match your p4 account.
######## Use option --preserve-user to modify authorship.
######## Variable git-p4.skipUserNameCheck hides this message.
######## everything below this line is just the diff #######
--- //depot/www/live/index.html  2014-08-31 18:26:05.000000000 0000
+++ /Users/ben/john_bens-mbp_8487/john_bens-mbp_8487/depot/www/live/index.html   2014-08-31 18:26:05.000000000 0000
@@ -60,7 +60,7 @@
 &lt;/td&gt;
 &lt;td valign=top&gt;
 Source and documentation for
-&lt;a href="http://www.perforce.com/jam/jam.html"&gt;
+&lt;a href="jam.html"&gt;
 Jam/MR&lt;/a&gt;,
 a software build tool.
 &lt;/td&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је углавном исти садржај који бисте видели и да извршите <code>p4 submit</code>, осим дела на крају који је <em>git-p4</em> згодно убацио.
Када треба да достави име за комит или скуп измена <em>Git-p4</em> покушава да поштује појединачно ваша Гит и Перфорс подешавања, али у неким случајевима бисте то пожелели да преиначите.
На пример, ако је Гит комит који увозите написао сарадник који нема Перфорс кориснички налог, ипак желите да крајњи скуп измена изгледа тако да га је написала та особа (а не ви).</p>
</div>
<div class="paragraph">
<p><em>Git-p4</em> је корисно увезао поруку из Гит комита као садржај овог Перфорс скупа измена, па све што је потребно да се уради јесте да фајл сачувамо и напустимо едитор, двапут (по једном за сваки комит).
Коначни излаз у љуски ће изгледати слично следћем:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 submit
Perforce checkout for depot path //depot/www/live/ located at /Users/ben/john_bens-mbp_8487/john_bens-mbp_8487/depot/www/live/
Synchronizing p4 checkout...
... - file(s) up-to-date.
Applying dbac45b Update link
//depot/www/live/index.html#4 - opened for edit
Change 12143 created with 1 open file(s).
Submitting change 12143.
Locking 1 files ...
edit //depot/www/live/index.html#5
Change 12143 submitted.
Applying 905ec6a Change page title
//depot/www/live/index.html#5 - opened for edit
Change 12144 created with 1 open file(s).
Submitting change 12144.
Locking 1 files ...
edit //depot/www/live/index.html#6
Change 12144 submitted.
All commits applied!
Performing incremental import into refs/remotes/p4/master git branch
Depot paths: //depot/www/live/
Import destination: refs/remotes/p4/master
Importing revision 12144 (100%)
Rebasing the current branch onto remotes/p4/master
First, rewinding head to replay your work on top of it...
$ git log --oneline --all --graph --decorate
* 775a46f (HEAD, p4/master, p4/HEAD, master) Change page title
* 05f1ade Update link
* 75cd059 Update copyright
* 70eaf78 Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Резултат је исти као да смо само извршили <code>git push</code>, што и јесте најприближнија аналогија ономе што се заиста одиграло.</p>
</div>
<div class="paragraph">
<p>Приметите да се током овог процеса сваки Гит комит претворио у Перфорс скуп измена; ако желите да их згњечите у један једини скуп измена, урадите то интерактивним ребазирањем пре него што извршите <code>git p4 submit</code>.
Такође приметите да су се SHA-1 хешеви свих комитова који су достављени као скупови измена променили; то је зато што <em>git-p4</em> додаје линију на крај сваког комита који конвертује:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log -1
commit 775a46f630d8b46535fc9983cf3ebe6b9aa53145
Author: John Doe &lt;john@example.com&gt;
Date:   Sun Aug 31 10:31:44 2014 -0800

    Change page title

    [git-p4: depot-paths = "//depot/www/live/": change = 12144]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Шта се дешава ако покушате да доставите комит спајања?
Хајде да пробамо.
Ево ситуације у којој смо се нашли:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --oneline --all --graph --decorate
* 3be6fd8 (HEAD, master) Correct email address
*   1dcbf21 Merge remote-tracking branch 'p4/master'
|\
| * c4689fc (p4/master, p4/HEAD) Grammar fix
* | cbacd0a Table borders: yes please
* | b4959b6 Trademark
|/
* 775a46f Change page title
* 05f1ade Update link
* 75cd059 Update copyright
* 70eaf78 Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Гит и Перфорс историје су се разишле након 775a46f.
Гит страна има два комита, па затим комит спајања са Перфорс главом, затим још један комит.
Покушаћемо да их доставимо као један једини скуп измена на Перфорс страну.
Хајде да видимо шта би се догодило ако сада покушамо да доставимо:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 submit -n
Perforce checkout for depot path //depot/www/live/ located at /Users/ben/john_bens-mbp_8487/john_bens-mbp_8487/depot/www/live/
Would synchronize p4 checkout in /Users/ben/john_bens-mbp_8487/john_bens-mbp_8487/depot/www/live/
Would apply
  b4959b6 Trademark
  cbacd0a Table borders: yes please
  3be6fd8 Correct email address</code></pre>
</div>
</div>
<div class="paragraph">
<p>Заставица <code>-n</code> је скраћеница за <code>--dry-run</code>, а то покушава да извести шта би се догодило ако би се команда достављања заиста извршила.
У овом случају изгледа да би се креирала три Перфорс скупа измена, што се подудара са три комитова који нису спајање и који још увек не постоје на Перфорс серверу.
То звучи управо као оно што желимо, па хајде да видимо како ће да испадне:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 submit
[…]
$ git log --oneline --all --graph --decorate
* dadbd89 (HEAD, p4/master, p4/HEAD, master) Correct email address
* 1b79a80 Table borders: yes please
* 0097235 Trademark
* c4689fc Grammar fix
* 775a46f Change page title
* 05f1ade Update link
* 75cd059 Update copyright
* 70eaf78 Initial import of //depot/www/live/ from the state at revision #head</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наша историја је постала линеарна, као да смо је ребазирали пре подношења (што се у суштини заиста и десило).
Ово значи да на Гит страни слободно можете да креирате гране, радите на њима, бришете их и спајате без страха да ће ваша историја на неки начин постати некомпатибилна са програмом Перфорс.
Ако можете да је ребазирате, можете и да је пошаљете на Перфорс сервер.</p>
</div>
</div>
<div class="sect5">
<h6 id="_git_p4_branches">Гранање</h6>
<div class="paragraph">
<p>Ако ваш Перфорс пројекат има више грана, ипак имате среће; <em>git-p4</em> то може да обради на начин да којим се чини као да је природно у програму Гит.
Рецимо да је ваш Перфорс депо постављен на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>//depot
  └── project
      ├── main
      └── dev</code></pre>
</div>
</div>
<div class="paragraph">
<p>И рецимо да имате <code>dev</code> грану која поседује следећу спецификацију погледа:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>//depot/project/main/... //depot/project/dev/...</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Git-p4</em> може аутоматски да детектује такву ситуацију и уради одговарајућу ствар:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git p4 clone --detect-branches //depot/project@all
Importing from //depot/project@all into project
Initialized empty Git repository in /private/tmp/project/.git/
Importing revision 20 (50%)
    Importing new branch project/dev

    Resuming with change 20
Importing revision 22 (100%)
Updated branches: main dev
$ cd project; git log --oneline --all --graph --decorate
* eae77ae (HEAD, p4/master, p4/HEAD, master) main
| * 10d55fb (p4/project/dev) dev
| * a43cfae Populate //depot/project/main/... //depot/project/dev/....
|/
* 2b83451 Project init</code></pre>
</div>
</div>
<div class="paragraph">
<p>Приметите спецификатор „@all” у путањи депоа; он говори <em>git-p4</em> да клонира не само последњи скуп измена за то подстабло, већ и све скупове измена које су икада дотакле те путање.
То је приближније концепту клонирања у програму Гит, али ако радите на пројекту са дугачком историјом, могло би да потраје.</p>
</div>
<div class="paragraph">
<p>Заставица <code>--detect-branches</code> налаже да <em>git-p4</em> искористи Перфорс спецификације гране за мапирање грана у Гит референце.
Ако се ова мапирања не налазе на Перфорс серверу (што је савршено исправан начин да се користи Перфорс), можете сами навести <em>git-p4</em> мапирања грана, па добијате исти резултат:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git init project
Initialized empty Git repository in /tmp/project/.git/
$ cd project
$ git config git-p4.branchList main:dev
$ git clone --detect-branches //depot/project@all .</code></pre>
</div>
</div>
<div class="paragraph">
<p>Постављање <code>git-p4.branchList</code> конфигурационе променљиве на <code>main:dev</code> говори команди <em>git-p4</em> да су и „main” и „dev” гране, као и да је друга дете прве.</p>
</div>
<div class="paragraph">
<p>Ако сада извршимо <code>git checkout -b dev p4/project/dev</code> и направимо неколико комитова, <em>git-p4</em> је довољно паметна да циља на праву грану када извршимо <code>git p4 submit</code>.
Нажалост, <em>git-p4</em> не може да меша плитке клонове и вишеструке гране; ако имате огроман пројекат и желите да радите на више од једне гране, мораћете да извршите <code>git p4 clone</code> по једном за сваку грану на коју желите да достављате измене.</p>
</div>
<div class="paragraph">
<p>За креирање или интегрисање грана мораћете да користите Перфорс клијент.
<em>Git-p4</em> може само да синхронизује и доставља на постојеће гране и то само као један линеарни скуп измена одједном.
Ако у програму Гит спојите две гране и покушате да доставите нови скуп измена, све што ће се забележити биће гомила измена над фајловима; изгубиће се сви метаподаци о гранама које су умешане у интеграцију.</p>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_гит_и_перфорс_резиме">Гит и Перфорс резиме</h4>
<div class="paragraph">
<p><em>Git-p4</em> омогућава да се са Перфорс сервером употребљава Гит процес рада, и прилично је добра у томе.
Међутим, важно је упамтити да је Перфорс управља изворним кодом, а ви програм Гит користите само за рад у локалу.
Само будите врло пажљиви са дељењем Гит комитова; ако имате удаљени репозиторијум који користе и други људи, не гурајте било које комитове који већ нису достављени Перфорс серверу.</p>
</div>
<div class="paragraph">
<p>Ако желите да слободно мешате упторебу програма Перфорс и програма Гит као клијената за контролу изворног кода, а администратора сервера можете убедити да га инсталира, <em>Git Fusion</em> чини да Гит постане првокласни клијент Перфорс сервера за контролу верзија.</p>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>