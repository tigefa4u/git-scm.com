---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: sr
  chapter:
    title: Гранање у програму Гит
    number: 3
  section:
    title: Основе гранања и спајања
    number: 2
    cs_number: '3.2'
    previous: book/sr/v2/Гранање-у-програму-Гит-Укратко-о-гранању
    next: book/sr/v2/Гранање-у-програму-Гит-Управљање-гранама
title: Git - Основе гранања и спајања
url: "/book/sr/v2/Гранање-у-програму-Гит-Основе-гранања-и-спајања.html"
---
<h2 id="_основе_гранања_и_спајања">Основе гранања и спајања</h2>
<div class="paragraph">
<p>Хајде да прођемо кроз једноставан пример гранања и спајања у процесу рада какав се често јавља у реалном свету.
Пратићете ове инструкције:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Одрадићете неки посао на веб сајту.</p>
</li>
<li>
<p>Направите грану за нову корисничку причу на којој радите.</p>
</li>
<li>
<p>Одрадићете нешто на тој грани.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>У овом тренутку, добићете позив да постоји критичан проблем који морате да решите истог тренутка.
Урадићете следеће:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Пребацићете се на грану за продукцију.</p>
</li>
<li>
<p>Направићете нову грану на којој ћете додати кôд који решава проблем.</p>
</li>
<li>
<p>Када га тестирате, спојићете грану са решењем проблема, и гурнућете на продукцију.</p>
</li>
<li>
<p>Вратићете се назад на корисничку причу на којој сте радили и наставити посао.</p>
</li>
</ol>
</div>
<div class="sect3">
<h3 id="_basic_branching">Основе гранања</h3>
<div class="paragraph">
<p>
Најпре, претпоставимо да радите на пројекту у коме на <code>master</code> грани већ имате неколико комитова.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-1.png" >}}" alt="Једноставна историја комитова">
</div>
<div class="title">Слика 18. Једноставна историја комитова</div>
</div>
<div class="paragraph">
<p>Одлучили сте да ћете радити на проблему <code>#53</code> који се налази на неком систему за праћење проблема који користи ваша компанија.
Да бисте направили грану и истовремено скочили на њу, извршите команду <code>git checkout</code> са прекидачем <code>-b</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b iss53
Switched to a new branch "iss53"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово је скраћеница за:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch iss53
$ git checkout iss53</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-2.png" >}}" alt="Креирање новог показивача на грану">
</div>
<div class="title">Слика 19. Креирање новог показивача на грану</div>
</div>
<div class="paragraph">
<p>Радите неке ствари на свом веб сајту и вршите неке комитове.
Док то радите, грана <code>iss53</code> се креће унапред, јер сте је одјавили (односно, <code>HEAD</code> показује на њу):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ vim index.html
$ git commit -a -m 'Create new footer [issue 53]'</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-3.png" >}}" alt="Грана `iss53` се померила напред у складу с послом који сте обавили">
</div>
<div class="title">Слика 20. Грана <code>iss53</code> се померила унапред у складу с послом који сте обавили</div>
</div>
<div class="paragraph">
<p>Сада добијате позив да постоји проблем са веб сајтом, и морате одмах да га поправите.
Са програмом Гит, не морате да решавате проблем заједно са <code>iss53</code> променама које сте направили, и не морате да улажете много труда у то да опозовете те промене пре него што почнете рад на примени исправке за оно што је у продукцији.
Потребно је само да се пребаците назад на <code>master</code> грану.</p>
</div>
<div class="paragraph">
<p>Ипак, пре него што то урадите, обратите пажњу на то да ако ваш радни директоријум или стејџ има некомитоване промене које су у конфликту са граном коју одјављујете, програм Гит вам неће дозволити да промените грану.
Најбоље да радно стање буде чисто вршите скок између грана.
Постоје начини да се ово заобиђе (наиме, скривање и исправљање комита) које ћемо обрадити касније, у <a href="{{< relurl "book/sr/v2/ch00/_git_stashing" >}}">Скривање и чишћење</a>.
Засад, претпоставимо да сте комитовали све промене, тако да се безбедно можете вратити на <code>master</code> грану:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
Switched to branch 'master'</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом тренутку, радни директоријум вашег пројекта изгледа исто онако како је изгледао пре него што сте почели да радите на проблему #53, па можете да се концентришете на хитни случај.
Ово је битна ствар коју треба запамтити: када мењате гране, програм Гит ресетује радни директоријум тако да изгледа онако како је изгледао када сте последњи пут комитовали на тој грани.
Аутоматски додаје, брише и мења фајлове тако да ваша радна копија изгледа тачно онако како је изгледала када сте на грани урадили последњи комит.</p>
</div>
<div class="paragraph">
<p>Следеће, треба да решите хитан проблем.
Направићемо <code>hotfix</code> грану на којој ћемо радити све док не решимо проблем:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b hotfix
Switched to a new branch 'hotfix'
$ vim index.html
$ git commit -a -m 'Fix broken email address'
[hotfix 1fb7853] Fix broken email address
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-4.png" >}}" alt="`Hotfix` грана базирана на `master` грани">
</div>
<div class="title">Слика 21. <code>Hotfix</code> грана базирана на <code>master</code> грани</div>
</div>
<div class="paragraph">
<p>Сада можете да тестирате оно што сте урадили, да будете сигурни да је проблем решен и да грану <code>hotfix</code> спојите назад са граном <code>master</code>.
Ово можете да урадите командом <code>git merge</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
$ git merge hotfix
Updating f42c576..3a0874c
Fast-forward
 index.html | 2 ++
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом комиту ћете приметити израз „fast-forward” (премотавање унапред).
Пошто се комит <code>C4</code> на који показује грана <code>hotfix</code> коју сте се спојили налазио директно испред комита <code>C2</code> на ком се налазите, програм Гит једноставно помера показивач унапред.
Да то преформулишемо, када покушате да спојите један комит са комитом до ког се може стићи пратећи историју првог комита, програм Гит поједностављује ствари тако што само помери показивач унапред, јер нема раздвојеног рада којом би требало се спаја — ово зове премотавање унапред.</p>
</div>
<div class="paragraph">
<p>Промена се сада налази у снимку комита на који показује <code>master</code> грана, па можете да примените исправку.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-5.png" >}}" alt="`master` се премотала унапред до `hotfix`">
</div>
<div class="title">Слика 22. <code>master</code> се премотала унапред до <code>hotfix</code>
</div>
</div>
<div class="paragraph">
<p>Када се примени ваша супер-важна исправка, време је да се вратите на оно што сте радили пре него што сте били прекинути.
Ипак, најпре ћете обрисати <code>hotfix</code> грану, јер вам више није потребна — <code>master</code> грана показује на исто место.
Можете је обрисати помоћу опције <code>-d</code> команде <code>git branch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d hotfix
Deleted branch hotfix (3a0874c).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада можете да се вратите на свој тикет #53 и настављате да радите на њему.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout iss53
Switched to branch "iss53"
$ vim index.html
$ git commit -a -m 'Finish the new footer [issue 53]'
[iss53 ad82d7a] Finish the new footer [issue 53]
1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-branching-6.png" >}}" alt="Рад се наставља на `iss53`">
</div>
<div class="title">Слика 23. Рад се наставља на <code>iss53</code>
</div>
</div>
<div class="paragraph">
<p>Овде вреди напоменути да се посао који сте одрадили у грани <code>hotfix</code> не садржи у фајловима на грани <code>iss53</code>.  Ако треба да га повучете у њу, можете да спојите грану <code>master</code> у грану <code>iss53</code> извршавањем команде <code>git merge master</code>, или можете да сачекате са интегрисањем тих промена док касније не одлучите да повучете грану <code>iss53</code> назад у <code>master</code>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_basic_merging">Основе спајања</h3>
<div class="paragraph">
<p>
Претпоставимо да сте одлучили да је ваш рад на проблему #53 готов и да је кôд спреман за спајање са <code>master</code> граном.
Да бисте то урадили, спојићете грану <code>iss53</code> са граном <code>master</code>, као што сте раније спојили <code>hotfix</code> грану.
Све што треба да урадите јесте да одјавите грану у коју желите да спојите и да онда извршите <code>git merge</code> команду:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
Switched to branch 'master'
$ git merge iss53
Merge made by the 'recursive' strategy.
index.html |    1 +
1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово изгледа мало другачије од ранијег спајања <code>hotfix</code> гране.
У овом случају, историја вашег развоја се раздвојила од неке старије тачке.
Пошто комит на грани на којој се налазите није директан предак гране у коју спајате, програм Гит мора одради неки посао.
У овом случају, програм Гит ради једноставан троструки спој, користећи два снимка на које показују врхови грана и њихов заједнички предак.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-merging-1.png" >}}" alt="Три снимка који се користе у типичном спајању">
</div>
<div class="title">Слика 24. Три снимка који се користе у типичном спајању</div>
</div>
<div class="paragraph">
<p>Уместо да само помери показивач гране унапред, програм Гит прави нови снимак који је резултат овог троструког спајања и аутоматски прави нови комит који показује на њега.
Ово се назива комит спајања <em>(merge commit)</em> и посебан је једино у том смислу што има више од једног родитеља.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-merging-2.png" >}}" alt="Комит спајања">
</div>
<div class="title">Слика 25. Комит спајања</div>
</div>
<div class="paragraph">
<p>Сада када је комплетан рад спојен, више нема потребе за <code>iss53</code> граном.
Можете да затворите тикет у вашем систему за праћење проблема и да обришете грану:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d iss53</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_basic_merge_conflicts">Основни конфликти при спајању</h3>
<div class="paragraph">
<p>
Овај процес често неће тећи овако глатко.
Ако сте у две различите гране које спајате променили исти део истог фајла на различит начин, програм Гит неће моћи лепо да их споји.
Ако је ваша исправка за тикет #53 изменила исти део фајла као и <code>hotfix</code> грана, добићете конфликт при спајању који изгледа отприлике овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge iss53
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Програм Гит није аутоматски направио нови комит спајања.
Паузирао је процес док ви не решите конфликт.
Ако желите да видите који фајлови нису спојени у било ком тренутну након конфликта при спајању, треба да извршите <code>git status</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git status
On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")

Unmerged paths:
  (use "git add &lt;file&gt;..." to mark resolution)

    both modified:      index.html

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Све што има конфликте при спајању који нису решени наведено је под неспојено <em>(unmerged)</em>.
Програм Гит додаје стандардне маркере за решавање конфликта у фајлове са конфликтима, тако да ручно можете да их отворите и решите конфликте.
Фајл садржи секцију која изгледа слично овоме:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html
&lt;div id="footer"&gt;contact : email.support@github.com&lt;/div&gt;
=======
&lt;div id="footer"&gt;
 please contact us at support@github.com
&lt;/div&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово значи да је верзија у <code>HEAD</code> (ваша <code>master</code> грана, јер сте то одјавили када сте покренули команду <code>merge</code>) на врху тог блока (све изнад <code>=======</code>), док је верзија из гране <code>iss53</code> приказана у доњем делу.
Да бисте решили конфликт, морате или да изаберете једну или другу страну, или да ручно спојите садржину фајла.
На пример, овај конфликт се може решити тако што ћете цео горњи блок заменити следећим:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="footer"&gt;
please contact us at email.support@github.com
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово решење има помало текста из обе секције, а линије <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code>=======</code> и <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code> су комплетно уклоњене.
Након што решите сваку од оваквих секција у сваком фајлу са конфликтом, извршите <code>git add</code> за сваки фајл чиме означавате да је разрешен.
У програму Гит, стејџовање фајла означава да је конфликт разрешен.</p>
</div>
<div class="paragraph">
<p>Ако желите да користите графички алат за решавање оваквих проблема, можете да извршите команду <code>git mergetool</code>, која покреће одговарајући визуелни алат и води вас кроз конфликте:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git mergetool

This message is displayed because 'merge.tool' is not configured.
See 'git mergetool --tool-help' or 'git help config' for more details.
'git mergetool' will now attempt to use one of the following tools:
opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff diffuse diffmerge ecmerge p4merge araxis bc3 codecompare vimdiff emerge
Merging:
index.html

Normal merge conflict for 'index.html':
  {local}: modified file
  {remote}: modified file
Hit return to start merge resolution tool (opendiff):</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако хоћете да користите неки други алат за спајање који није подразумевани (у овом случају је програм Гит је изабрао <code>opendiff</code> јер је команда била покренута на Меку), можете видети све подржане алате наведене при врху након „one of the following tools”.
Једноставно укуцајте име алата који бисте радије користили.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ако су вам потребни напреднији алати за решавање компликованих конфликта при спајању, погледаћемо неке од њих у <a href="{{< relurl "book/sr/v2/ch00/_advanced_merging" >}}">Напредно спајање</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Када изађете из алата за решавање конфликта при спајању, програм Гит ће вас питати да ли је спајање било успешно.
Ако скрипти одговорите да јесте, она ће стејџовати фајл и уместо вас га означити као разрешен.
Можете да извршите <code>git status</code> и тако се уверите да су сви конфликти разрешени:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git status
On branch master
All conflicts fixed but you are still merging.
  (use "git commit" to conclude merge)

Changes to be committed:

    modified:   index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако сте задовољни тиме и ако сте потврдили да је све што је имало конфликте сада на стејџу, можете да откуцате <code>git commit</code> чиме завршавате комит спајања.
Подразумевана комит порука изгледа слично овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Merge branch 'iss53'

Conflicts:
    index.html
#
# It looks like you may be committing a merge.
# If this is not correct, please remove the file
#	.git/MERGE_HEAD
# and try again.


# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# All conflicts fixed but you are still merging.
#
# Changes to be committed:
#	modified:   index.html
#</code></pre>
</div>
</div>
<div class="paragraph">
<p>Можете да измените ову комит поруку додавањем детаља о томе како сте разрешили спој ако мислите да ће то бити корисно другима који буду гледали ово спајање у будућности — зашто сте урадили то што сте урадили, ако није очигледно.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>