---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: sr
  chapter:
    title: Гит и остали системи
    number: 9
  section:
    title: Мигрирање на Гит
    number: 2
    cs_number: '9.2'
    previous: book/sr/v2/Гит-и-остали-системи-Гит-као-клијент
    next: book/sr/v2/Гит-и-остали-системи-Резиме
title: Git - Мигрирање на Гит
url: "/book/sr/v2/Гит-и-остали-системи-Мигрирање-на-Гит.html"
---
<h2 id="_migrating">Мигрирање на Гит</h2>
<div class="paragraph">
<p>
Ако имате постојећу базу кода у неком другом VCS али сте одлучили да почнете користити програм Гит, морате да мигрирате пројекат на један или други начин.
Овај одељак представља неке увознике за уобичајене системе, па онда приказује како можете да израдите свој сопствени.
Научићете како да увезете податке из неколико других већих SCM који се професионално користе, зато што њих користи већина корисника који желе да начине промену и због тога што је једноставно доћи до високо квалитетних алата за њих.</p>
</div>
<div class="sect3">
<h3 id="_subversion">Subversion</h3>
<div class="paragraph">
<p>

Ако сте читали претходни одељак о коришћењу <code>git svn</code>, та упутства можете лако да следите и направите <code>git svn clone</code> репозиторијума; па затим престанете да користите Subversion сервер, гурнете на нови Гит сервер и почнете то да користите.
Ако вам је потребна историја, добићете је онолико брзо колико је потребно да повучете податке са Subversion сервера (што може да потраје).</p>
</div>
<div class="paragraph">
<p>Међутим, увоз није савршен; а пошто ће потрајати прилично дуго, такође можете да га урадите и како треба.
Први проблем су информације о аутору.
У програму Subversion, свака особа која комитује има корисничко име на систему које се бележи у комит информацијама.
Примери у претходном одељку приказују на неким местима <code>schacon</code>, као што је излаз команди <code>blame</code> и <code>git svn log</code>.
Ако ово желите да мапирате у боље Гит податке о аутору, потребно вам је мапирање из Subversion корисника на Гит ауторе.
Креирајте фајл под именом <code>users.txt</code> који ово мапирање има у следећем формату:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>schacon = Scott Chacon &lt;schacon@geemail.com&gt;
selse = Someo Nelse &lt;selse@geemail.com&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да бисте добили листу имена аутора које користи SVN, извршите следеће:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ svn log --xml | grep author | sort -u | \
  perl -pe 's/.*&gt;(.*?)&lt;.*/$1 = /'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово генерише лог излаз у XML формату, затим задржава само линије са информацијама о аутору, одбацује дупликате и уклања XML ознаке.
Очигледно је да функционише само на машини са инсталираним <code>grep</code>, <code>sort</code>, и <code>perl</code>.
Затим, преусмерава узлаз у ваш <code>users.txt</code> фајл тако да уз сваку ставку можете додати податке еквивалентног Гит корисника.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ако ово пробате на Виндоуз машини, на овом месту ћете наићи на проблем.
Мајкрософт је понудио неколико добрих савета и примера на адреси <a href="https://docs.microsoft.com/en-us/azure/devops/repos/git/perform-migration-from-svn-to-git" class="bare">https://docs.microsoft.com/en-us/azure/devops/repos/git/perform-migration-from-svn-to-git</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Овај фајл можете доставити команди <code>git svn</code> и помогнете јој да прецизније мапира податке о аутору.
<code>git svn</code> такође можете наложити да не укључи метаподатке које Subversion обично увози, ако команди <code>clone</code> или <code>init</code> проследите <code>--no-metadata</code>.
Метаподаци садрже <code>git-svn-id</code> у свакој комит поруци коју ће програм Гит генерисати током увоза.
То ће да претрпа ваш Гит лог, па може постати донекле нејасан.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ако комитове направљене у Гит репозиторијуму желите да пресликате назад у оригинални SVN репозиторијум, мораћете да очувате метаподатке.
Ако у свом логу комитова не желите синхронизацију, слободно изоставите параметар <code>--no-metadata</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Тако да ваша <code>import</code> команда изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git svn clone http://my-project.googlecode.com/svn/ \
      --authors-file=users.txt --no-metadata --prefix "" -s my_project
$ cd my_project</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада би у <code>my_project</code> директоријуму требало да имате лепше увезене Subversion податке.
Уместо да комитови изгледају на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>commit 37efa680e8473b615de980fa935944215428a35a
Author: schacon &lt;schacon@4c93b258-373f-11de-be05-5f7a86268029&gt;
Date:   Sun May 3 00:12:22 2009 +0000

    fixed install - go to trunk

    git-svn-id: https://my-project.googlecode.com/svn/trunk@94 4c93b258-373f-11de-
    be05-5f7a86268029</code></pre>
</div>
</div>
<div class="paragraph">
<p>они изгледају овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>commit 03a8785f44c8ea5cdb0e8834b7c8e6c469be2ff2
Author: Scott Chacon &lt;schacon@geemail.com&gt;
Date:   Sun May 3 00:12:22 2009 +0000

    fixed install - go to trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Не само да поље <em>Author</em> изгледа много боље, већ се ту више не налази ни <code>git-svn-id</code>.</p>
</div>
<div class="paragraph">
<p>Такође би требало мало и да почистите након увоза.
Било би добро да почистите чудне референце које је поставила <code>git svn</code>.
Најпре ћете преместити ознаке тако заиста постану ознаке, е не чудне удаљене гране, па ћете затим преместити остатак грана тако да постану локалне.</p>
</div>
<div class="paragraph">
<p>Да би ознаке постале прописне Гит ознаке, извршите:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ for t in $(git for-each-ref --format='%(refname:short)' refs/remotes/tags); do git tag ${t/tags\//} $t &amp;&amp; git branch -D -r $t; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово узима референце које су биле удаљене гране, а почињу на <code>remotes/origin/tags/</code> и претвара их у праве (просте) ознаке.</p>
</div>
<div class="paragraph">
<p>Затим, преместите остатак референци под <code>refs/remotes</code> тако да постану локалне гране:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ for b in $(git for-each-ref --format='%(refname:short)' refs/remotes); do git branch $b refs/remotes/$b &amp;&amp; git branch -D -r $b; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>Може се догодити да видите неке додатне гране које имају <code>@xxx</code> суфикс (где је xxx број), док у Subversion видите само једну грану.
Ово је заправо Subversion могућност под називом „peg-revisions” и програм Гит за то једноставно нема одговарајући синтаксни елемент.
Стога, <code>git svn</code> просто додаје број svn верзије имену гране на исти начин као што бисте ви и ви урадили у svn како би се обратили peg-ревизији те гране.
Ако више не водите рачуна о peg-ревизијама, једноставно их уклоните:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ for p in $(git for-each-ref --format='%(refname:short)' | grep @); do git branch -D $p; done</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада су све старе гране праве Гит гране и све старе ознаке праве Гит ознаке.</p>
</div>
<div class="paragraph">
<p>Постоји још једна ствар која треба да се почисти.
Нажалост, <code>git svn</code> креира додатну грану под називом <code>trunk</code> и која се мапира на подразумевану грану у Subversion, али <code>trunk</code> референца показује на исто место као и <code>master</code>.
Пошто <code>master</code> више одговара Гит стилу, ево како да уклоните додатну грану:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d trunk</code></pre>
</div>
</div>
<div class="paragraph">
<p>Последња ствар који треба да урадите је да свој нови Гит сервер додате као удаљени репозиторијум и да гурнете на њега.
Ево примера како да додате свој сервер као удаљени репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add origin git@my-git-server:myrepository.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Пошто желите да све ваше гране и ознаке оду узводно, требало би да извршите следеће:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin --all
$ git push origin --tags</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада би све ваше гране и ознаке требало да се налазе на Гит серверу након финог, чистог увоза.</p>
</div>
</div>
<div class="sect3">
<h3 id="_меркуријал">Меркуријал</h3>
<div class="paragraph">
<p>
Пошто Меркуријал и Гит имају прилично сличне моделе за представљање верзија, а како је програм Гит мало флексибилнији, конвертовање репозиторијума из Меркуријал у Гит је прилично лако, употребом алата под називом <em>hg-fast-export,</em> који прво треба да преузмете:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone http://repo.or.cz/r/fast-export.git /tmp/fast-export</code></pre>
</div>
</div>
<div class="paragraph">
<p>Први корак конверзије је да преузмете потпуни клон Меркуријал репозиторијума који желите да конвертујете:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ hg clone &lt;URL адреса удаљеног репозиторијума&gt; /tmp/hg-repo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наредни корак је креирање фајла за мапирање аутора.
Меркуријал није толико стриктан као Гит у вези тога шта ће ставити у поље аутора скупа измена, тако да је ово добар тренутак да мало поспремите кућу.
Генерисање овог фајла је једнолинијска команда у <code>bash</code> љуски:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd /tmp/hg-repo
$ hg log | grep user: | sort | uniq | sed 's/user: *//' &gt; ../authors</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово ће потрајати неколико секунди, зависно од величине историје пројекта, па ће након тога фајл <code>/tmp/authors</code> изгледати отприлике овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>bob
bob@localhost
bob &lt;bob@company.com&gt;
bob jones &lt;bob &lt;AT&gt; company &lt;DOT&gt; com&gt;
Bob Jones &lt;bob@company.com&gt;
Joe Smith &lt;joe@company.com&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>У овом примеру, иста особа (Bob) је креирала скупове измена користећи четири различита имена, од којих једно изгледа коректно, а једно би било потпуне неисправно за Гит комит.
<em>Hg-fast-export</em> вам омогућава да ово исправите тако што сваку линију претворите у правило: <code>"&lt;улаз&gt;"="&lt;излаз&gt;"</code>, које мапира <code>&lt;улаз&gt;</code> у <code>&lt;излаз&gt;</code>.
Унутар стрингова <code>&lt;улаз&gt;</code> и <code>&lt;излаз&gt;</code>, подржавају се сви означени низови које препознаје Пајтон <code>string_escape</code> кодирање.
Ако фајл мапирања аутора не садржи одговарајући <code>&lt;улаз&gt;</code>, онда се тај аутор шаље програму Гит неизмењен.
Ако сва корисничка имена изгледају како треба, нема потребе да се овај фајл исправља.
У овом примеру, желимо да наш фајл изгледа на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>"bob"="Bob Jones &lt;bob@company.com&gt;"
"bob@localhost"="Bob Jones &lt;bob@company.com&gt;"
"bob &lt;bob@company.com&gt;"="Bob Jones &lt;bob@company.com&gt;"
"bob jones &lt;bob &lt;AT&gt; company &lt;DOT&gt; com&gt;"="Bob Jones &lt;bob@company.com&gt;"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Наредни корак је да креирамо наш нови Гит репозиторијум и да извршимо скрипту за извоз:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git init /tmp/converted
$ cd /tmp/converted
$ /tmp/fast-export/hg-fast-export.sh -r /tmp/hg-repo -A /tmp/authors</code></pre>
</div>
</div>
<div class="paragraph">
<p>Заставица <code>-r</code> говори <em>hg-fast-export</em> где да пронађе Меркуријал репозиторијум који желимо да конвертујемо, а заставица <code>-A</code> говори где да пронађе фајл са мапирањима аутора.
Скрипта парсира Меркуријал скупове измена и конвертује их у скрипту за „fast-import” могућност програма Гит (коју ћемо детаљно приказати мало касније).
Ово ће потрајати (мада је <em>много</em> брже него што би било преко мреже), а излаз је прилично детаљан:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ /tmp/fast-export/hg-fast-export.sh -r /tmp/hg-repo -A /tmp/authors
Loaded 4 authors
master: Exporting full revision 1/22208 with 13/0/0 added/changed/removed files
master: Exporting simple delta revision 2/22208 with 1/1/0 added/changed/removed files
master: Exporting simple delta revision 3/22208 with 0/1/0 added/changed/removed files
[…]
master: Exporting simple delta revision 22206/22208 with 0/4/0 added/changed/removed files
master: Exporting simple delta revision 22207/22208 with 0/2/0 added/changed/removed files
master: Exporting thorough delta revision 22208/22208 with 3/213/0 added/changed/removed files
Exporting tag [0.4c] at [hg r9] [git :10]
Exporting tag [0.4d] at [hg r16] [git :17]
[…]
Exporting tag [3.1-rc] at [hg r21926] [git :21927]
Exporting tag [3.1] at [hg r21973] [git :21974]
Issued 22315 commands
git-fast-import statistics:
---------------------------------------------------------------------
Alloc'd objects:     120000
Total objects:       115032 (    208171 duplicates                  )
      blobs  :        40504 (    205320 duplicates      26117 deltas of      39602 attempts)
      trees  :        52320 (      2851 duplicates      47467 deltas of      47599 attempts)
      commits:        22208 (         0 duplicates          0 deltas of          0 attempts)
      tags   :            0 (         0 duplicates          0 deltas of          0 attempts)
Total branches:         109 (         2 loads     )
      marks:        1048576 (     22208 unique    )
      atoms:           1952
Memory total:          7860 KiB
       pools:          2235 KiB
     objects:          5625 KiB
---------------------------------------------------------------------
pack_report: getpagesize()            =       4096
pack_report: core.packedGitWindowSize = 1073741824
pack_report: core.packedGitLimit      = 8589934592
pack_report: pack_used_ctr            =      90430
pack_report: pack_mmap_calls          =      46771
pack_report: pack_open_windows        =          1 /          1
pack_report: pack_mapped              =  340852700 /  340852700
---------------------------------------------------------------------

$ git shortlog -sn
   369  Bob Jones
   365  Joe Smith</code></pre>
</div>
</div>
<div class="paragraph">
<p>И то је скоро све у вези конверзије.
Све Меркуријал ознаке су конвертоване у Гит ознаке, а Меркуријал гране и маркери су конвертовани у Гит гране.
Сада сте спремни да гурнете репозиторијум узводно на његово ново место на серверу:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add origin git@my-git-server:myrepository.git
$ git push origin --all</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_базаар">Базаар</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Базаар је DVCS алат који веома личи на Гит, па је стога прилично једноставно конвертовати Базаар репозиторијум у Гит.
Да бисте то постигли, потребан вам је <code>bzr-fastimport</code> додатак.</p>
</div>
<div class="sect4">
<h4 id="_преузимање_bzr_fastimport_додатка">Преузимање bzr-fastimport додатка</h4>
<div class="paragraph">
<p>Процедура за инсталацију <em>fastimport</em> додатка се разликује на Виндоуз и системима сличним Јуниксу.
У другом случају је најједноставније да инсталирате <code>bzr-fastimport</code> пакет који ће инсталирати и све неопходне зависности.</p>
</div>
<div class="paragraph">
<p>На пример, на Дебијан и системима изведеним из њега, урадили бисте следеће:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo apt-get install bzr-fastimport</code></pre>
</div>
</div>
<div class="paragraph">
<p>На RHEL, урадили бисте следеће:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo yum install bzr-fastimport</code></pre>
</div>
</div>
<div class="paragraph">
<p>На Федори, почевши од издања 22, нови менаџер пакета је <em>dnf:</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo dnf install bzr-fastimport</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако пакет није доступан, можете да га инсталирате као додатак:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ mkdir --parents ~/.bazaar/plugins     # creates the necessary folders for the plugins
$ cd ~/.bazaar/plugins
$ bzr branch lp:bzr-fastimport fastimport   # imports the fastimport plugin
$ cd fastimport
$ sudo python setup.py install --record=files.txt   # installs the plugin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да би овај додатак радио, такође вам је потребан и <code>fastimport</code> Пајтон модул.
Следећим командама можете проверити да ли је присутан или не и инсталирати га ако треба:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ python -c "import fastimport"
Traceback (most recent call last):
  File "&lt;string&gt;", line 1, in &lt;module&gt;
ImportError: No module named fastimport
$ pip install fastimport</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако није доступан, преузмите га са адресе <a href="https://pypi.python.org/pypi/fastimport/" class="bare">https://pypi.python.org/pypi/fastimport/</a>.</p>
</div>
<div class="paragraph">
<p>У првом случају (на Виндоуз систему), <code>bzr-fastimport</code> се аутоматски инсталира са самосталном верзијом и подразумеваном инсталацијом (оставите штиклирана сва поља).
Тако да у овом случају није потребно да било шта урадите.</p>
</div>
<div class="paragraph">
<p>Сада се начин увоза Базаар репозиторијума разликује у зависности од тога да ли имате једну грану или радите са репозиторијумом који има неколико грана.</p>
</div>
</div>
<div class="sect4">
<h4 id="_пројекти_са_једном_граном">Пројекти са једном граном</h4>
<div class="paragraph">
<p>Извршите <code>cd</code> у директоријум који садржи ваш Базаар репозиторијум и иницијализујте Гит репозиторијум:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd /path/to/the/bzr/repository
$ git init</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада једноставно извезете свој Базаар репозиторијум и конвертујете га у Гит репозиторијум следећом командом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ bzr fast-export --plain . | git fast-import</code></pre>
</div>
</div>
<div class="paragraph">
<p>Зависно од величине пројекта, ваш Гит репозиторијум се изграђује у року од неколико секунди до неколико минута.</p>
</div>
</div>
<div class="sect4">
<h4 id="_случај_пројекта_са_главном_граном_и_радним_гранама">Случај пројекта са главном граном и радним гранама</h4>
<div class="paragraph">
<p>Такође можете да увезете и Базаар репозиторијум који садржи гране.
Претпоставимо да имате две гране: једна представља главну грану (myProject.trunk), а друга је радна грана (myProject.work).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ls
myProject.trunk myProject.work</code></pre>
</div>
</div>
<div class="paragraph">
<p>Креирајте Гит репозиторијум и извршите <code>cd</code> у њега:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git init git-repo
$ cd git-repo</code></pre>
</div>
</div>
<div class="paragraph">
<p>Повуците <code>master</code> грану у Гит:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ bzr fast-export --export-marks=../marks.bzr ../myProject.trunk | \
git fast-import --export-marks=../marks.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Повуците радну грану у Гит:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ bzr fast-export --marks=../marks.bzr --git-branch=work ../myProject.work | \
git fast-import --import-marks=../marks.git --export-marks=../marks.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада вам команда <code>git branch</code> приказује <code>master</code> грану као и <code>work</code> грану.
Проверите логове да потврдите јесу ли комплетни и решите се <code>marks.bzr</code> и <code>marks.git</code> фајлова.</p>
</div>
</div>
<div class="sect4">
<h4 id="_синхронизација_стејџа">Синхронизација стејџа</h4>
<div class="paragraph">
<p>Колико год грана да сте имали и који год метод за увоз употребили, ваш стејџ се не синхронизује са <code>HEAD</code>, а увозом неколико грана се чак ни ваш радни директоријум не синхронизује.
Ситуација се једноставно решава следећом командом:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git reset --hard HEAD</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_игнорисање_фајлова_који_су_игнорисани_са_bzrignore">Игнорисање фајлова који су игнорисани са <em>.bzrignore</em>
</h4>
<div class="paragraph">
<p>Хајде сада да погледамо како се игноришу фајлови.
Прва ствар коју треба да урадите је да преименујете <code>.bzrignore</code> у <code>.gitignore</code>.
Ако <code>.bzrignore</code> фајл садржи једну или неколико линија које почињу са „!!” или „RE:”, мораћете да измените и можда креирате и неколико <code>.gitignore</code> фајлова како би се игнорисали потпуно исти фајлови које је игнорисао и програм Базаар.</p>
</div>
<div class="paragraph">
<p>Коначно, мораћете да креирате комит који садржи ову измену за миграцију:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git mv .bzrignore .gitignore
$ # modify .gitignore if needed
$ git commit -am 'Migration from Bazaar to Git'</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_слање_вашег_репозиторијума_на_сервер">Слање вашег репозиторијума на сервер</h4>
<div class="paragraph">
<p>Ево нас!
Сада репозиторијум можете да гурнете на његов нови сервер:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add origin git@my-git-server:mygitrepository.git
$ git push origin --all
$ git push origin --tags</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ваш Гит репозиторијум је спреман за употребу.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_perforce_import">Перфорс</h3>
<div class="paragraph">
<p>
Наредни систем за који ћете видети процедуру увоза је Перфорс.
Као што смо разматрали изнад, постоји два начина да Гит и Перфорс комуницирају међусобно: <em>git-p4</em> и <em>Perforce Git Fusion</em>.</p>
</div>
<div class="sect4">
<h4 id="_perforce_git_fusion">Perforce Git Fusion</h4>
<div class="paragraph">
<p>”Git Fusion” чини овај процес прилично безболним.
Једноставно конфигуришете поставке вашег пројекта, мапирања корисника и гране користећи конфигурациони фајл (као што је разматрано у <a href="{{< relurl "book/sr/v2/ch00/_p4_git_fusion" >}}">Git Fusion</a>), и клонирате репозиторијум.
<em>Git Fusion</em> вам оставља оно што изгледа као природни Гит репозиторијум, који затим можете да гурнете на природни Гит хост ако желите.
Могли бисте чак да користите и Перфорс као свој Гит гост ако то желите.</p>
</div>
</div>
<div class="sect4">
<h4 id="_git_p4">Git-p4</h4>
<div class="paragraph">
<p><em>Git-p4</em> такође може да се понаша као алат за увоз.
Као пример, извршићемо увоз <em>Jam</em> пројекта из Перфорс јавног депоа.
Да бисте подесили свој клијент, прво морате да извезете променљиву окружења P4PORT тако да показује на Перфорс депо:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ export P4PORT=public.perforce.com:1666</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Да бисте могли пратити пример, потребан вам је Перфорс депо на који можете да се повежете.
У нашим примерима ћемо користити јавни депо на адреси public.perforce.com, али можете да користите било који депо на које имате приступ.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
Извршите команду <code>git p4 clone</code> да увезете <em>Jam</em> пројекат са Перфорс сервера, наводећи депо и путању пројекта, као и путању у коју желите да увезете пројекат:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git-p4 clone //guest/perforce_software/jam@all p4import
Importing from //guest/perforce_software/jam@all into p4import
Initialized empty Git repository in /private/tmp/p4import/.git/
Import destination: refs/remotes/p4/master
Importing revision 9957 (100%)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Овај пројекат има само једну грану, али ако имате гране конфигурисане да погледима на гране (или само скуп директоријума), можете да употребите заставицу <code>--detect-branches</code> уз команду <code>git p4 clone</code> да такође увезете и све гране пројекта.
За мало више детаља у вези овога, погледајте <a href="{{< relurl "book/sr/v2/ch00/_git_p4_branches" >}}">Гранање</a>.</p>
</div>
<div class="paragraph">
<p>У овом тренутку сте скоро готови.
Ако одете у <code>p4import</code> директоријум и извршите <code>git log</code>, видећете ваш увезени рад:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log -2
commit e5da1c909e5db3036475419f6379f2c73710c4e6
Author: giles &lt;giles@giles@perforce.com&gt;
Date:   Wed Feb 8 03:13:27 2012 -0800

    Correction to line 355; change &lt;/UL&gt; to &lt;/OL&gt;.

    [git-p4: depot-paths = "//public/jam/src/": change = 8068]

commit aa21359a0a135dda85c50a7f7cf249e4f7b8fd98
Author: kwirth &lt;kwirth@perforce.com&gt;
Date:   Tue Jul 7 01:35:51 2009 -0800

    Fix spelling error on Jam doc page (cummulative -&gt; cumulative).

    [git-p4: depot-paths = "//public/jam/src/": change = 7304]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Можете видети да је <code>git-p4</code> оставила идентификатор у свакој комит поруци.
Нема проблема да се тај идентификатор тамо задржи, у случају да вам је касније потребна референца на Перфорс број измене.
Међутим, ако желите да уклоните идентификатор, сада је право време за то – пре него што почнете рад на репозиторијуму.

За групно уклањање идентификатора можете употребити команду <code>git filter-branch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git filter-branch --msg-filter 'sed -e "/^\[git-p4:/d"'
Rewrite e5da1c909e5db3036475419f6379f2c73710c4e6 (125/125)
Ref 'refs/heads/master' was rewritten</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако извршите <code>git log</code> видећете да се се измениле све SHA-1 контролне суме комитова, али да се <code>git-p4</code> стрингови више не налазе у комит порукама:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log -2
commit b17341801ed838d97f7800a54a6f9b95750839b7
Author: giles &lt;giles@giles@perforce.com&gt;
Date:   Wed Feb 8 03:13:27 2012 -0800

    Correction to line 355; change &lt;/UL&gt; to &lt;/OL&gt;.

commit 3e68c2e26cd89cb983eb52c024ecdfba1d6b3fff
Author: kwirth &lt;kwirth@perforce.com&gt;
Date:   Tue Jul 7 01:35:51 2009 -0800

    Fix spelling error on Jam doc page (cummulative -&gt; cumulative).</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ваш увоз је спреман да се гурне на нови Гит сервер.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_custom_importer">Прилагодљиви увозник</h3>
<div class="paragraph">
<p>

Ако ваш систем није ниједан од горе наведених, требало би да на мрежи потражите алат за увоз – доступни су квалитетни алати за увоз из многих других система, укључујући CVS, Clear Case, Visual Source Safe, чак и директоријум архива.
Ако ниједан од њих не ради у вашем случају, имате прилично непознат алат, или вам је потребан још више прилагођени процес увоза, требало би да искористите <code>git fast-import</code>.
Ова команда чита једноставне инструкције са <em>stdin</em> за уписивање одређених Гит података.
На овај начин је много једноставније креирати Гит објекте него да извршавате сирове Гит команде, или да покушате уписивање сирових објеката (за више информација, погледајте <a href="{{< relurl "book/sr/v2/ch00/ch10-git-internals" >}}">Гит изнутра</a>).
На овај начин можете написати скрипту за увоз која чита неопходне информације из система који увозите и пише јасне инструкције на <em>stdout</em>.
Затим можете да покренете овај програм и спроведете његов излаз кроз <code>git fast-import</code>.</p>
</div>
<div class="paragraph">
<p>Да бисмо брзо показали, написаћете једноставан алат за увоз.
Претпоставимо да радите у <code>current</code>, повремено правите резервну копију свог пројекта копирњањем директоријума у временски обележен <code>back_YYYY_MM_DD</code> директоријум који чува резерве и желите да то увезете у програм Гит.
Структура ваших директоријума изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ls /opt/import_from
back_2014_01_02
back_2014_01_04
back_2014_01_14
back_2014_02_03
current</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да бисте увезли Гит директоријум, морате знати како програм Гит чува своје податке.
Вероватно се сећате, Гит је у основи увезана листа комит објеката који показују на снимак садржаја.
Све што треба да урадите је да команди <code>fast-import</code> кажете шта су снимци садржаја, који комит подаци указују на њих, и у ком редоследу се јављају.
Ваша стратегија ће бити да пролазите кроз снимке један по један и да креирате комитове са садржајем сваког директоријум, повезујући сваки комит са претходним.</p>
</div>
<div class="paragraph">
<p>Као што смо урадили у <a href="{{< relurl "book/sr/v2/ch00/_an_example_git_enforced_policy" >}}">Пример полисе коју спроводи програм Гит</a>, написаћемо то у Рубију, јер у општем случају радимо на том језику и углавном може лако да се чита.
Овај пример прилично лако можете да напишете на било ком језику који вам је близак – он само мора да испише одговарајуће информације на <code>stdout</code>.
А ако извршавате на Виндоуз систему, то значи да посебно морате пазити да не уведете <em>carriage returns</em> карактере на крај редове – <code>git fast-import</code> стриктно жели само <em>line feed (LF)</em> карактере, а не <em>carriage return line feed (CRLF)</em> комбинацију коју користи Виндоуз.</p>
</div>
<div class="paragraph">
<p>За почетак, прећи ћете у циљни директоријум и идентификоваћете свако поддиректоријум, од којих је сваки снимак који желите да увезете као комит.
Ући ћете у свако поддиректоријум и исписаћете команде које су неопходне да се извезе.
Ваша основна главна петља изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">last_mark = nil

# прођи кроз све директоријуме
Dir.chdir(ARGV[0]) do
  Dir.glob("*").each do |dir|
    next if File.file?(dir)

    # уђи у циљни директоријум
    Dir.chdir(dir) do
      last_mark = print_export(dir, last_mark)
    end
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Унутар сваког директоријума сте извршили функцију <code>print_export</code>, која узима манифест и маркер претходног снимка и враћа манифест и маркер тренутног; на тај начин можете исправно да их увежете.
„Маркер” је термин команде <code>fast-import</code> за идентификатор који постављате сваком комиту; док креирате комитове, сваком додељујете маркер који употребљавате да до њега дођете од осталих комитова.
Дакле, прва ствар коју треба да урадите у својој <code>print_export</code> методи је да из имена директоријума генеришете маркер:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">mark = convert_dir_to_mark(dir)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово ћете урадити тако што ћете направити низ директоријума и употребити вредност индекса као маркер, јер маркер мора бити целобројна вредност.
Ваша метода изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">$marks = []
def convert_dir_to_mark(dir)
  if !$marks.include?(dir)
    $marks &lt;&lt; dir
  end
  ($marks.index(dir) + 1).to_s
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада када имате целобројну представу вашег комита, потребан вам је датум за метаподатке комита.
Пошто је датум део имена директоријум, парсираћете га из њега.
Следећа линија у вашем <code>print_export</code> фајлу је:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">date = convert_dir_to_date(dir)</code></pre>
</div>
</div>
<div class="paragraph">
<p>где је <code>convert_dir_to_date</code> дефинисана као:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def convert_dir_to_date(dir)
  if dir == 'current'
    return Time.now().to_i
  else
    dir = dir.gsub('back_', '')
    (year, month, day) = dir.split('_')
    return Time.local(year, month, day).to_i
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово враћа целобројну вредност за датум сваког директоријума.
Последњи део метаподатака који вам је потребан за сваки комит су подаци о комитеру, које једноставно фиксирате у глобалној променљивој:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">$author = 'John Doe &lt;john@example.com&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада сте спремни да почнете испис комит података вашем алату за увоз.
Почетна информација наводи дефинишете комит објекат и грану на којој се налази, иза чега следи маркер који сте генерисали, информације о комитеру и комит порука, па затим претходни комит, ако постоји.
Кôд изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby"># print the import information
puts 'commit refs/heads/master'
puts 'mark :' + mark
puts "committer #{$author} #{date} -0700"
export_data('imported from ' + dir)
puts 'from :' + last_mark if last_mark</code></pre>
</div>
</div>
<div class="paragraph">
<p>Временску зону фиксирате (-0700) јер је тако једноставно да се изведе.
Ако увозите из неког другог система, временску зону морате да наведете као померај (у односу на зону у којој је ваш систем).
Комит порука мора да се наведе у посебном формату:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>data (size)\n(contents)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Формат се састоји из речи <em>data,</em> величине података који треба да се прочитају, прелома реда и коначно самих података.
Пошто је касније потребно да исти формат употребите за навођење фајла са садржајем, креираћете помоћну методу, <code>export_data</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def export_data(string)
  print "data #{string.size}\n#{string}"
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Преостало је само да за сваки снимак наведете садржај.
То је једноставно јер се сваки налази у посебном директоријуму – можете да га испишете <code>deleteall</code> командом након које следи садржај сваког фајла у директоријуму.
Програм Гит онда на одговарајући начин бележи сваки снимак:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">puts 'deleteall'
Dir.glob("**/*").each do |file|
  next if !File.file?(file)
  inline_data(file)
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Напомена: пошто многи системи на своје ревизије гледају као на промене од једног на други комит, <code>fast-import</code> такође може да прими и команде уз сваки комит које наводе који фајлови су додати, уклоњени или измењени, као шта је нови садржај.
Израчунали бисте разлике између снимака и доставили само те податке, али то је много компликованије – исто тако можете програму Гит да доставите све податке, па да њему препустите да одреди шта и како.
Ако је тако погодније за ваше податке, проверите <code>fast-import</code> ман страницу у вези детаља о томе како да податке доставите на овај начин.</p>
</div>
<div class="paragraph">
<p>Формат за испис садржаја новог фајла или за навођење измењеног фајла са новим садржајем је као што следи:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>M 644 inline путања/до/фајла
data (величина)
(садржај фајла)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Овде 644 представља режим (ако имате извршни фајл, морате то да откријете и да уместо овога наведете 755), а <em>inline</em> наводи да садржај следи непосредно након ове линије.
Ваша <code>inline_data</code> метода изгледа на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">def inline_data(file, code = 'M', mode = '644')
  content = File.read(file)
  puts "#{code} #{mode} inline #{file}"
  export_data(content)
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Поново искоришћавате <code>export_data</code> методу коју сте дефинисали раније, јер је начин исти као онај на који сте навели податке комит поруке.</p>
</div>
<div class="paragraph">
<p>Последње што треба да урадите је да вратите текући маркер, тако да се може проследити у наредну итерацију:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">return mark</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Белешка</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ако користите Виндоуз биће вам потребан још један корак.
Као што смо поменули раније, Виндоуз користи CRLF карактере као прелом реда, док команда <code>git fast-import</code> очекује само LF карактер.
Да бисте решили овај проблем и усрећили команду <code>git fast-import</code>, потребно је да Рубију наложите да уместо CRLF користи LF:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">$stdout.binmode</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>То је то.
Ево како изгледа комплетна скрипта:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">#!/usr/bin/env ruby

$stdout.binmode
$author = "John Doe &lt;john@example.com&gt;"

$marks = []
def convert_dir_to_mark(dir)
    if !$marks.include?(dir)
        $marks &lt;&lt; dir
    end
    ($marks.index(dir)+1).to_s
end


def convert_dir_to_date(dir)
    if dir == 'current'
        return Time.now().to_i
    else
        dir = dir.gsub('back_', '')
        (year, month, day) = dir.split('_')
        return Time.local(year, month, day).to_i
    end
end

def export_data(string)
    print "data #{string.size}\n#{string}"
end

def inline_data(file, code='M', mode='644')
    content = File.read(file)
    puts "#{code} #{mode} inline #{file}"
    export_data(content)
end

def print_export(dir, last_mark)
    date = convert_dir_to_date(dir)
    mark = convert_dir_to_mark(dir)

    puts 'commit refs/heads/master'
    puts "mark :#{mark}"
    puts "committer #{$author} #{date} -0700"
    export_data("imported from #{dir}")
    puts "from :#{last_mark}" if last_mark

    puts 'deleteall'
    Dir.glob("**/*").each do |file|
        next if !File.file?(file)
        inline_data(file)
    end
    mark
end


# Loop through the directories
last_mark = nil
Dir.chdir(ARGV[0]) do
    Dir.glob("*").each do |dir|
        next if File.file?(dir)

        # move into the target directory
        Dir.chdir(dir) do
            last_mark = print_export(dir, last_mark)
        end
    end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ако извршите ову скрипту, добићете садржај који отприлике изгледа овако:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ruby import.rb /opt/import_from
commit refs/heads/master
mark :1
committer John Doe &lt;john@example.com&gt; 1388649600 -0700
data 29
imported from back_2014_01_02deleteall
M 644 inline README.md
data 28
# Hello

This is my readme.
commit refs/heads/master
mark :2
committer John Doe &lt;john@example.com&gt; 1388822400 -0700
data 29
imported from back_2014_01_04from :1
deleteall
M 644 inline main.rb
data 34
#!/bin/env ruby

puts "Hey there"
M 644 inline README.md
(...)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Да бисте покренули алат за увоз, проследите овај излаз команди <code>git fast-import</code> док се налазите у Гит директоријуму у који желите да увезете податке.
Можете да креирате нови директоријум, па да у њему као први корак извршите <code>git init</code>, а затим покренете своју скрипту:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git init
Initialized empty Git repository in /opt/import_to/.git/
$ ruby import.rb /opt/import_from | git fast-import
git-fast-import statistics:
---------------------------------------------------------------------
Alloc'd objects:       5000
Total objects:           13 (         6 duplicates                  )
      blobs  :            5 (         4 duplicates          3 deltas of          5 attempts)
      trees  :            4 (         1 duplicates          0 deltas of          4 attempts)
      commits:            4 (         1 duplicates          0 deltas of          0 attempts)
      tags   :            0 (         0 duplicates          0 deltas of          0 attempts)
Total branches:           1 (         1 loads     )
      marks:           1024 (         5 unique    )
      atoms:              2
Memory total:          2344 KiB
       pools:          2110 KiB
     objects:           234 KiB
---------------------------------------------------------------------
pack_report: getpagesize()            =       4096
pack_report: core.packedGitWindowSize = 1073741824
pack_report: core.packedGitLimit      = 8589934592
pack_report: pack_used_ctr            =         10
pack_report: pack_mmap_calls          =          5
pack_report: pack_open_windows        =          2 /          2
pack_report: pack_mapped              =       1457 /       1457
---------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="paragraph">
<p>Као што можете видети, када се процес успешно заврши, враћа вам гомилу статистичких података о ономе што је урађено.
У овом случају, увезли сте укупно 13 објеката за 4 комита у 1 грану.
Сада можете да извршите <code>git log</code> и погледате своју нову историју:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log -2
commit 3caa046d4aac682a55867132ccdfbe0d3fdee498
Author: John Doe &lt;john@example.com&gt;
Date:   Tue Jul 29 19:39:04 2014 -0700

    imported from current

commit 4afc2b945d0d3c8cd00556fbe2e8224569dc9def
Author: John Doe &lt;john@example.com&gt;
Date:   Mon Feb 3 01:00:00 2014 -0700

    imported from back_2014_02_03</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ево финог чистог Гит репозиторијума.
Важно је приметити да се ништа не одјављује – у почетку немате ниједан фајл у свом радном директоријуму.
Да бисте их добили, своју грану најпре морате да ресетујете на место на којем се сада налази <code>master</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ls
$ git reset --hard master
HEAD is now at 3caa046 imported from current
$ ls
README.md main.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Алатом <code>fast-import</code> можете да урадите још много тога – обрађујете различите режиме, бинарне податке, вишеструке гране и спајања, ознаке, индикаторе напретка процеса и још тога.Већи број примера компликованијих сценарија можете да погледате у <code>contrib/fast-import</code> директоријуму изворног кода програма Гит.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>