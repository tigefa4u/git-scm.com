---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: sr
  chapter:
    title: Гранање у програму Гит
    number: 3
  section:
    title: Ребазирање
    number: 6
    cs_number: '3.6'
    previous: book/sr/v2/Гранање-у-програму-Гит-Удаљене-гране
    next: book/sr/v2/Гранање-у-програму-Гит-Резиме
title: Git - Ребазирање
url: "/book/sr/v2/Гранање-у-програму-Гит-Ребазирање.html"
---
<h2 id="_rebasing">Ребазирање</h2>
<div class="paragraph">
<p>
У програму Гит постоје два основна начина за интеграцију промена из једне гране у другу: <code>merge</code> и <code>rebase</code>.
У овом одељку ћете научити шта је ребазирање, како се ради, зашто је то прилично добар алат, као и када треба а када не треба да га користите.</p>
</div>
<div class="sect3">
<h3 id="_основно_ребазирање">Основно ребазирање</h3>
<div class="paragraph">
<p>Ако погледате ранији пример из <a href="{{< relurl "book/sr/v2/ch00/_basic_merging" >}}">Основе спајања</a>, видећете да сте разгранали свој рад и направили комитове на две различите гране.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-rebase-1.png" >}}" alt="Једноставна разграната историја">
</div>
<div class="title">Слика 35. Једноставна разграната историја</div>
</div>
<div class="paragraph">
<p>Као што смо већ раније показали, најлакши начин да интегришете гране је помоћу команде <code>merge</code>.
Она ће урадити троструко спајање између два последња снимка са грана (<code>C3</code> и <code>C4</code>) и њиховог најсвежијег заједничког претка (<code>C2</code>), стварајући нови снимак (и комит).</p>
</div>
<div id="rebasing-merging-example" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-rebase-2.png" >}}" alt="Спајање ради интеграције разгранате историје рада">
</div>
<div class="title">Слика 36. Спајање ради интеграције разгранате историје рада</div>
</div>
<div class="paragraph">
<p>Међутим, постоји још један начин: можете да узмете закрпу промене која је уведена у <code>C4</code> и да је поново примените преко <code>C3</code>.
У програму Гит се ово зове <em>ребазирање</em>.
<code>rebase</code> командом можете да узмете све промене које су комитоване у једну грану и да их поновите у некој другој.</p>
</div>
<div class="paragraph">
<p>У овом примеру, одјавили бисте грану <code>experiment</code>, па је затим ребазирали преко <code>master</code> гране на следећи начин:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout experiment
$ git rebase master
First, rewinding head to replay your work on top of it...
Applying: added staged command</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ова операција функционише тако што оде на заједничког претка двеју грана (оне на којој се тренутно налазите и оне преко које ребазирате), узима разлику која је створена сваким комитом у грани на којој се налазите, чува те разлике у привремене фајлове, ресетује тренутну грану на исти комит на коме је и грана преко које ребазирате и коначно, редом примењује сваку промену.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-rebase-3.png" >}}" alt="Ребазирање промена које су уведене у `C4` преко `C3`">
</div>
<div class="title">Слика 37. Ребазирање промена које су уведене у <code>C4</code> преко <code>C3</code>
</div>
</div>
<div class="paragraph">
<p>У овом тренутку можете да се вратите назад на <code>master</code> грану и да урадите спајање техником премотавања унапред.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
$ git merge experiment</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/basic-rebase-4.png" >}}" alt="Премотавање `master` гране унапред">
</div>
<div class="title">Слика 38. Премотавање <code>master</code> гране унапред</div>
</div>
<div class="paragraph">
<p>Сада је снимак на који показује <code>C4'</code> потпуно исти као и онај на који је показивао <code>C5</code> у <a href="{{< relurl "book/sr/v2/ch00/rebasing-merging-example" >}}">примеру спајања</a>.
Нема разлике у крајњем производу интеграције, али ребазирањем се постиже чистија историја.
Ако истражите лог ребазиране гране, изгледа као линеарна историја: изгледа као да се сав рад одвијао серијски, иако су се ствари заправо одвијале паралелно.</p>
</div>
<div class="paragraph">
<p>Ово ћете често радити када желите се ваши комитови примене чисто на удаљену грану — можда у пројекту којем желите да дате допринос, али који не одржавате.
У том случају, свој посао бисте радили у једној грани, па када будете спремни да пошаљете своје закрпе главном пројекту, ребазираћете свој рад преко <code>origin/master</code>.
На овај начин, одржавалац не мора да ради никакав посебан посао око интеграције — само треба да премота унапред или одради чисто примењивање.</p>
</div>
<div class="paragraph">
<p>Обратите пажњу на то да је завршни снимак на који показује коначни комит, било да је то последњи од ребазираних комитова у случају ребазирања, или коначни комит спајања након спајања, један те исти — само се историја разликује.
Ребазирање понавља у некој другој све промене урађене у једној линији рада и то редом којим су прављене, док спајање узима крајње тачке и спаја их.</p>
</div>
</div>
<div class="sect3">
<h3 id="_интересантнији_случајеви_ребазирања">Интересантнији случајеви ребазирања</h3>
<div class="paragraph">
<p>Ребазирање може да понови измене и над нечему другом, што није циљна грана ребазирања.
На пример, узмите историју као што је приказана на <a href="{{< relurl "book/sr/v2/ch00/rbdiag_e" >}}">Историја са тематском граном разгранатом од друге тематске гране</a>.
Разгранали сте тематску грану (<code>server</code>) да бисте у свој пројекат додали неку функционалност са серверске стране, па направили комит.
Онда сте разгранали и од ње да бисте направили неке промене на клијентској страни (<code>client</code>), па комитовали неколико пута.
Коначно, вратили сте се на <code>server</code> грану и направили још неколико комитова.</p>
</div>
<div id="rbdiag_e" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/interesting-rebase-1.png" >}}" alt="Историја са тематском граном разгранатом од друге тематске гране">
</div>
<div class="title">Слика 39. Историја са тематском граном разгранатом од друге тематске гране</div>
</div>
<div class="paragraph">
<p>Претпоставимо да сте одлучили да желите спојити ваше промене на клијентској страни са главном граном како би се објавиле, али желите да одложите промене на серверској страни док их боље не тестирате.
Можете да узмете промене са <code>client</code> гране које нису на <code>server</code> грани (<code>C8</code> и <code>C9</code>) и да их поновите преко <code>master</code> гране користећи опцију <code>--onto</code> команде <code>git rebase</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git rebase --onto master server client</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово у суштини каже „Провери грану <code>client</code>, одреди закрпе које су настале након што се одвојила од <code>server</code> гране, па их онда поново примени у грани <code>client</code> као да је уместо од <code>server</code> била одвојена директно од <code>master</code> гране”.
Мало је сложено, али резултат је одличан.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/interesting-rebase-2.png" >}}" alt="Ребазирање тематске гране разгранате из друге тематске гране">
</div>
<div class="title">Слика 40. Ребазирање тематске гране разгранате из друге тематске гране</div>
</div>
<div class="paragraph">
<p>Сада можете да премотате унапред грану <code>master</code> (погледајте <a href="{{< relurl "book/sr/v2/ch00/rbdiag_g" >}}">Премотавање <code>master</code> гране унапред тако да обухвати промене са гране <code>client</code></a>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
$ git merge client</code></pre>
</div>
</div>
<div id="rbdiag_g" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/interesting-rebase-3.png" >}}" alt="Премотавање `master` гране унапред тако да обухвати промене са гране">
</div>
<div class="title">Слика 41. Премотавање <code>master</code> гране унапред тако да обухвати промене са гране <code>client</code>
</div>
</div>
<div class="paragraph">
<p>Рецимо да сте одлучили да повучете и промене из <code>server</code> гране.
<code>server</code> грану можете да ребазирате преко <code>master</code> гране са <code>git rebase &lt;основна_грана&gt; &lt;тематска_грана&gt;</code> без потребе да је прво одјавите — ова команда прво одјави тематску грану (у овом случају <code>server</code>) и примењује пронађене промене на основну грану <code>master</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git rebase master server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ово понавља рад са <code>server</code> гране преко <code>master</code> гране, као што се види на <a href="{{< relurl "book/sr/v2/ch00/rbdiag_h" >}}">Ребазирање <code>server</code> гране преко <code>master</code> гране</a>.</p>
</div>
<div id="rbdiag_h" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/interesting-rebase-4.png" >}}" alt="Ребазирање `server` гране преко `master` гране">
</div>
<div class="title">Слика 42. Ребазирање <code>server</code> гране преко <code>master</code> гране</div>
</div>
<div class="paragraph">
<p>Затим премотате унапред основну грану (<code>master</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
$ git merge server</code></pre>
</div>
</div>
<div class="paragraph">
<p>Сада можете да обришете гране <code>client</code> и <code>server</code> јер је сав рад обављен на њима интегрисан и више вам неће бити потребне, а историја рада након овог процеса ће изгледати као на <a href="{{< relurl "book/sr/v2/ch00/rbdiag_i" >}}">Коначна историја комитова</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d client
$ git branch -d server</code></pre>
</div>
</div>
<div id="rbdiag_i" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/interesting-rebase-5.png" >}}" alt="Коначна историја комитова">
</div>
<div class="title">Слика 43. Коначна историја комитова</div>
</div>
</div>
<div class="sect3">
<h3 id="_rebase_peril">Опасности ребазирања</h3>
<div class="paragraph">
<p>
Ах, али блаженство ребазирања није без мана, што се може сумирати само једном реченицом:</p>
</div>
<div class="paragraph">
<p><strong>Не ребазирајте комитове који постоје ван вашег репозиторијума и на којима су људи можда засновали свој рад.</strong></p>
</div>
<div class="paragraph">
<p>Ако се држите ове смернице, све ће бити у реду.
У супротном ће вас људи мрзети, а породица и пријатељи ће вас презирати.</p>
</div>
<div class="paragraph">
<p>Када нешто ребазирате, ви напуштате постојеће комитове и стварате нове који су им слични, али су ипак другачији.
Ако комитове гурнете негде и остали их повуку, па базирају свој рад над њима, а ви затим поново напишете те комитове са <code>git rebase</code> и гурнете их поново, ваши сарадници ће морати да поново споје сав свој рад и онда ће настати хаос када пробате да повучете њихов рад назад у свој.</p>
</div>
<div class="paragraph">
<p>Погледајмо пример који показује како ребазирани рад који сте учинили јавно доступним може изазвати проблеме.
Претпоставимо да сте направили клон са централног сервера и онда радили нешто почевши од њега.
Историја комитова изгледа овако:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/perils-of-rebasing-1.png" >}}" alt="Клонирани репозиторијум над којим сте обавили неки посао.">
</div>
<div class="title">Слика 44. Клонирани репозиторијум над којим сте обавили неки посао</div>
</div>
<div class="paragraph">
<p>Сада, неко други уради још нешто што укључи и спајање, а затим гурне све на централни сервер.
Ви то преузмете и спојите нову удаљену грану са оним што сте урадили, тако да историја изгледа некако овако:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/perils-of-rebasing-2.png" >}}" alt="Преузимање још комитова и спајање са личним радом.">
</div>
<div class="title">Слика 45. Преузимање још комитова и спајање са личним радом</div>
</div>
<div class="paragraph">
<p>Затим, особа која је гурнула спојен рад одлучи да се врати назад и уместо спајања ребазира оно што је одрадила; изврши <code>git push --force</code> како би се преписала историја на серверу.
Ви онда преузмете податке са тог сервера, довлачећи нове комитове.</p>
</div>
<div id="_pre_merge_rebase_work" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/perils-of-rebasing-3.png" >}}" alt="Неко гурне ребазиране комитове, напуштајући комитове над којима сте базирали ваш рад.">
</div>
<div class="title">Слика 46. Неко гурне ребазиране комитове, напуштајући комитове над којима сте базирали ваш рад</div>
</div>
<div class="paragraph">
<p>Сада сте обоје у сосу.
Ако извршите <code>git pull</code>, направићете комит спајања који укључује обе линије историје, и ваш репозиторијум ће изгледати овако:</p>
</div>
<div id="_merge_rebase_work" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/perils-of-rebasing-4.png" >}}" alt="Поновно спајање истог рада у нови комит спајања">
</div>
<div class="title">Слика 47. Поновно спајање истог рада у нови комит спајања</div>
</div>
<div class="paragraph">
<p>Ако извршите <code>git log</code> када ваша историја изгледа овако, видећете два комита који имају истог аутора, време и поруку, што ће унети забуну.
Штавише, ако гурнете ову историју назад на сервер, поново ћете увести све те ребазиране комитове на централни сервер, што ће још више збунити људе.
Прилично је безбедно претпоставити се да други програмер не жели да се <code>C4</code> и <code>C6</code> нађу у историји; то је разлог зашто су и радили ребазирање.</p>
</div>
</div>
<div class="sect3">
<h3 id="_rebase_rebase">Ребазирање када ребазирате</h3>
<div class="paragraph">
<p>Ако се <strong>ипак</strong> нађете у оваквој ситуацији, програм Гит има још неке чаролије које вам могу помоћи.
Ако неко из тима насилно гурне промене које препишу рад над којем сте ви базирали свој рад, изазов који вам се намеће је да одредите шта је ваше, а шта је та особа преписала.</p>
</div>
<div class="paragraph">
<p>Испоставља се да поред SHA-1 контролне суме комита, програм Гит рачуна и контролну суму која је базирана само на закрпи која је уведена комитом.
Ово се зове „идентификациони број закрпе” <em>(patch-id)</em>.</p>
</div>
<div class="paragraph">
<p>Ако повучете рад који је преписан и ребазирате га преко нових комитова вашег партнера, програм Гит често сам може успешно да одреди шта је јединствено ваше и да примени то назад на врх нове гране.</p>
</div>
<div class="paragraph">
<p>На пример, ако у претходном сценарију када смо били код <a href="{{< relurl "book/sr/v2/ch00/_pre_merge_rebase_work" >}}">Неко гурне ребазиране комитове, напуштајући комитове над којима сте базирали ваш рад</a> уместо спајања извршимо <code>git rebase teamone/master</code>, програм Гит ће:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>одредити који рад је јединствен за нашу грану (<code>C2</code>, <code>C3</code>, <code>C4</code>, <code>C6</code> и <code>C7</code>),</p>
</li>
<li>
<p>одредити шта нису комитови спајања (<code>C2</code>, <code>C3</code> и <code>C4</code>),</p>
</li>
<li>
<p>одредити шта није било преписано у одредишну грану (само <code>C2</code> и <code>C3</code>, пошто је <code>C4</code> иста закрпа као и <code>C4'</code>) и</p>
</li>
<li>
<p>применити те комитове на врх <code>teamone/master</code> гране.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Тако да ћемо, уместо резултата који видимо на <a href="{{< relurl "book/sr/v2/ch00/_merge_rebase_work" >}}">Поновно спајање истог рада у нови комит спајања</a>, добити нешто што више подсећа на <a href="{{< relurl "book/sr/v2/ch00/_rebase_rebase_work" >}}">Ребазирање преко насилно гурнутог ребазираног рада</a>.</p>
</div>
<div id="_rebase_rebase_work" class="imageblock">
<div class="content">
<img src="{{< relurl "book/sr/v2/images/perils-of-rebasing-5.png" >}}" alt="Ребазирање преко насилно гурнутог ребазираног рада">
</div>
<div class="title">Слика 48. Ребазирање преко насилно гурнутог ребазираног рада</div>
</div>
<div class="paragraph">
<p>Ово ће функционисати само ако су <code>C4</code> и <code>C4'</code> који је ваш партнер направио скоро идентична закрпа.
У супротном, ребазирање неће моћи да установи да је то дупликат и додаће још једну закрпу која подсећа на <code>C4</code> (и која вероватно неће моћи чисто да се примени, јер би промене бар донекле већ биле тамо).</p>
</div>
<div class="paragraph">
<p>Ово можете да упростите и извршавањем <code>git pull --rebase</code> уместо обичног <code>git pull</code>.
Или можете то ручно да урадите са <code>git fetch</code> за којим у овом случају следи git rebase teamone/master`.</p>
</div>
<div class="paragraph">
<p>Ако користите <code>git pull</code> и желите да <code>--rebase</code> буде подразумевана опција, можете да подесите <code>pull.rebase</code> вредност из конфигурационог фајла на <code>true</code> са <code>git config --global pull.rebase true</code>.</p>
</div>
<div class="paragraph">
<p>Ако само ребазирате комитове који никада нису напустили ваш рачунар, све ће бити у реду.
Ако ребазирате комитове који су били гурнути, али нико други није на њима базирао свој рад, такође неће бити проблема.
Ако ребазирате комитове који су већ гурнути јавно и могуће је да су људи базирали свој рад на тим комитовима, онда ћете се наћи у фрустрирајућим ситуацијама и бићете мета презира својих сарадника.</p>
</div>
<div class="paragraph">
<p>Ако ви или партнер у неком тренутку схватите да је овакав след догађаја неопходан, постарајте се да сви остали знају да треба да изврше <code>git pull --rebase</code> и тако пробају да макар донекле упросте проблем који настаје након ребазирања.</p>
</div>
</div>
<div class="sect3">
<h3 id="_ребазирање_против_спајања">Ребазирање против спајања</h3>
<div class="paragraph">
<p>
Сада када сте видели како функционише ребазирање а како спајање, можда се питате шта је боље.
Пре него што дамо одговор на ово, хајде да начинимо корак уназад и попричамо мало о томе шта је заправо историја.</p>
</div>
<div class="paragraph">
<p>Једна тачка гледишта је да историја комитова вашег репозиторијума представља <strong>запис онога што се заправо догодило</strong>.
То је историјски документ, вредан сам по себи, па не би требало да се преправља.
Из овог угла, мењање историје комита је скоро па богохуљење; ви <em>лажете</em> о ономе што се заправо догодило.
Шта онда радити када се догоди серија збрканих комитова спајања?
Па, ствари су се тако догодиле и репозиторијум треба да сачува то за потомство.</p>
</div>
<div class="paragraph">
<p>Супротна тачка гледишта је да историја комитова представља <strong>причу о томе како је пројекат направљен.</strong>
Не бисте објавили прву скицу књиге, па зашто да прикажете свој траљави посао?
Када радите на пројекту, може вам бити потребан запис о свим погрешним корацима које се начинили и свим ћорсокацима у које сте ушли, али када дође време да објавите свету свој рад, пожелећете да прикажете прецизнију причу о томе како се долази од тачке А до тачке Б.
Овај табор користи алате као што је ребазирање и филтер гране да поново испише комитове пре него што се споје у главну грану.
Употребом алата <code>rebase</code> и <code>filter-branch</code> они причају причу на начин који је најбољи за будуће читаоце.</p>
</div>
<div class="paragraph">
<p>Сада, што се тиче питања да ли је боље спајање или ребазирање: надамо се да ћете увидети да ствари нису тако једноставне.
Програм Гит је моћан алат, допушта вам да урадите многе ствари са својом историјом, али сваки тим и сваки пројекат је другачији.
Сада када знате како обе ове ствари раде, на вама је да одлучите шта је боље за вашу конкретну ситуацију.</p>
</div>
<div class="paragraph">
<p>А можете да добијете и најбоље из оба света: ребазирајте локалне промене него што их гурнете како бисте пречистили свој рад, али никада немојте да ребазирате било шта што сте негде гурнули.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>