---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: az
  chapter:
    title: Server’də Git
    number: 4
  section:
    title: Server qurmaq
    number: 4
    cs_number: '4.4'
    previous: book/az/v2/Server’də-Git-Sizin-öz-SSH-Public-Key’nizi-yaratmaq
    next: book/az/v2/Server’də-Git-Git-Daemon
title: Git - Server qurmaq
url: "/book/az/v2/Server’də-Git-Server-qurmaq.html"
---
<h2 id="_setting_up_server">Server qurmaq</h2>
<div class="paragraph">
<p>Gəlin server tərəfində SSH girişini quraraq gəzək.
Bu nümunədə istifadəçilərinizin identifikasiyası üçün <code>authorized_keys</code> metodundan istifadə edəcəksiniz.
Ubuntu kimi standart Linux distributorunda işlədiyinizi güman edirik.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Burada təsvir edilənlərin yaxşı bir hissəsi, manual kopyalama və public key-ləri quraşdırmaq yerinə <code>ssh-copy-id</code> əmrindən istifadə etməklə avtomatlaşdırıla bilər.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Birincisi, bir istifadəçi hesabı və bu istifadəçi üçün <em>.ssh</em> qovluğu yaradırsınız.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo adduser git
$ su git
$ cd
$ mkdir .ssh &amp;&amp; chmod 700 .ssh
$ touch .ssh/authorized_keys &amp;&amp; chmod 600 .ssh/authorized_keys</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bundan sonra, <code>git</code> istifadəçisi üçün <code>authorized_keys</code> faylına bəzi developer SSH public key-lərini əlavə etməlisiniz.
Güman edək ki, bəzi etibarlı public key-ləriniz var və onları müvəqqəti sənədlərdə saxlamısınız.
Yenə public key-lər bu kimi bir şeyə bənzəyir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /tmp/id_rsa.john.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4L
ojG6rs6hPB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4k
Yjh6541NYsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9Ez
Sdfd8AcCIicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myiv
O7TCUSBdLQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPq
dAv8JggJICUvax2T9va5 gsg-keypair</code></pre>
</div>
</div>
<div class="paragraph">
<p>Onları sadəcə <code>.ssh</code> qovluğundakı <code>git</code> istifadəçinin <code>authorized_keys</code> faylına əlavə edirsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /tmp/id_rsa.john.pub &gt;&gt; ~/.ssh/authorized_keys
$ cat /tmp/id_rsa.josie.pub &gt;&gt; ~/.ssh/authorized_keys
$ cat /tmp/id_rsa.jessica.pub &gt;&gt; ~/.ssh/authorized_keys</code></pre>
</div>
</div>
<div class="paragraph">
<p>İndi, <code>--bare</code> seçimi ilə <code>git init</code> əmrindən istifadə edərək boş bir depo qura bilərsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cd /srv/git
$ mkdir project.git
$ cd project.git
$ git init --bare
Initialized empty Git repository in /srv/git/project.git/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sonra, John, Josie və ya Jessica, layihənin ilk versiyasını uzaqdan əlavə edərək branch-a push edərək həmin depo içərisinə push edə bilər.
Diqqət yetirin ki, kimsə bir layihə əlavə etmək istədikdə maşına shell verməli və çılpaq bir depo yaratmalıdır.
<code>git</code> istifadəçi və depo qurduğunuz serverin hostname olaraq <code>gitserver</code>-dən istifadə edək.
Bunu daxili işlədirsinizsə və bu serverə işarə etmək üçün <code>gitserver</code> üçün DNS qurursunuzsa, əmrləri olduğu kimi istifadə edə bilərsiniz (<code>myproject</code> içərisində faylları olan bir layihə olduğuna inanaraq):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># on John's computer
$ cd myproject
$ git init
$ git add .
$ git commit -m 'Initial commit'
$ git remote add origin git@gitserver:/srv/git/project.git
$ git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu zaman digərləri onu klonlaşdıra bilər və dəyişiklikləri asanlıqla geri qaytara bilər:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone git@gitserver:/srv/git/project.git
$ cd project
$ vim README
$ git commit -am 'Fix for README file'
$ git push origin master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu metodla bir ovuc developer üçün Git serverini oxumaq/yazmaq üçün tez bir zamanda əldə edə bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Qeyd etməlisiniz ki, hazırda bu istifadəçilərin hamısı serverə girib <code>git</code> istifadəçisi kimi bir shell əldə edə bilərlər.
Bunu məhdudlaşdırmaq istəyirsinizsə, shell-in <code>/etc/passwd</code> faylındakı başqa bir şeyə dəyişdirməlisiniz.</p>
</div>
<div class="paragraph">
<p>Git ilə əlaqəli <code>git-shell</code> adlı məhdud bir alət vasitəsi ilə <code>git</code> istifadəçi hesabını yalnız Git ilə əlaqəli fəaliyyətlə asanlıqla məhdudlaşdıra bilərsiniz.
Bunu <code>git</code> istifadəçi hesabının giriş shell-i kimi qursanız, o zaman bu hesab serverinizə normal shell çıxışı əldə edə bilməz.
Bunun üçün <code>bash</code> və <code>csh</code>  əvəzinə <code>git-shell</code> daxil edin.
Bunu etmək üçün əvvəlcə <code>git-shell</code> əmrinin tam path adını onsuz da olmadıqda <code>/etc/shells</code>-ə əlavə etməlisiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat /etc/shells   # see if git-shell is already in there. If not...
$ which git-shell   # make sure git-shell is installed on your system.
$ sudo -e /etc/shells  # and add the path to git-shell from last command</code></pre>
</div>
</div>
<div class="paragraph">
<p>İndi isə <code>chsh &lt;username&gt; -s &lt;shell&gt;</code> istifadə edərək istifadəçi üçün shell düzəldə bilərsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ sudo chsh git -s $(which git-shell)</code></pre>
</div>
</div>
<div class="paragraph">
<p>İndi <code>git</code> istifadəçisi hələ də SSH bağlantısından Git depolarını push və pull etmık üçün istifadə edə bilər, ancaq maşın üzərində shell qoya bilmir.
Əgər cəhd etsəniz, giriş üçün rədd cavabı görəcəksiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh git@gitserver
fatal: Interactive git shell is not enabled.
hint: ~/git-shell-commands should exist and have read and execute access.
Connection to gitserver closed.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu nöqtədə, istifadəçilər hələ də git serverin çata biləcəyi hər hansı bir hosta daxil olmaq üçün SSH portunu istifadə edə bilərlər.
Bunun qarşısını almaq istəyirsinizsə, <code>authorized_keys</code> faylını düzəldə bilərsiniz və məhdudlaşdırmaq istədiyiniz hər key-ə aşağıdakı seçimləri göndərə bilərsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nəticə belə görünəcəkdir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat ~/.ssh/authorized_keys
no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa
AAAAB3NzaC1yc2EAAAADAQABAAABAQCB007n/ww+ouN4gSLKssMxXnBOvf9LGt4LojG6rs6h
PB09j9R/T17/x4lhJA0F3FR1rP6kYBRsWj2aThGw6HXLm9/5zytK6Ztg3RPKK+4kYjh6541N
YsnEAZuXz0jTTyAUfrtU3Z5E003C4oxOj6H0rfIF1kKI9MAQLMdpGW1GYEIgS9EzSdfd8AcC
IicTDWbqLAcU4UpkaX8KyGlLwsNuuGztobF8m72ALC/nLF6JLtPofwFBlgc+myivO7TCUSBd
LQlgMVOFq1I2uPWQOkOWQAHukEOmfjy2jctxSDBQ220ymjaNsHT4kgtZg2AYYgPqdAv8JggJ
ICUvax2T9va5 gsg-keypair

no-port-forwarding,no-X11-forwarding,no-agent-forwarding,no-pty ssh-rsa
AAAAB3NzaC1yc2EAAAADAQABAAABAQDEwENNMomTboYI+LJieaAY16qiXiH3wuvENhBG...</code></pre>
</div>
</div>
<div class="paragraph">
<p>İndi Git şəbəkə əmrləri hələ də yaxşı işləyəcək, lakin istifadəçilər bir shell əldə edə bilməyəcəklər.
Çıxışda deyildiyi kimi <code>git-shell</code> əmrini bir az tənzimləyən <code>git</code> istifadəçi ev qovluğunda bir qovluq da qura bilərsiniz.
Məsələn, serverin qəbul edəcəyi Git əmrlərini məhdudlaşdıra bilərsiniz və ya istifadəçilərin belə bir şəkildə SSH etməyə çalışdıqlarını görən mesajı düzəldə bilərsiniz.
Shell-in fərdiləşdirilməsi haqqında daha çox məlumat üçün <code>git help shell</code>-i işə salın.</p>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>