---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: az
  chapter:
    title: Git’in Daxili İşləri
    number: 10
  section:
    title: Transfer Protokolları
    number: 6
    cs_number: '10.6'
    previous: book/az/v2/Git’in-Daxili-İşləri-Refspec
    next: book/az/v2/Git’in-Daxili-İşləri-Maintenance-və-Məlumatların-Bərpası
title: Git - Transfer Protokolları
url: "/book/az/v2/Git’in-Daxili-İşləri-Transfer-Protokolları.html"
---
<h2 id="_transfer_protokolları">Transfer Protokolları</h2>
<div class="paragraph">
<p>Git iki depo arasında məlumatları iki əsas şəkildə ötürə bilər: “dumb' protokolu və ``smart” protokolu.
Bu bölmə bu iki əsas protokolun necə işlədiyini tez bir zamanda əhatə edəcəkdir.</p>
</div>
<div class="sect3">
<h3 id="_the_dumb_protokolu">The Dumb Protokolu</h3>
<div class="paragraph">
<p>Yalnız bir oxunuşda HTTP üzərindən təqdim ediləcək bir depo qurursanız, dumb protokolundan istifadə edilməsi ehtimalı böyükdür.
Bu protokol “dumb” adlanır, çünki nəqliyyat prosesi zamanı server tərəfində Git-ə məxsus bir kod tələb olunmur; gətirmə prosesi, müştərinin serverdəki Git deposunun tərtibatını qəbul edə biləcəyi bir sıra HTTP <code>GET</code> istəkləridir.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Bu günlərdə dumb protokolu kifayət qədər nadir hallarda istifadə olunur.
Təhlükəsizliyi təmin etmək və ya özəlləşdirmək çətindir, buna görə də Git host-larının əksəriyyəti (həm cloud əsaslı, həm də on-premises) istifadə etməkdən imtina edəcəkdir.
Ümumiyyətlə bir azdan izah etdiyimiz daha ağıllı protokoldan istifadə etməyiniz tövsiyə olunur.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Simplegit kitabxanası üçün <code>http-fetch</code> prosesini izləyək:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone http://server/simplegit-progit.git</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu əmrin ilk işi <code>info/refs</code> faylını pull etməkdir.
Bu fayl <code>update-server-info</code> əmri ilə yazılmışdır, bu səbəbdən HTTP nəqlinin düzgün işləməsi üçün bunu <code>post-receive</code> hook olaraq təmin etməlisiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET info/refs
ca82a6dff817ec66f44342007202690a93763949     refs/heads/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Artıq remote istinadların və SHA-1-lərin siyahısı var.
Daha sonra, HEAD istinadının nə olduğunu axtarırsınız, belə ki bitirdikdən sonra nəyi yoxlayacağınızı biləcəksiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET HEAD
ref: refs/heads/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prosesi tamamladıqdan sonra <code>master</code> branch-nı yoxlamalısınız.
Bu anda gəzinti prosesinə başlamağa hazırsınız.
Başlanğıc nöqtəniz <code>info/refs</code> faylında gördüyünüz <code>ca82a6</code> commit obyekti olduğundan, bunu əldə etməyə başlayırsınız:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/ca/82a6dff817ec66f44342007202690a93763949
(179 bytes of binary data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bir obyekt geri alırsınız – hanı ki, bu obyekt serverdə boş formatda olur və onu statik bir HTTP GET istəyi üzərinə götürmüşdünüz.
Siz onu zlib-uncompress edə bilər, başlığı soyub, məzmuna baxa bilərsiniz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git cat-file -p ca82a6dff817ec66f44342007202690a93763949
tree cfda3bf379e4f8dba8717dee55aab78aef7f4daf
parent 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
author Scott Chacon &lt;schacon@gmail.com&gt; 1205815931 -0700
committer Scott Chacon &lt;schacon@gmail.com&gt; 1240030591 -0700

Change version number</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sonra, sizin alacağınız daha iki obyektiniz var - yeni aldığımız commit-in göstərdiyi məzmun ağacından olan <code>cfda3b</code> və valideyn olan <code>085bb3</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/08/5bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
(179 bytes of data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>O sizə bir sonrakı obyekt commit-ini verir.
Ağac obyektini götürün:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/cf/da3bf379e4f8dba8717dee55aab78aef7f4daf
(404 - Not Found)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Oy! – belə görünür ki bu ağac obyekti serverdə boş formatda deyil, buna görə 404 cavabını geri alırsınız.
Bunun bir neçə səbəbi ola bilər - obyekt alternativ bir depoda ola bilər və ya bu depodakı packfile-da da ola bilər.
Git əvvəlcə siyahıda göstərilən alternativləri yoxlayır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/info/http-alternates
(empty file)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Əgər o, alternativ URL-lərin siyahısı ilə geri qayıdırsa, Git boş faylları və packfile-ları yoxlayır - bu, bir-birinə çəngəllənən layihələrin diskdəki obyektləri paylaşması üçün gözəl bir mexanizmdir.
Bununla birlikdə, bu vəziyyətdə alternativlər göstərilmədiyindən, obyektiniz packfile-da olmalıdır.
Bu serverdə hansı packfile-ların mövcud olduğunu görmək üçün bunların siyahısını ehtiva edən (<code>update-server-info</code> tərəfindən yaradılan) <code>objects/info/packs</code> faylını əldə etməlisiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/info/packs
P pack-816a9b2334da9953e530f27bcac22082a9f5b835.pack</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serverdə yalnız bir packfile var, buna görə obyektiniz açıq-aydın şəkildə oradadır, ancaq əmin olmaq üçün indeks faylını yoxlayacaqsınız.
Serverdə birdən çox packfile-nız varsa, bu da sizə lazım olan obyekti hansı packfile-da görə biləcəyiniz üçün faydalıdır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/pack/pack-816a9b2334da9953e530f27bcac22082a9f5b835.idx
(4k of binary data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Artıq packfile indeksinə sahib olduğunuzdan, obyektinizin içində olub olmadığını görə bilərsiniz - çünki indeks packfile-nızdakı obyektlərin SHA-1-lərini və həmin obyektlərin əvəzlərini siyahıya alır.
Hədəfiniz oradadır, davam edin və bütün packfile-ı əldə edin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET objects/pack/pack-816a9b2334da9953e530f27bcac22082a9f5b835.pack
(13k of binary data)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Indi sizin ağac obyektiniz mövcuddur və siz commit-lərinizi yeritməyə davam edə bilərsiniz.
Onların hamısı həm də hal-hazırda yüklədiyiniz packfile-da olduğundan serverə başqa request-lər göndərməyinizə ehtiyac yoxdur.
Git əvvəlində yüklədiyiniz HEAD arayışı ilə işarə edilən <code>master</code> branch-ın işləyən bir nüsxəsini yoxlayır.</p>
</div>
</div>
<div class="sect3">
<h3 id="_the_smart_protokolu">The Smart Protokolu</h3>
<div class="paragraph">
<p>Dumb protokolu sadə, lakin bir az səmərəsizdir və müştəridən serverə məlumat yazmaqla işləyə bilmir.
Smart protokolu daha çox məlumat ötürmə metodudur, lakin Git haqqında ağıllı bir proses tələb edir – o, yerli məlumatları oxuya bilir, müştərinin nəyə ehtiyac duyduğunu tapır və bunun üçün xüsusi bir paket yarada bilir.
Məlumatların ötürülməsi üçün iki proses dəsti mövcuddur: uploading data üçün bir cüt və downloading data üçün bir cüt.</p>
</div>
<div class="sect4">
<h4 id="_uploading_data">Uploading Data</h4>
<div class="paragraph">
<p>
Verilənləri remote prosesə yükləmək üçün Git, <code>send-pack</code> və <code>receive-pack</code> proseslərindən istifadə edir.
<code>send-pack</code> prosesi müştəri üzərində işləyir və remote-dakı <code>receive-pack</code> prosesinə qoşulur.</p>
</div>
<div class="sect5">
<h6 id="_ssh">SSH</h6>
<div class="paragraph">
<p>Məsələn, proyektinizdə <code>git push origin master</code> işlətdiyinizi düşünək və <code>origin</code> SSH protokolundan istifadə edən bir URL olaraq təyin olunduğunu deyək.
Git, SSH üzərindən serverinizə bir əlaqə quran <code>send-pack</code> prosesini işə salır.
O, remote serverdə belə bir şeyə bənzəyən bir SSH çağırışı vasitəsilə bir əmr işlətməyə çalışır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh -x git@server "git-receive-pack 'simplegit-progit.git'"
00a5ca82a6dff817ec66f4437202690a93763949 refs/heads/master□report-status \
    delete-refs side-band-64k quiet ofs-delta \
    agent=git/2:2.1.1+github-607-gfba4028 delete-refs
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>git-receive-pack</code> əmri, hazırda sahib olduğu hər bir istinad üçün dərhal bir sətirlə cavab verir – yəni, bu halda yalnız <code>master</code> branch-ı və onun SHA-1-i.
Birinci sətirdə serverin imkanlarının siyahısı (burada, <code>report-status</code>, <code>delete-refs</code> və digərləri, o cümlədən müştəri identifikatoru) var.</p>
</div>
<div class="paragraph">
<p>Məlumatlar chunk-lara ötürülür.
Hər bir chunk, onun nə qədər olduğunu göstərən 4 simvollu bir hex dəyəri ilə başlayır (uzunluğun özünün 4 baytı da daxil olmaqla).
Chunk-lar adətən tək bir məlumat sətri və arxadakı bir xətti qidalandırır.
İlk chunk-nız 165 hexadecimal üçün 00a5 ilə başlayır, yəni chunk 165 bayt uzunluğundadır.
Növbəti chunk 0000-dir, yəni server istinadlar siyahısı ilə hazırlanır.</p>
</div>
<div class="paragraph">
<p>Artıq serverin vəziyyətini bildiyindən, <code>send-pack</code> prosesi, serverin etmədiyi commit-i müəyyənləşdirir.
Bu push-un yeniləyəcəyi hər istinad üçün, <code>send-pack</code> prosesi bu məlumatı <code>receive-pack</code>  prosesinə izah edir.
Məsələn, <code>master</code> branch-ı yeniləyirsinizsə və bir <code>experiment</code> branch-na əlavə edirsinizsə, <code>send-pack</code> cavabı belə görünə bilər:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>0076ca82a6dff817ec66f44342007202690a93763949 15027957951b64cf874c3557a0f3547bd83b3ff6 \
    refs/heads/master report-status
006c0000000000000000000000000000000000000000 cdfdb42577e2506715f8cfeacdbabc092bf63e8d \
    refs/heads/experiment
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git, xəttin uzunluğu, köhnə SHA-1, yeni SHA-1 və yenilənən istinadla yenilədiyiniz hər bir istinad üçün bir sətir göndərir.
Birinci sətir də müştərinin imkanlarına malikdir.
Bütün <em>0’ların SHA-1 dəyəri əvvəllər heç bir şey olmadığı demək deyil - çünki təcrübə istinadını siz əlavə edirsiniz.
Əgər bir arayışı silsəniz, əksini görəcəksiniz: bütün '0</em>-lar sağ tərəfdədir.</p>
</div>
<div class="paragraph">
<p>Sonra müştəri serverdə hələ mövcud olmayan bütün obyektlərin paketini göndərir.
Nəhayət, server müvəffəqiyyət (və ya uğursuzluq) göstəricisi ilə cavab verir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>000eunpack ok</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_https">HTTP(S)</h6>
<div class="paragraph">
<p>Bu proses əsasən HTTP-də də eynidir, baxmayaraq ki, qarşılıqlı əlaqə biraz fərqlidir.
Əlaqə bu istəklə başladı:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET http://server/simplegit-progit.git/info/refs?service=git-receive-pack
001f# service=git-receive-pack
00ab6c5f0e45abd7832bf23074a333f739977c9e8188 refs/heads/master□report-status \
    delete-refs side-band-64k quiet ofs-delta \
    agent=git/2:2.1.1~vmg-bitmaps-bugaloo-608-g116744e
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p>İlk müştəri-server mübadiləsi başa çatdı.
Müştəri daha sonra başqa bir sorğu göndərir, bu dəfə <code>send-pack</code>-nin verdiyi məlumatlarla <code>POST</code> göndərilir.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; POST http://server/simplegit-progit.git/git-receive-pack</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>POST</code> sorğusuna, <code>send-pack</code> output-u və packfile faydalı yük kimi daxildir.
Server daha sonra HTTP cavabı ilə müvəffəq və ya uğursuz olduğunu göstərir.</p>
</div>
<div class="paragraph">
<p>HTTP protokolunun bu məlumatları yığılmış köçürmə kodlaşdırmasının içərisinə əlavə edə biləcəyini unutmayın.</p>
</div>
</div>
</div>
<div class="sect4">
<h4 id="_downloading_data">Downloading Data</h4>
<div class="paragraph">
<p>
Verilənləri yüklədiyiniz zaman, <code>fetch-pack</code> və <code>upload-pack</code> prosesləri iştirak edir.
Müştəri hansı məlumatların ötürüləcəyini müzakirə etmək üçün remote-dakı bir <code>upload-pack</code> prosesinə qoşulan bir <code>fetch-pack</code> prosesinə başlayır.</p>
</div>
<div class="sect5">
<h6 id="_ssh_2">SSH</h6>
<div class="paragraph">
<p>SSH üzərindən gətirmə edirsinizsə, <code>fetch-pack</code> belə bir şey işlədir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ ssh -x git@server "git-upload-pack 'simplegit-progit.git'"</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fetch-pack</code> qoşulduqdan sonra, <code>upload-pack</code> geriyə belə bir şey göndərir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>00dfca82a6dff817ec66f44342007202690a93763949 HEAD□multi_ack thin-pack \
    side-band side-band-64k ofs-delta shallow no-progress include-tag \
    multi_ack_detailed symref=HEAD:refs/heads/master \
    agent=git/2:2.1.1+github-607-gfba4028
003fe2409a098dc3e53539a9028a94b6224db9d6a6b6 refs/heads/master
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu, <code>receive-pack</code> cavabları ilə çox oxşardır, lakin imkanları fərqlidir.
Bundan əlavə, HEAD-in işarə etdiyini geri göndərir (<code>symref=HEAD:refs/heads/master</code>), buna görə müştəri bunun bir klon olub olmadığını yoxlayacağını bilir.</p>
</div>
<div class="paragraph">
<p>Bu nöqtədə, <code>fetch-pack</code> prosesi hansı obyektlərə sahib olduğuna baxır və ehtiyac duyduğu obyektlərə “want” və sonra SHA-1 göndərərək cavab verir.
Artıq sahib olduğu bütün obyektləri “have” və sonra SHA-1 ilə göndərir.
Bu siyahının sonunda, ehtiyac duyduğu məlumatların paket sənədini göndərməyə başlamaq üçün <code>upload-pack</code> prosesini başlamaq üçün “done” yazır:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>003cwant ca82a6dff817ec66f44342007202690a93763949 ofs-delta
0032have 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7
0009done
0000</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="_https_2">HTTP(S)</h6>
<div class="paragraph">
<p>Fetch əməliyyatı üçün əl sıxma iki HTTP request-i alır.
Birincisi, dumb protokolda eyni nöqtədə istifadə olunan bir <code>GET</code>-dir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; GET $GIT_URL/info/refs?service=git-upload-pack
001e# service=git-upload-pack
00e7ca82a6dff817ec66f44342007202690a93763949 HEAD□multi_ack thin-pack \
    side-band side-band-64k ofs-delta shallow no-progress include-tag \
    multi_ack_detailed no-done symref=HEAD:refs/heads/master \
    agent=git/2:2.1.1+github-607-gfba4028
003fca82a6dff817ec66f44342007202690a93763949 refs/heads/master
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bu, SSH bağlantısı üzərindən <code>git-upload-pack</code> çağırmağa çox oxşayır, lakin ikinci mübadilə ayrı bir istək olaraq həyata keçirilir:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>=&gt; POST $GIT_URL/git-upload-pack HTTP/1.0
0032want 0a53e9ddeaddad63ad106860237bbf53411d11a7
0032have 441b40d833fdfa93eb2908e52742248faf0ee993
0000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Yenə də, bu yuxarıdakı ilə eyni formatdadır.
Bu sorğunun cavabı müvəffəq və ya uğursuz olduğunu göstərir və paket sənədini də əhatə edir.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_protokolun_nəticəsi">Protokolun Nəticəsi</h3>
<div class="paragraph">
<p>Bu bölmə köçürmə protokollarının çox əsas bir icmalını ehtiva edir.
Protokolda <code>multi_ack</code> və ya <code>side-band</code> imkanları kimi bir çox digər xüsusiyyətlər var, lakin bunları əhatə etmək bu kitabın əhatə dairəsindən xaricdədir.
Sizə müştəri və server arasında ümumi geri və irəli bir fikir verməyə çalışdıq; bundan daha çox biliyə ehtiyacınız varsa, ehtimal ki, Git mənbə koduna nəzər yetirmək istərdiniz.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>