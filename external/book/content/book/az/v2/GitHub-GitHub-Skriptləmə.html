---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: az
  chapter:
    title: GitHub
    number: 6
  section:
    title: GitHub Skriptləmə
    number: 5
    cs_number: '6.5'
    previous: book/az/v2/GitHub-Bir-Təşkilatı-Idarə-Etmək
    next: book/az/v2/GitHub-Qısa-Məzmun
title: Git - GitHub Skriptləmə
url: "/book/az/v2/GitHub-GitHub-Skriptləmə.html"
---
<h2 id="_github_skriptləmə">GitHub Skriptləmə</h2>
<div class="paragraph">
<p>Beləliklə, indi GitHub’un əsas xüsusiyyətləri və iş axınlarının hamısını əhatə etdik, ancaq hər hansı bir böyük qrup və ya layihənin istədikləri və ya inteqrasiya etmək istədikləri xarici xidmətlər ola bilər.</p>
</div>
<div class="paragraph">
<p>Bizim üçün xoşbəxtlikdən, GitHub bir çox cəhətdən həqiqətən hack-lənə bilər.
Bu hissədə GitHub-un istədiyi şəkildə işləməsi üçün GitHub hooks sistemindən və onun API-dən necə istifadə edəcəyimizi əhatə edəcəyik.</p>
</div>
<div class="sect3">
<h3 id="_servislər_and_hook_lar">Servislər and Hook-lar</h3>
<div class="paragraph">
<p>GitHub depo idarəsinin Servislər and Hook-larr bölməsi GitHub’un xarici sistemlərlə qarşılıqlı əlaqəsinin ən asan yoludur.</p>
</div>
<div class="sect4">
<h4 id="_servislər">Servislər</h4>
<div class="paragraph">
<p>Əvvəlcə Servislərə nəzər salacağıq.
Həm Hook-lar, həm də Servislər inteqrasiyasını əvvəlcədən Həmkarlar əlavə etmək və layihənizin standart bölməsini dəyişdirməyə baxdığımız deponun Ayarlar bölməsində tapa bilərsiniz.
“Webhooks and Services” bölməsində <a href="{{< relurl "book/az/v2/ch00/_services_hooks" >}}">Servislər and Hook-lar konfiqurasiya bölməsi</a> kimi bir şey görəcəksiniz.</p>
</div>
<div id="_services_hooks" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-01-services.png" >}}" alt="Servislər and Hook-lar">
</div>
<div class="title">Figure 130. Servislər and Hook-lar konfiqurasiya bölməsi</div>
</div>
<div class="paragraph">
<p>Seçdiyiniz onlarla servis var, əksəriyyəti digər kommersiya və açıq mənbə sistemlərinə inteqrasiya edir.
Onların əksəriyyəti Davamlı İnteqrasiya xidmətləri, səhv və problem izləyiciləri, söhbət otağı sistemləri və sənədləşdirmə sistemləri üçündür.
E-poçt fork-unu quraşdırmaqla çox sadə bir şəkildə keçəcəyik.
“Add Service”  açılan menyudan “email” seçsəniz, <a href="{{< relurl "book/az/v2/ch00/_service_config" >}}">E-poçt xidmətinin konfiqurasiyası</a> kimi bir konfiqurasiya ekranı alacaqsınız.</p>
</div>
<div id="_service_config" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-02-email-service.png" >}}" alt="E-poçt xidməti">
</div>
<div class="title">Figure 131. E-poçt xidmətinin konfiqurasiyası</div>
</div>
<div class="paragraph">
<p>Bu vəziyyətdə, “Add service” düyməsini vursaq, göstərilən e-poçt ünvanı, hər kimsə depoya push edərkən hər dəfə bir e-poçt alacaq.
Servislər çox sayda müxtəlif hadisəni dinləyə bilər, ancaq çoxu push etmə hadisələrini dinləyir və sonra bu məlumatlarla bir şey edə bilər.</p>
</div>
<div class="paragraph">
<p>GitHub ilə inteqrasiya etmək istədiyiniz bir sistem varsa, mövcud bir servis inteqrasiyasının olub olmadığını görmək üçün buranı yoxlamalısınız.
Məsələn, kod bazasında testlər aparmaq üçün Jenkins-dan istifadə edirsinizsə, Jenkins-inin servis inteqrasiyasını kimsə depolarına push etdikdə hər dəfə bir test işə salmağa imkan verə bilərsiniz.</p>
</div>
</div>
<div class="sect4">
<h4 id="_hook_lar">Hook-lar</h4>
<div class="paragraph">
<p>Daha spesifik bir şeyə ehtiyacınız varsa və ya bu siyahıya daxil olmayan bir servis və ya saytla inteqrasiya etmək istəsəniz, bunun əvəzinə daha ümumi hook-lar sistemindən istifadə edə bilərsiniz.
GitHub depo hook-ları olduqca sadədir.
Bir URL göstərmisinizsə və GitHub istədiyiniz hər hansı bir hadisədə HTTP yüklənməsini həmin URL-ə göndərəcəkdir.</p>
</div>
<div class="paragraph">
<p>Ümumiyyətlə bu iş üsulu, GitHub fork yükünü dinləmək və qəbul edildikdə məlumatla bir şey etmək üçün kiçik bir veb xidməti qura bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Bir fork aktivləşdirmək üçün <a href="{{< relurl "book/az/v2/ch00/_services_hooks" >}}">Servislər and Hook-lar konfiqurasiya bölməsi</a>-dakı  “Add webhook”  düyməsini klikləyin.
Bu sizi <a href="{{< relurl "book/az/v2/ch00/_web_hook" >}}">Web hook konfiqurasiyası</a> kimi görünən bir səhifəyə gətirəcəkdir.</p>
</div>
<div id="_web_hook" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-03-webhook.png" >}}" alt="Web hook">
</div>
<div class="title">Figure 132. Web hook konfiqurasiyası</div>
</div>
<div class="paragraph">
<p>Bir web hook üçün konfiqurasiya olduqca sadədir.
Əksər hallarda sadəcə bir URL və gizli bir açar daxil edir və  “Add webhook” düyməsini vurursunuz.
GitHub-ın  yükləməsini istədiyiniz hadisələrin bir neçə variantı var - varsayılan kimsə deponuzun hər hansı bir branch-ına yeni kodu <code>push</code> hadisəsi üçün bir yük almaqdır.</p>
</div>
<div class="paragraph">
<p>Bir web hook-u idarə etmək üçün qura biləcəyiniz bir veb servisin kiçik bir nümunəsini baxaq.
Ruby web framework Sinatra’dan istifadə edəcəyik, çünki olduqca qısadır və etdiyimiz işləri asanlıqla görə bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Müəyyən bir şəxs müəyyən bir sənəd dəyişdirərək layihəmizin müəyyən bir branch-na push etsə, e-poçt almaq istədiyimizi deyək.
Bunu kifayət qədər asanlıqla bu kimi kodla edə bilərik:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'sinatra'
require 'json'
require 'mail'

post '/payload' do
  push = JSON.parse(request.body.read) # parse the JSON

  # gather the data we're looking for
  pusher = push["pusher"]["name"]
  branch = push["ref"]

  # get a list of all the files touched
  files = push["commits"].map do |commit|
    commit['added'] + commit['modified'] + commit['removed']
  end
  files = files.flatten.uniq

  # check for our criteria
  if pusher == 'schacon' &amp;&amp;
     branch == 'ref/heads/special-branch' &amp;&amp;
     files.include?('special-file.txt')

    Mail.deliver do
      from     'tchacon@example.com'
      to       'tchacon@example.com'
      subject  'Scott Changed the File'
      body     "ALARM"
    end
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Burada GitHub-un bizə verdiyi JSON yükünü götürürük və onu kimin push etdiyini, hansı branch-a  push etdiyini və  push etdikləri bütün sənədlərdə hansı sənədlərə toxunduğunu axtarırıq.
Sonra meyarlarımıza uyğun olduğunu yoxlayırıq və uyğun olduqda bir e-poçt göndəririk.</p>
</div>
<div class="paragraph">
<p>Bu kimi bir şeyi inkişaf etdirmək və sınamaq üçün, fork hazırladığınız eyni ekranda gözəl bir inkişaf etdirici konsolunuz var.
GitHub’un webhook üçün etdiyi cəhdləri görə bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Hər bir fork üçün təhvil verildiyi anda istəyə və cavaba cavab verən body və başlıqları incəliyə bilərsiniz.
Bu, hook-ları test və debug etməyi olduqca asanlaşdırır.</p>
</div>
<div id="_web_hook_debug" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-04-webhook-debug.png" >}}" alt="Webhook debug">
</div>
<div class="title">Figure 133. Web hook debugging informasiyası</div>
</div>
<div class="paragraph">
<p>Bunun digər böyük xüsusiyyəti, xidmətinizi asanlıqla sınamaq üçün hər hansı bir payload-ı geri qaytara biləcəyinizdir.</p>
</div>
<div class="paragraph">
<p>Webhook-ların necə yazılacağı və dinləyə biləcəyiniz bütün fərqli hadisə növləri haqqında daha çox məlumat üçün  <a href="https://developer.github.com/webhooks/" class="bare">https://developer.github.com/webhooks/</a> saytından GitHub Developer sənədlərinə baxın.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_github_api">GitHub API</h3>
<div class="paragraph">
<p>
Servislər və hook-lar, depolarınızda baş verən hadisələr barədə push bildirişlərini almaq üçün bir yol verir, ancaq bu hadisələr haqqında daha çox məlumat lazımdırsa, nə etməlisiniz?
Əməkdaşlarınızı və ya etiketləmə məsələlərini əlavə etmək kimi bir şeyi avtomatlaşdırmaq lazımdırsa, nə etməli?</p>
</div>
<div class="paragraph">
<p>GitHub API lazımlı olduğu yerdir.
GitHub-da veb saytında avtomatlaşdırılmış bir şəkildə edə biləcəyiniz hər şeyi etmək üçün çox sayda API nöqtəsi var.
Bu bölmədə doğrulamağı və API-yə necə qoşulacağımızı, bir məsələyə necə şərh verəcəyinizi və API vasitəsilə Pull Request-in vəziyyətini necə dəyişdirəcəyinizi öyrənəcəyik.</p>
</div>
</div>
<div class="sect3">
<h3 id="_əsas_i̇stifadə_2">Əsas İstifadə</h3>
<div class="paragraph">
<p>Siz edə biləcəyiniz ən əsas şey doğrulama tələb etməyən endpoint-də sadə bir GET request-dir.
Bu istifadəçi və ya açıq mənbəli bir layihədə yalnız oxu məlumatı ola bilər.
Məsələn, “schacon” adlı bir istifadəçi haqqında daha çox bilmək istəyiriksə, belə bir şey işlədə bilərik:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl https://api.github.com/users/schacon
{
  "login": "schacon",
  "id": 70,
  "avatar_url": "https://avatars.githubusercontent.com/u/70",
# …
  "name": "Scott Chacon",
  "company": "GitHub",
  "following": 19,
  "created_at": "2008-01-27T17:19:28Z",
  "updated_at": "2014-06-10T02:37:23Z"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Təşkilatlar, layihələr, məsələlər, commit-lər haqqında məlumat almaq üçün bu kimi endpoint-lər var - GitHub-da hər şey haqqında açıq şəkildə görə biləcəksiniz .
Siz hətta ixtiyari Markdown göstərmək üçün API-dən istifadə edə və ya  <code>.gitignore</code> şablonunu tapa bilərsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl https://api.github.com/gitignore/templates/Java
{
  "name": "Java",
  "source": "*.class

# Mobile Tools for Java (J2ME)
.mtj.tmp/

# Package Files #
*.jar
*.war
*.ear

# virtual machine crash logs, see https://www.java.com/en/download/help/error_hotspot.xml
hs_err_pid*
"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_bir_məsələyə_münasibət_bildirmək">Bir Məsələyə Münasibət Bildirmək</h3>
<div class="paragraph">
<p>Bununla birlikdə, bir Issue or Pull Request şərhini şərh etmək kimi bir veb saytında bir hərəkət etmək istəsəniz və ya şəxsi məzmuna baxmaq və ya qarşılıqlı əlaqə qurmaq istəyirsinizsə, identifikasiya lazımdır.</p>
</div>
<div class="paragraph">
<p>İdentifikasiyanın bir neçə yolu var.
Əsas identifikasiyanı yalnız istifadəçi adınızı və şifrənizi istifadə edə bilərsiniz, ancaq ümumiyyətlə şəxsi giriş tokenindən istifadə etmək daha yaxşı bir fikirdir.
Bunu parametrlər səhifənizdəki “Applications” bölməsindən əldə edə bilərsiniz.</p>
</div>
<div id="_access_token" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-05-access-token.png" >}}" alt="Giriş Token">
</div>
<div class="title">Figure 134. Parametrlər səhifənizdəki “Applications” bölməsindən giriş tokeninizi yaradın</div>
</div>
<div class="paragraph">
<p>Bu işarə və təsvir üçün hansı sahələri istədiyinizi soruşacaqdır.
Skriptiniz və ya tətbiqiniz artıq istifadə edilmədiyi zaman token-i çıxartmağı rahat hiss etdiyiniz üçün yaxşı bir təsviri istifadə etdiyinizə əmin olun.</p>
</div>
<div class="paragraph">
<p>GitHub sizə bir token-i yalnız bir dəfə göstərəcəkdir, buna görə də onu kopyalayın.
İndi istifadə edərək istifadəçi adı və şifrə istifadə etmək əvəzinə skriptinizdə identifikasiya etmək üçün istifadə edə bilərsiniz.
Bu, çox xoşdur, çünki nə etmək istədiyinizi məhdudlaşdıra bilərsiniz və token-in ləğvi mümkündür.</p>
</div>
<div class="paragraph">
<p>Bu da dərəcəniz həddini artırmağın əlavə üstünlüyünə malikdir.
Doğrulama olmadan, saatda 60 sorğu ilə məhdudlaşacaqsınız.
Doğruladığınız təqdirdə saatda 5000 müraciət edə bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Beləliklə, məsələlərimizdən birinə şərh etmək üçün istifadə edək.
Deyək ki, 6-cı sayda müəyyən bir məsələyə münasibət bildirmək istəyirik.
Bunu etmək üçün, yalnız Avtorizasiya başlığı olaraq hazırladığımız işarə ilə <code>repos/&lt;user&gt;/&lt;repo&gt;/issues/&lt;num&gt;/comments</code>-a bir HTTP POST tələb etməliyik.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl -H "Content-Type: application/json" \
       -H "Authorization: token TOKEN" \
       --data '{"body":"A new comment, :+1:"}' \
       https://api.github.com/repos/schacon/blink/issues/6/comments
{
  "id": 58322100,
  "html_url": "https://github.com/schacon/blink/issues/6#issuecomment-58322100",
  ...
  "user": {
    "login": "tonychacon",
    "id": 7874698,
    "avatar_url": "https://avatars.githubusercontent.com/u/7874698?v=2",
    "type": "User",
  },
  "created_at": "2014-10-08T07:48:19Z",
  "updated_at": "2014-10-08T07:48:19Z",
  "body": "A new comment, :+1:"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>İndi bu məsələyə keçsəniz, yalnız <a href="{{< relurl "book/az/v2/ch00/_api_comment" >}}">GitHub API-dən bir şərh göndərildi</a> -da uğurla yayımladığımızı görə bilərsiniz.</p>
</div>
<div id="_api_comment" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-06-comment.png" >}}" alt="API Şərhi">
</div>
<div class="title">Figure 135. GitHub API-dən bir şərh göndərildi</div>
</div>
<div class="paragraph">
<p>Veb saytından edə biləcəyiniz hər şeyi etmək üçün API-dən istifadə edə bilərsiniz - mərhələləri yaratmaq və təyin etmək, İnsanları Issues və Pull Requests-a təyin etmək, etiketlər yaratmaq və dəyişdirmək, commit məlumatlarına daxil olmaq, yeni commit-lər və branch-lar yaratmaq, açmaq, bağlamaq və ya etmək Pull Requests-in birləşməsi, qruplar yaratmaq və redaktə etmək, Pull Request-dəki kod sətirlərinə şərh vermək, saytı axtarmaq və s.</p>
</div>
</div>
<div class="sect3">
<h3 id="_pull_request_statusunun_dəyişdirilməsi">Pull Request Statusunun Dəyişdirilməsi</h3>
<div class="paragraph">
<p>Pull Request-ləri ilə işləyirsinizsə, həqiqətən faydalı olduğundan baxacağımız bir son nümunə var.
Hər bir commit-in onunla əlaqəli bir və ya daha çox statusu ola bilər və bu statusu əlavə etmək və soruşmaq üçün bir API var.</p>
</div>
<div class="paragraph">
<p>Davamlı İnteqrasiya və sınaq servislərinin əksəriyyəti bu API-dən istifadə edilən kodu sınamaqla push etməərə reaksiya vermək üçün istifadə edir və sonra bu commit-in bütün sınaqlardan keçdiyini geri bildirir.
Əgər təqdimatçı bütün töhfələr qaydalarına əməl edirsə, commit düzgün imzalanıbsa, göndərmə mesajının düzgün formatlandığını yoxlamaq üçün istifadə edə bilərsiniz.</p>
</div>
<div class="paragraph">
<p>Deyək ki, əmanət mesajınızdakı <code>Signed-off-by</code> sətirini yoxlayan kiçik bir veb xidmətə xitabən depo qurduq.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'httparty'
require 'sinatra'
require 'json'

post '/payload' do
  push = JSON.parse(request.body.read) # parse the JSON
  repo_name = push['repository']['full_name']

  # look through each commit message
  push["commits"].each do |commit|

    # look for a Signed-off-by string
    if /Signed-off-by/.match commit['message']
      state = 'success'
      description = 'Successfully signed off!'
    else
      state = 'failure'
      description = 'No signoff found.'
    end

    # post status to GitHub
    sha = commit["id"]
    status_url = "https://api.github.com/repos/#{repo_name}/statuses/#{sha}"

    status = {
      "state"       =&gt; state,
      "description" =&gt; description,
      "target_url"  =&gt; "http://example.com/how-to-signoff",
      "context"     =&gt; "validate/signoff"
    }
    HTTParty.post(status_url,
      :body =&gt; status.to_json,
      :headers =&gt; {
        'Content-Type'  =&gt; 'application/json',
        'User-Agent'    =&gt; 'tonychacon/signoff',
        'Authorization' =&gt; "token #{ENV['TOKEN']}" }
    )
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ümid edirik, bunu izləmək olduqca sadədir.
Bu web hook işlədicisinə, sadəcə push etdikləri hər bir commit-ə baxırıq, commit mesajında <em>Signed-off-by</em> sətirini axtarırıq və nəhayət HTTP vasitəsilə  <code>/repos/&lt;user&gt;/&lt;repo&gt;/statuses/&lt;commit_sha&gt;</code> vəziyyəti olan API endpointi tapırıq.</p>
</div>
<div class="paragraph">
<p>Bu halda bir vəziyyət (<em>success</em>, <em>failure</em>, <em>error</em>), baş verənlərin təsviri, istifadəçinin əlavə məlumat üçün gedə biləcəyi hədəf URL və  bir commit üçün çox statuslu “context” göndərə bilərsiniz..
Məsələn, bir test servisi bir status təqdim edə bilər və bu kimi bir yoxlama servisi də bir status təqdim edə bilər - “context”  sahəsi necə fərqləndiyini göstərir.</p>
</div>
<div class="paragraph">
<p>Kimsə GitHub-da yeni Pull Request açırsa və bu fork qurulubsa, <a href="{{< relurl "book/az/v2/ch00/_commit_status" >}}">API vasitəsilə Commit status</a> kimi bir şey görə bilərsiniz.</p>
</div>
<div id="_commit_status" class="imageblock">
<div class="content">
<img src="{{< relurl "book/az/v2/images/scripting-07-status.png" >}}" alt="Commit status">
</div>
<div class="title">Figure 136. API vasitəsilə Commit status</div>
</div>
<div class="paragraph">
<p>İndi mesajdakı “Signed-off-by” sətri olan və yazarın imzalamağı unutduğu yerdən qırmızı xaç olan işarənin yanında bir az yaşıl bir işarə görə bilərsiniz.
Ayrıca  Pull Request  branch-dakı son commitin vəziyyətini aldığını və uğursuz olduqda xəbərdarlıq etdiyini görə bilərsiniz.
Bu API-ni test nəticələri üçün istifadə edirsinizsə, sonuncu commit-in uğursuz olduğu testləri təsadüfən birləşdirməməyiniz üçün çox faydalıdır.</p>
</div>
</div>
<div class="sect3">
<h3 id="_octokit">Octokit</h3>
<div class="paragraph">
<p>Bu nümunələrdə <code>curl</code>  və sadə HTTP sorğuları ilə demək olar ki, hər şeyi etdiyimizə baxmayaraq bu API-ni daha idiomatik şəkildə təqdim edən bir neçə açıq mənbəli kitabxana mövcuddur.
Bu yazı zamanı dəstəklənən dillərə Go, Objective-C, Ruby və .NET daxildir.
Bunlar haqqında daha çox məlumat üçün <a href="https://github.com/octokit" class="bare">https://github.com/octokit</a>səhifəsinə baxın, çünki sizin üçün HTTP-nin çox hissəsi idarə olunur.</p>
</div>
<div class="paragraph">
<p>Ümid edirik, bu vasitələr xüsusi iş axınlarınız üçün daha yaxşı işləmək üçün GitHub-u düzəltməyə və dəyişdirməyə kömək edə bilər.
Bütün API sənədləri və ümumi tapşırıqlar üçün təlimatlar üçün <a href="https://developer.github.com" class="bare">https://developer.github.com</a> səhifəsinə baxın.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>