---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: cs
  chapter:
    title: Úvod
    number: 1
  section:
    title: Základy systému Git
    number: 3
    cs_number: '1.3'
    previous: book/cs/v2/Úvod-Stručná-historie-systému-Git
    next: book/cs/v2/Úvod-Příkazový-řádek
title: Git - Základy systému Git
url: "/book/cs/v2/Úvod-Základy-systému-Git.html"
---
<h2 id="_základy_systému_git">Základy systému Git</h2>
<div class="paragraph">
<p>Co že to vlastně Git v jádru je?
Pochopení této podkapitoly je důležité, protože pokud porozumíte, co Git je a na jakých základech pracuje, bude pro vás i jeho efektivní používání mnohem snadnější.
Při seznamování s Gitem se pokuste vyčistit mysl od věcí, které možná znáte z jiných systémů pro správu verzí, jako jsou Subversion a Perforce. Při jeho používání se tím vyhnete určitým zmatkům.
Ačkoli je uživatelské rozhraní velmi podobné jiným systémům, Git uvažuje o ukládaných informacích velmi odlišně. Pochopení těchto rozdílů vám pomůže předejít nejasnostem, které by mohly při používání Gitu vzniknout.</p>
</div>
<div class="sect3">
<h3 id="_snímky_nikoli_rozdíly">Snímky, nikoli rozdíly</h3>
<div class="paragraph">
<p>Hlavním rozdílem mezi systémem Git a všemi ostatními systémy pro správu verzí (včetně Subversion a spol) je způsob, jakým Git o datech uvažuje.
Většina ostatních systémů ukládá informace jako seznamy změn souborů.
Tyto systémy (CVS, Subversion, Perforce, Bazaar atd.) chápou uložené informace jako sadu souborů a změn každého z těchto souborů v čase.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/deltas.png" >}}" alt="Ukládání dat jako změn vůči základní verzi každého souboru.">
</div>
<div class="title">Figure 4. Ukládání dat jako změn vůči základní verzi každého souboru.</div>
</div>
<div class="paragraph">
<p>Git o ukládání dat tímto způsobem neuvažuje.
Místo toho Git o datech uvažuje jako o sadě snímků miniaturního systému souborů.
Pokaždé, když v systému Git zapíšete (commit<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>) stav projektu, v podstatě „vyfotí“, jak vypadají všechny vaše soubory v daném okamžiku, a uloží odkaz na tento snímek.
Pokud se soubor nezměnil, pak ho Git v zájmu efektivnosti znovu neukládá, ale jen se odkáže na předchozí identický soubor, který už byl uložen.
Git o svých datech uvažuje spíše jako o <strong>sérii snímků</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/snapshots.png" >}}" alt="Git ukládá data jako snímky projektu v daném čase.">
</div>
<div class="title">Figure 5. Ukládání dat v podobě snímků projektu v daném čase.</div>
</div>
<div class="paragraph">
<p>Jde o důležitý rozdíl mezi systémem Git a téměř všemi ostatními systémy pro správu verzí.
Git díky tomu znovu zkoumá skoro každý aspekt správy verzí, který většina ostatních systémů okopírovala z předchozí generace.
Díky tomu Git vypadá (spíše než jiné systémy pro správu verzí) jako malý souborový systém, nad kterým pracuje sada neuvěřitelně výkonných nástrojů.
Některými výhodami, které získáme při tomto uvažování o datech, se budeme zabývat při výkladu větvení v kapitole <a href="{{< relurl "book/cs/v2/ch00/_git_branching" >}}">Větve v systému Git</a>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_téměř_každá_operace_je_lokální">Téměř každá operace je lokální</h3>
<div class="paragraph">
<p>Většina operací v systému Git vyžaduje ke své činnosti pouze lokální soubory a zdroje. Obecně platí, že informace z jiných počítačů v síti nejsou potřebné.
Pokud jste zvyklí pracovat s centralizovanými systémy správy verzí, kde je většina operací poznamenána latencí sítě, patrně vás při práci s Git napadne, že mu bohové rychlosti dali do vínku nadpřirozené schopnosti.
Protože máte celou historii projektu uloženou přímo na svém lokálním disku, probíhá většina operací takřka okamžitě.</p>
</div>
<div class="paragraph">
<p>Pokud například chcete procházet historii projektu, Git kvůli tomu nemusí vyhledávat informace na serveru — načte je jednoduše přímo z vaší lokální databáze.
Znamená to, že se historie projektu zobrazí téměř hned.
Pokud si chcete prohlédnout změny provedené mezi aktuální verzí souboru a týmž souborem před měsícem, Git vyhledá měsíc starý soubor a provede lokální výpočet rozdílů, aniž by o to musel žádat vzdálený server nebo stahovat starší verzi souboru ze vzdáleného serveru a poté provádět lokální výpočet.</p>
</div>
<div class="paragraph">
<p>To také znamená, že je jen velmi málo operací, které nemůžete provádět offline nebo bez připojení k VPN.
Jste-li v letadle nebo ve vlaku a chcete pokračovat v práci, můžete beze všeho zapisovat nové revize. Ty odešlete až po opětovném připojení k síti.
Jestliže přijedete domů a zjistíte, že VPN klient nefunguje, stále můžete pracovat.
V mnoha jiných systémech je takový postup nemožný nebo přinejmenším obtížný.
Například v systému Perforce toho lze bez připojení k serveru dělat jen velmi málo. V systémech Subversion a CVS můžete sice upravovat soubory, ale nemůžete zapisovat změny do databáze (neboť ta je offline).
Možná to vypadá jako maličkost, ale divili byste se, jak velký je v tom rozdíl.</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_udržuje_integritu">Git udržuje integritu</h3>
<div class="paragraph">
<p>Než se v Gitu cokoli uloží, nejdříve se z toho vypočítá kontrolní součet, který se pak používá k odkazu na uložená data.
To znamená, že není možné změnit obsah jakéhokoli souboru nebo adresáře, aniž by o tom Git nevěděl.
Tato funkčnost je do Gitu zabudována na nejnižších úrovních a je nedílnou součástí jeho filosofie.
Nemůže tak dojít ke ztrátě informací při přenosu dat nebo k poškození souboru, aniž by to Git byl schopen zjistit.</p>
</div>
<div class="paragraph">
<p>Pro vytváření kontrolních součtů používá Git mechanismus zvaný SHA-1.
Jde se o řetězec o 40 hexadecimálních znacích (0–9, a–f) vypočítaný na základě obsahu souboru nebo adresářové struktury systému Git.
Otisk SHA-1 může vypadat například takto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>24b9da6552252987aa493b52f8696cd6d3b00373</code></pre>
</div>
</div>
<div class="paragraph">
<p>S těmito otisky se budete setkávat v Gitu všude, protože je používá opravdu často.
Git vlastně ve své databázi nic neukládá podle názvu souboru, ale podle otisku jeho obsahu.</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_obvykle_jen_přidává_data">Git obvykle jen přidává data</h3>
<div class="paragraph">
<p>Pokud v Gitu provádíte nějaké akce, pak téměř všechny z nich data do databáze pouze přidávají.
Přimět systém, aby udělal něco, co nelze vzít zpět, nebo aby smazal jakákoli data, je velice obtížné.
Stejně jako v jiných systémech pro správu verzí můžete ztratit nebo poničit úpravy, které ještě nebyly zapsány. Jakmile však snímek zapíšete do Gitu, je téměř nemožné ho ztratit, zvlášť pokud databázi pravidelně odesíláte (push) do jiného repozitáře.</p>
</div>
<div class="paragraph">
<p>Díky tomu je práce s Gitem radostí, protože víme, že můžeme experimentovat bez nebezpečí závažného poškození hotových věcí.
Podrobnější informace o tom, jak Git ukládá data a jak lze obnovit zdánlivě ztracenou práci, najdete v podkapitole <a href="{{< relurl "book/cs/v2/ch00/_undoing" >}}">Návrat do předchozího stavu</a>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_tři_stavy">Tři stavy</h3>
<div class="paragraph">
<p>A nyní pozor.
Pokud chcete dále hladce pokračovat ve studiu Gitu, budou pro vás následující informace stěžejní.
Git používá pro spravované soubory tři základní stavy: zapsáno (committed), změněno (modified) a připraveno k zapsání (staged).
Zapsáno znamená, že jsou data bezpečně uložena ve vaší lokální databázi.
Změněno znamená, že v souboru byly provedeny změny, avšak soubor ještě nebyl zapsán do databáze.
Připraveno k zapsání znamená, že jste změněný soubor v jeho aktuální verzi určili k tomu, aby byl zapsán do dalšího snímku (commit snapshot).</p>
</div>
<div class="paragraph">
<p>Z toho vyplývá, že projekt je v systému Git rozdělen do tří hlavních částí: adresář systému Git (Git directory), pracovní adresář (working directory) a oblast připravených změn (staging area).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/areas.png" >}}" alt="Pracovní adresář, oblast připravených změn a adresář Git.">
</div>
<div class="title">Figure 6. Pracovní adresář, oblast připravených změn a adresář Git.</div>
</div>
<div class="paragraph">
<p>Adresář Git je místo, kde Git uchovává metadata a databázi objektů vašeho projektu.
Je to nejdůležitější část systému Git a zároveň je to adresář, který se zkopíruje, když klonujete repozitář z jiného počítače.</p>
</div>
<div class="paragraph">
<p>Pracovní adresář obsahuje lokální kopii jedné verze projektu.
Tyto soubory jsou vytaženy ze zkomprimované databáze v adresáři Git a umístěny na disk, kde je můžete používat nebo upravovat.</p>
</div>
<div class="paragraph">
<p>Oblast připravených změn je soubor, většinou uložený v adresáři Git, který obsahuje informace o tom, co bude obsahovat příští objekt revize (commit<sup class="footnote">[<a id="_footnoteref_2" class="footnote" href="#_footnotedef_2" title="View footnote.">2</a>]</sup>).
Někdy se setkáme s označením „index“, ale běžně se používá i pojem oblast připravených změn (staging area).</p>
</div>
<div class="paragraph">
<p>Základní pracovní postup vypadá v Gitu následovně:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Změníte soubory ve svém pracovním adresáři.</p>
</li>
<li>
<p>Soubory připravíte k zapsání tak, že vložíte jejich snímky do oblasti připravených změn.</p>
</li>
<li>
<p>Provedete zápis (commit), který vezme soubory nacházející se v oblasti připravených změn, a tento snímek trvale uloží do adresáře Gitu.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Nachází-li se konkrétní verze souboru v adresáři Gitu, je soubor ve stavu „zapsaný“.
Pokud byl soubor upraven a přidán do oblasti připravených změn, je ve stavu „připraven k zapsání“.
A pokud byl vůči stavu v databázi upraven, ale nebyl připraven k zapsání, je ve stavu „změněný“.
V kapitole <a href="{{< relurl "book/cs/v2/ch00/_git_basics_chapter" >}}">Základy práce se systémem Git</a> se o stavech souborů dozvíte více. Naučíte se, jak jich můžete využívat, nebo jak můžete stav „připraven k zapsání“ úplně přeskočit.</p>
</div>
</div>
<div id='footnotes'>
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Pozn. překl.: Anglické slovo <em>commit</em> má v informačních systémech specifický význam <em>zapsat</em> nebo <em>potvrdit zápis</em>, jehož jemný odstín se bez kontextu špatně překládá. V této knize bude překládán jako <em>zápis</em>. Pokud by měl být zdůrazněn specifický výraz slova <em>commit</em>, bude anglický pojem uveden v závorce. Čeština je krásný jazyk, ale technické texty někdy vyžadují nebásnickou přesnost ;)
</div>
<div class="footnote" id="_footnotedef_2">
<a href="#_footnoteref_2">2</a>. Pozn. překl.: V angličtině se slovo <em>commit</em> používá i jako podstatné jméno s významem výsledku posledního zápisu do databáze Gitu příkazem <code>commit</code>. V grafických nástrojích bývá zobrazován jako bod (tečka, kulička, hvězdička). Pojem <em>revize</em> má význam spíš abstraktnější, ale též vyjadřující stav projektu (bez důrazu na způsob uložení nebo znázornění). Pojem <em>revize</em> má v souvislosti se systémy správy verzí své historické kořeny — viz zmíněný systém RCS (Revision Control System). Je to pravděpodobně rozumný jednoslovný český pojem, kterým se dá nahradit jednoslovné vyjádření <em>commit</em>. V situacích vyžadujících přesnější představu budu používat raději dvouslovný „objekt revize“
</div>
</div><div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>