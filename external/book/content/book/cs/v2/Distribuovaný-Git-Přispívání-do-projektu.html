---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: cs
  chapter:
    title: Distribuovaný Git
    number: 5
  section:
    title: Přispívání do projektu
    number: 2
    cs_number: '5.2'
    previous: book/cs/v2/Distribuovaný-Git-Distribuované-pracovní-postupy
    next: book/cs/v2/Distribuovaný-Git-Správa-projektu
title: Git - Přispívání do projektu
url: "/book/cs/v2/Distribuovaný-Git-Přispívání-do-projektu.html"
---
<h2 id="_contributing_project">Přispívání do projektu</h2>
<div class="paragraph">
<p>
Hlavní potíž při popisu způsobu přispívání do projektu spočívá v tom, že existuje obrovské množství variací, jak se to dá udělat.
Git je velmi pružný, lidé mohou spolupracovat různými způsoby (a taky to tak dělají), takže není snadné popsat, jakým způsobem byste měli přispívat. Každý projekt je trochu jiný.
Mezi proměnné v tomto procesu patří počet aktivních přispěvatelů, zvolený pracovní postup, vaše oprávnění pro odesílání revizí a případně i metoda externího přispívání.</p>
</div>
<div class="paragraph">
<p>První proměnnou je počet aktivních přispěvatelů. Kolik uživatelů aktivně přispívá svým kódem do projektu a jak často?
V mnoha případech budete mít dva nebo tři vývojáře přispívající několika málo revizemi denně. U spících projektů to bude i méně.
U větších společností nebo u větších projektů může počet vývojářů dosahovat tisíců — při stovkách nebo tisících zápisů revizí (commit) denně.
Počet přispěvatelů je důležitý, protože s rostoucím počtem vývojářů narůstají i potíže se zajištěním toho, aby byl váš kód aplikován čistě, nebo aby ho bylo možné snadno začlenit (merge).
Vámi odeslané změny se mohou ukázat jako zastaralé nebo vážně narušené pracemi, které byly do projektu začleněny během vaší práce, nebo v době, kdy vaše změny čekaly na schválení či aplikaci.
Jak lze dosáhnout neustálé aktuálnosti vašeho kódu a platnosti vašich revizí?</p>
</div>
<div class="paragraph">
<p>Další proměnnou je pracovní postup, který se u projektu využívá.
Probíhá vývoj centralizovaně s tím, že každý vývojář má stejné oprávnění pro zápis do hlavní linie kódu?
Má projekt svého správce nebo integračního manažera, který kontroluje všechny záplaty?
Jsou všechny záplaty odborně posuzovány a schvalovány?
Jste součástí tohoto procesu?
Jsou součástí systému poručíci a musíte všechnu svou práci odesílat nejprve jim?</p>
</div>
<div class="paragraph">
<p>Další otázkou je vaše oprávnění k zapisování revizí.
Pracovní postup při přispívání do projektu se velmi liší podle toho, zda máte, či nemáte oprávnění k zápisu do projektu.
Pokud oprávnění k zápisu nemáte, jaké metodě se dává přednost při přijímání příspěvků?
Je nějaká strategie vůbec určena?
Kolik práce představuje jeden váš příspěvek?
A jak často přispíváte?</p>
</div>
<div class="paragraph">
<p>Všechny tyto otázky mohou mít vliv na efektivní přispívání do projektu a určují, jaký pracovní postup je vůbec možný a který bude upřednostněn.
Každou z těchto otázek si probereme na sérii praktických případů, postupně od jednodušších po složitější. Z uvedených příkladů byste si měli být schopni odvodit vlastní pracovní postup, který budete v praxi využívat.</p>
</div>
<div class="sect3">
<h3 id="_commit_guidelines">Pravidla pro zápis revizí</h3>
<div class="paragraph">
<p>Než se podíváme na konkrétní případy, uveďme rychlou poznámku o zprávách k revizím.
Pokud stanovíte dobrá pravidla pro vytváření revizí (commit) a pokud se jich budete držet, bude práce s Gitem a spolupráce s ostatními mnohem jednodušší.
Samotný projekt Git obsahuje dokument, v němž je navržena celá řada dobrých tipů pro vytváření revizí, z kterých se vytvářejí záplaty. Najdete ho ve zdrojovém kódu systému Git, v souboru <code>Documentation/SubmittingPatches</code>.</p>
</div>
<div class="paragraph">
<p>
Především nechcete odesílat chybně použité prázdné znaky (whitespace).
Git nabízí snadný způsob, jak tyto chyby zkontrolovat. Před zapsáním revize spusťte <code>git diff --check</code>, který zkontroluje prázdné znaky a zobrazí vám je.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/git-diff-check.png" >}}" alt="Výstup příkazu `git diff --check`.">
</div>
<div class="title">Figure 57. Výstup příkazu <code>git diff --check</code>.</div>
</div>
<div class="paragraph">
<p>Spustíte-li tento příkaz před zapsáním revize, můžete zjistit, zda se budou zapisovat i problematické prázdné znaky, které by mohly ostatní vývojáře obtěžovat.</p>
</div>
<div class="paragraph">
<p>Dále se snažte zapisovat každou revizi (commit) jako logicky oddělený soubor změn.
Pokud je to možné, snažte se, aby byly vaše změny stravitelné. Není právě ideální pracovat celý víkend na pěti různých problémech a v pondělí je všechny najednou odeslat formou jedné velké revize.
Když už během víkendu nebudete zapisovat revize, využijte v pondělí oblasti připravených změn pro rozdělení práce alespoň do stejného počtu revizí, kolik je řešených problémů, a přidejte k nim vysvětlující zprávy.
Pokud některé změny upravují stejný soubor, zkuste použít příkaz <code>git add --patch</code> a připravit soubory k zapsání po částech (podrobnosti jsou popsány v kapitole <a href="{{< relurl "book/cs/v2/ch00/_interactive_staging" >}}">Interactive Staging</a>).
Snímek projektu na vrcholu větve bude stejný, ať zapíšete jednu revizi, nebo pět (za předpokladu, že vložíte všechny změny). Snažte se proto usnadnit práci svým kolegům, kteří možná někdy budou vaše změny revidovat.
Takový přístup současně usnadňuje stahování změn (pull) nebo vracení jedné sady změn do původního stavu — bude-li to později třeba.
Podkapitola <a href="{{< relurl "book/cs/v2/ch00/_rewriting_history" >}}">Rewriting History</a> popisuje několik užitečných triků, jak v systému Git přepsat historii a jak interaktivně připravovat soubory k zapsání. Než svou práci odešlete ostatním, použijte tyto nástroje k udržení čisté a srozumitelné historie.</p>
</div>
<div class="paragraph">
<p>Poslední věcí, na kterou byste měli myslet, jsou zprávy k revizím.
Pokud si zvyknete připisovat k revizím kvalitní zprávy, bude pro vás práce s Gitem a spolupráce s ostatními mnohem jednodušší.
Základním pravidlem je, že by vaše zprávy měly začínat jedním řádkem, který nemá víc než asi 50 znaků a který popisuje sadu provedených změn. Za ním následuje prázdný řádek a potom podrobnější vysvětlení.
Projekt Git vyžaduje, aby podrobnější popis revize zahrnoval i vaši motivaci ke změnám a aby uvedl srovnání nové implementace s původním chováním. Tuto zásadu je dobré dodržovat.
Doporučuje se také, aby se pro zápis zpráv používal rozkazovací způsob.
Jinými slovy, formulujte je jako příkazy.
Místo „Přidal jsem testy pro“ nebo „Přidány testy pro“ použijte „Přidej testy pro“.
Zde je originální (přeložená) šablona, kterou napsal Tim Pope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">Krátké shrnutí změn (do 50 znaků)

Podrobnější vysvětlující text, pokud je třeba.  Zalamujte řádky
přibližně na 72 znaků.  Někdy se první řádek používá jako předmět
emailu a zbytek textu jako tělo dopisu.  Prázdný řádek, který
odděluje shrnutí od těla je nezbytně nutný (pokud tělo nevynecháte
úplně); nástroje jako rebase mohou být zmatené, pokud tyto části
neoddělíte.

Další odstavce se oddělují prázdným řádkem.

  - Můžete používat i odrážky.

  - Pro odrážku se typicky používá pomlčka nebo hvězdička,
    před kterou se uvádí jedna mezera. Mezi odrážky se vkládají
    prázdné řádky, ale tady se zvyklosti mohou lišit.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pokud budou všechny vaše zprávy k revizím vypadat takto, usnadníte tím práci sobě i svým spolupracovníkům.
Projekt Git obsahuje kvalitně naformátované zprávy k revizím. Zkuste spustit <code>git log --no-merges</code>, abyste se podívali, jak vypadá pěkně naformátovaná historie revizí projektu.</p>
</div>
<div class="paragraph">
<p>V následujících příkladech — a ve většině ukázek v knize — se takto pěkně naformátované zprávy nepoužívají kvůli stručnosti. Místo toho budeme používat volbu <code>-m</code> za příkazem <code>git commit</code>.
Dělejte to, jak říkám, a ne jak to dělám.</p>
</div>
</div>
<div class="sect3">
<h3 id="_private_team">Malý soukromý tým</h3>
<div class="paragraph">
<p>
Nejjednodušší situaci, s kterou se asi setkáte, představuje soukromý projekt s jedním nebo pár dalšími vývojáři.
„Soukromý“ v této souvislosti znamená s uzavřeným zdrojovým kódem — okolní svět k němu nemá přístup.
Vy a vaši ostatní vývojáři máte všichni oprávnění odesílat změny do repozitáře (push).</p>
</div>
<div class="paragraph">
<p>V takovém prostředí můžete uplatnit podobný pracovní postup, na jaký jste možná zvyklí ze systému Subversion nebo z jiného centralizovaného systému.
Přesto získáte výhody v takových ohledech, jako je zapisování revizí offline a podstatně snazší větvení a slučování. Pracovní postup však bude velmi podobný. Hlavním rozdílem je to, že slučování probíhá na straně klienta, a ne během zapisování revize na straně serveru.
Podívejme se, jak to může vypadat, když dva vývojáři začnou spolupracovat na projektu se sdíleným repozitářem.
První vývojář, John, naklonuje repozitář, provede změny a zapíše lokální revizi.
(V následujících příkladech byly zprávy protokolů nahrazeny třemi tečkami, abych je trochu zkrátil.)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Johnův počítač
$ git clone john@githost:simplegit.git
Cloning into 'simplegit'...
...
$ cd simplegit/
$ vim lib/simplegit.rb
$ git commit -am 'removed invalid default value'
[master 738ee87] removed invalid default value
 1 files changed, 1 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Druhá vývojářka, Jessica, učiní totéž — naklonuje repozitář a zapíše provedenou změnu:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Jessičin počítač
$ git clone jessica@githost:simplegit.git
Cloning into 'simplegit'...
...
$ cd simplegit/
$ vim TODO
$ git commit -am 'add reset task'
[master fbff5bc] add reset task
 1 files changed, 1 insertions(+), 0 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jessica teď odešle (push) svou práci na server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Jessičin počítač
$ git push origin master
...
To jessica@githost:simplegit.git
   1edee6b..fbff5bc  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Také John se pokusí odeslat své změny na server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Johnův počítač
$ git push origin master
To john@githost:simplegit.git
 ! [rejected]        master -&gt; master (non-fast forward)
error: failed to push some refs to 'john@githost:simplegit.git'</code></pre>
</div>
</div>
<div class="paragraph">
<p>John nemá povoleno odeslat změny, protože mezitím odeslala své změny Jessica.
Pochopit to je obzvlášť důležité v případě, kdy jste zvyklí na Subversion. Můžete si totiž všimnout, že oba vývojáři neupravovali stejný soubor.
Pokud byly upraveny různé soubory, provádí Subversion takové sloučení na serveru automaticky. Ale v Gitu musíte provést sloučení revizí (merge) lokálně.
John musí vyzvednout (fetch) změny, které provedla Jessica, a začlenit je (merge) do své práce. Teprve potom mu bude umožněno je odeslat (push):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch origin
...
From john@githost:simplegit
 + 049d078...fbff5bc master     -&gt; origin/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>V tomto okamžiku vypadá Johnův lokální repozitář nějak takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-1.png" >}}" alt="Johnova odchylující se historie.">
</div>
<div class="title">Figure 58. Johnova odchylující se historie.</div>
</div>
<div class="paragraph">
<p>John má k dispozici odkaz na změny, které odeslala Jessica, ale než bude moci sám odeslat svá data, bude muset začlenit její práci:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge origin/master
Merge made by recursive.
 TODO |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sloučení probíhá hladce — Johnova historie revizí teď vypadá takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-2.png" >}}" alt="Johnův repozitář po začlenění `origin/master`.">
</div>
<div class="title">Figure 59. Johnův repozitář po začlenění <code>origin/master</code>.</div>
</div>
<div class="paragraph">
<p>Teď může John svůj kód otestovat, aby se ujistil, že stále pracuje správně, a pak může odeslat svou novou sloučenou práci na server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin master
...
To john@githost:simplegit.git
   fbff5bc..72bbc59  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Johnova historie revizí nakonec vypadá takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-3.png" >}}" alt="Johnova historie po odeslání revize na server `origin`.">
</div>
<div class="title">Figure 60. Johnova historie po odeslání revize na server <code>origin</code>.</div>
</div>
<div class="paragraph">
<p>Jessica mezitím pracovala na tématické větvi.
Vytvořila tématickou větev s názvem <code>issue54</code> a zapsala do ní tři revize.
Zatím ještě nevyzvedla Johnovy změny, takže její historie revizí vypadá nějak takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-4.png" >}}" alt="Jessičina tématická větev.">
</div>
<div class="title">Figure 61. Jessičina tématická větev.</div>
</div>
<div class="paragraph">
<p>Jessica chce synchronizovat svou práci s Johnem, a proto vyzvedne jeho data:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Jessičin počítač
$ git fetch origin
...
From jessica@githost:simplegit
   fbff5bc..72bbc59  master     -&gt; origin/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tím stáhne práci, kterou mezitím odeslal John.
Historie revizí Jessicy teď vypadá takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-5.png" >}}" alt="Historie Jessicy po vyzvednutí Johnových změn.">
</div>
<div class="title">Figure 62. Historie Jessicy po vyzvednutí Johnových změn.</div>
</div>
<div class="paragraph">
<p>Jessica považuje svou tématickou větev za dokončenou, ale chce zjistit, co by měla do své práce začlenit, aby ji mohla odeslat.
Spustí proto příkaz <code>git log</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --no-merges issue54..origin/master
commit 738ee872852dfaa9d6634e0dea7a324040193016
Author: John Smith &lt;jsmith@example.com&gt;
Date:   Fri May 29 16:01:27 2009 -0700

   removed invalid default value</code></pre>
</div>
</div>
<div class="paragraph">
<p>Zápis <code>issue54..origin/master</code> představuje filtr příkazu, kterým se Gitu říká, aby zobrazil seznam jen těch objektů revize, které se nacházejí v druhé z větví (zde <code>origin/master</code>), ale které se nenacházejí v první větvi (zde <code>issue54</code>).
Podrobně se budeme touto syntaxí zabývat v části <a href="{{< relurl "book/cs/v2/ch00/_commit_ranges" >}}">Commit Ranges</a>.</p>
</div>
<div class="paragraph">
<p>Z výstupu vidíme, že existuje jediná revize, kterou zapsal John a kterou Jessica nesloučila se svou prací.
Pokud začlení <code>origin/master</code>, bude to jediná revize, která změní její lokální práci.</p>
</div>
<div class="paragraph">
<p>Teď může Jessica začlenit svou tématickou větev do své větve <code>master</code> (merge), pak začlenit Johnovu práci (<code>origin/master</code>) rovněž do své větve <code>master</code> a potom může vše znovu odeslat na server (push).
Nejdříve se přepne zpět na svou větev <code>master</code>, aby do ní mohla vše integrovat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
Switched to branch 'master'
Your branch is behind 'origin/master' by 2 commits, and can be fast-forwarded.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Buď může nejdříve začlenit <code>origin/master</code> nebo <code>issue54</code>. Obě revize jsou následníky té aktuální, takže na pořadí nezáleží.
Konečný snímek bude stejný, ať zvolí jakékoli pořadí. Trochu se bude lišit jen historie revizí.
Jessica se rozhodne začlenit nejdříve <code>issue54</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge issue54
Updating fbff5bc..4af4298
Fast forward
 README           |    1 +
 lib/simplegit.rb |    6 +++++-
 2 files changed, 6 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nevyskytly se žádné problémy. Jak vidíte, šlo o jednoduchý posun „rychle vpřed“.
Nyní Jessica začlení Johnovu práci (<code>origin/master</code>):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge origin/master
Auto-merging lib/simplegit.rb
Merge made by recursive.
 lib/simplegit.rb |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Začlenění proběhne čistě a Jessičina historie bude vypadat následovně:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-6.png" >}}" alt="Jessičina historie po začlenění Johnových změn.">
</div>
<div class="title">Figure 63. Jessičina historie po začlenění Johnových změn.</div>
</div>
<div class="paragraph">
<p>Větev <code>origin/master</code> je dosažitelná z Jessičiny větve <code>master</code>, takže by měla být schopná práci úspěšně odeslat (za předpokladu, že John mezitím neodeslal další revizi):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin master
...
To jessica@githost:simplegit.git
   72bbc59..8059c15  master -&gt; master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Každý z nich provedl několik zápisů (commit) a úspěšně začlenil práci toho druhého (merge).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-7.png" >}}" alt="Jessičina historie po odeslání všech změn zpět na server.">
</div>
<div class="title">Figure 64. Jessičina historie po odeslání všech změn zpět na server.</div>
</div>
<div class="paragraph">
<p>Toto je jeden z nejjednodušších pracovních postupů.
Po určitou dobu pracujete, obvykle na nějaké tématické větvi, a když je připravena k integraci, začleníte ji do své větve <code>master</code>.
Chcete-li tuto práci sdílet, pak vyzvednete (fetch) a začleníte (merge) případné změny z <code>origin/master</code> do vaší větve <code>master</code>. Nakonec odešlete všechna data do větve <code>master</code> na serveru (push).
Obvyklá posloupnost událostí vypadá takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/small-team-flow.png" >}}" alt="Obecná posloupnost událostí pro jednoduchý pracovní postup s více vývojáři.">
</div>
<div class="title">Figure 65. Obecná posloupnost událostí pro jednoduchý pracovní postup s více vývojáři.</div>
</div>
</div>
<div class="sect3">
<h3 id="_soukromý_řízený_tým">Soukromý řízený tým</h3>
<div class="paragraph">
<p>
V následujícím scénáři se podíváme na role přispěvatelů ve větší soukromé skupině.
Naučíte se, jak pracovat v prostředí, v němž na jednotlivých úkolech spolupracují malé skupiny a tyto týmové příspěvky jsou poté integrovány jinou skupinou.</p>
</div>
<div class="paragraph">
<p>Řekněme, že John a Jessica spolupracují na jednom úkolu, zatímco Jessica a Josie pracují na jiném.
Společnost v tomto případě používá typ pracovního postupu s integračním manažerem, kdy práci jednotlivých skupin integrují pouze někteří inženýři a větev <code>master</code> hlavního repozitáře mohou aktualizovat pouze oni.
V tomto scénáři se veškerá práce provádí ve větvích jednotlivých týmů a později je spojována integrátory.</p>
</div>
<div class="paragraph">
<p>Sledujme pracovní postup Jessicy pracující na dvou úkolech a spolupracující v tomto prostředí paralelně s dvěma různými vývojáři.
Protože už má naklonovaný repozitář, rozhodne se pracovat nejprve na úkolu <code>featureA</code>.
Vytvoří si pro něj novou větev a udělá v ní kus práce:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Jessičin počítač
$ git checkout -b featureA
Switched to a new branch 'featureA'
$ vim lib/simplegit.rb
$ git commit -am 'add limit to log function'
[featureA 3300904] add limit to log function
 1 files changed, 1 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>V tomto okamžiku potřebuje sdílet svou práci s Johnem, a tak odešle revize své větve <code>featureA</code> na server.
Jessica nemá oprávnění pro odesílání dat do větve <code>master</code> (ten mají pouze integrátoři), takže aby mohla s Johnem spolupracovat, musí své revize odeslat do jiné větve:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push -u origin featureA
...
To jessica@githost:simplegit.git
 * [new branch]      featureA -&gt; featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jessica e-mailem Johnovi sdělí, že odeslala svou práci do větve pojmenované <code>featureA</code> a že se na ni může podívat.
Zatímco čeká na zpětnou vazbu od Johna, rozhodne se, že začne pracovat spolu s Josie na úkolu <code>featureB</code>.
Začne tím, že založí novou větev, která vychází ze serverové větve <code>master</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console"># Jessičin počítač
$ git fetch origin
$ git checkout -b featureB origin/master
Switched to a new branch 'featureB'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jessica nyní vytvoří několik revizí ve větvi <code>featureB</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ vim lib/simplegit.rb
$ git commit -am 'made the ls-tree function recursive'
[featureB e5b0fdc] made the ls-tree function recursive
 1 files changed, 1 insertions(+), 1 deletions(-)
$ vim lib/simplegit.rb
$ git commit -am 'add ls-files'
[featureB 8512791] add ls-files
 1 files changed, 5 insertions(+), 0 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jessičin repozitář vypadá nějak takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/managed-team-1.png" >}}" alt="Jessičina výchozí historie revizí.">
</div>
<div class="title">Figure 66. Jessičina výchozí historie revizí.</div>
</div>
<div class="paragraph">
<p>Je připravena odeslat svou práci, ale dostane e-mail od Josie, že již na server odeslala větev <code>featureBee</code>, v níž už je část práce hotová.
Než bude Jessica moci odeslat svou práci na server, musí do ní nejprve začlenit práci Josie.
Změny, které Josie provedla, vyzvedne příkazem <code>git fetch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch origin
...
From jessica@githost:simplegit
 * [new branch]      featureBee -&gt; origin/featureBee</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nyní může Jessica začlenit tyto změny do své práce příkazem <code>git merge</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge origin/featureBee
Auto-merging lib/simplegit.rb
Merge made by recursive.
 lib/simplegit.rb |    4 ++++
 1 files changed, 4 insertions(+), 0 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tady nastává drobný problém. Musí odeslat sloučenou práci ze své větve <code>featureB</code> do větve <code>featureBee</code> na serveru.
Může tak učinit příkazem <code>git push</code> s určením lokální větve, za níž bude následovat dvojtečka (:) a za ní vzdálená větev:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push -u origin featureB:featureBee
...
To jessica@githost:simplegit.git
   fba9af8..cd685d1  featureB -&gt; featureBee</code></pre>
</div>
</div>
<div class="paragraph">
<p>Říká se tomu <em>refspec</em>.
Podrobnější diskusi o specifikaci gitových referencí a o různých možnostech práce s nimi najdete v kapitole <a href="{{< relurl "book/cs/v2/ch00/_refspec" >}}">The Refspec</a>.
Všimněte si též příznaku <code>-u</code>. Jde o zkratku pro volbu <code>--set-upstream</code>, která se používá k nastavení větví pro pozdější zjednodušené odesílání (push) a stahování (pull).</p>
</div>
<div class="paragraph">
<p>John poté pošle Jessice e-mail, aby jí sdělil, že odeslal několik změn do větve <code>featureA</code>, a poprosí ji, aby je ověřila.
Jessica je stáhne spuštěním příkazu <code>git fetch</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git fetch origin
...
From jessica@githost:simplegit
   3300904..aad881d  featureA   -&gt; origin/featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>Poté si může příkazem <code>git log</code> prohlédnout, co všechno bylo změněno:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log featureA..origin/featureA
commit aad881d154acdaeb2b6b18ea0e827ed8a6d671e6
Author: John Smith &lt;jsmith@example.com&gt;
Date:   Fri May 29 19:57:33 2009 -0700

    changed log output to 30 from 25</code></pre>
</div>
</div>
<div class="paragraph">
<p>Nakonec začlení Johnovu práci do své vlastní větve <code>featureA</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout featureA
Switched to branch 'featureA'
$ git merge origin/featureA
Updating 3300904..aad881d
Fast forward
 lib/simplegit.rb |   10 +++++++++-
1 files changed, 9 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jessica by ráda něco vylepšila, a proto vytvoří novou revizi a odešle ji zpět na server:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit -am 'small tweak'
[featureA 774b3ed] small tweak
 1 files changed, 1 insertions(+), 1 deletions(-)
$ git push
...
To jessica@githost:simplegit.git
   3300904..774b3ed  featureA -&gt; featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>Historie revizí Jessicy bude nyní vypadat takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/managed-team-2.png" >}}" alt="Jessičina historie po zapsání revizí do větve s úkolem.">
</div>
<div class="title">Figure 67. Jessičina historie po zapsání revizí do větve s úkolem.</div>
</div>
<div class="paragraph">
<p>Jessica, Josie a John pošlou zprávu integrátorům, že větve <code>featureA</code> a <code>featureBee</code> jsou na serveru připraveny k integraci do hlavní linie.
Poté, co integrátoři uvedené větve začlení do hlavní linie, bude možné vyzvednout (fetch) nový bod sloučení (merge commit) a historie revizí bude vypadat takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/managed-team-3.png" >}}" alt="Historie Jessicy po začlenění obou jejích tématických větví.">
</div>
<div class="title">Figure 68. Historie Jessicy po začlenění obou jejích tématických větví.</div>
</div>
<div class="paragraph">
<p>Mnoho skupin přechází na Git právě kvůli této možnosti paralelní spolupráce několika týmů a možnosti slučování různých linií práce až v pozdějších fázích procesu.
Možnost spolupráce menších podskupin týmu prostřednictvím vzdálených větví — aniž by si práce vyžádala účast celého týmu nebo aby bránila ostatním v jiné práci — patří k obrovským výhodám Gitu.
Posloupnost událostí ve zde popsaném pracovním postupu vypadá takto:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/managed-team-flow.png" >}}" alt="Základní posloupnost událostí pracovního postupu řízeného týmu.">
</div>
<div class="title">Figure 69. Základní posloupnost událostí pracovního postupu řízeného týmu.</div>
</div>
</div>
<div class="sect3">
<h3 id="_public_project">Odštěpený veřejný projekt</h3>
<div class="paragraph">
<p>
Přispívání do veřejných projektů je trochu odlišné.
Protože nemáte oprávnění k tomu, abyste mohli aktualizovat větve projektu přímo, musíte svou práci správcům doručit nějakým jiným způsobem.
První příklad popisuje, jak se přispívá s využitím odštěpení (fork) na gitovských hostitelských serverech, které podporují snadné vytváření odštěpených projektů.
Tento mechanismus podporuje řada hostitelských serverů (včetně GitHub, BitBucket, Google Code, repo.or.cz a dalších) a řada správců projektů takový styl přispívání očekává.
Další část pojednává o projektech, které upřednostňují přijímání záplat posílaných e-mailem.</p>
</div>
<div class="paragraph">
<p>Nejdříve pravděpodobně naklonujete hlavní repozitář, vytvoříte tématickou větev — pro záplatu nebo pro posloupnost záplat, kterými chcete přispět — a zde vaši práci zrealizujete.
Posloupnost příkazů vypadá v podstatě takto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git clone (url)
$ cd project
$ git checkout -b featureA
# (něco uděláte)
$ git commit
# (něco uděláte)
$ git commit</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Možná budete chtít použít <code>rebase -i</code>, abyste svou práci stlačili do jediného zápisu revize, nebo budete chtít práci přeuspořádat do posloupnosti revizí, která správci usnadní zkoumání záplat. Další informace o interaktivním přeskládání najdete v části <a href="{{< relurl "book/cs/v2/ch00/_rewriting_history" >}}">Rewriting History</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Až budete s prací ve větvi hotovi a budete ji chtít poslat zpět správcům, přejděte na původní stránku projektu a klikněte na tlačítko „Fork“, čímž vytvoříte vlastní odštěpený projekt, do kterého budete moci zapisovat.
Poté musíte URL adresu tohoto nového repozitáře přidat jako druhý vzdálený repozitář, v tomto případě pojmenovaný <code>myfork</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git remote add myfork (url)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do něj teď musíte odeslat svou práci (push).
Lepší bude, když do repozitáře odešlete svou tématickou větev (v které pracujete) než abyste výsledek začlenili do své větve <code>master</code> (merge) a odesílali tuto větev.
Důvod je ten, že pokud nebude vaše práce přijata, nebo pokud z ní budou převzaty jen některé revize, nebudete muset svou větev <code>master</code> vracet zpět.
Pokud správci provedou sloučení (merge), přeskládání (rebase) nebo částečné převzetí vaší práce (cherry-pick), budete stejně muset stáhnout změny z jejich repozitáře (pull):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push -u myfork featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>
Pokud jste práci odeslali do odštěpeného repozitáře, musíte to správci oznámit.
Často se tomu říká „pull request“, čili požadavek na stažení. Můžete ho vytvořit prostřednictvím webové stránky — GitHub má svůj vlastní mechanismus Pull Request, kterým se budeme zabývat v kapitole <a href="{{< relurl "book/cs/v2/ch00/_github" >}}">GitHub</a> — nebo můžete spustit příkaz <code>git request-pull</code> a správci projektu ručně zaslat výstup příkazu e-mailem.</p>
</div>
<div class="paragraph">
<p>Příkazu <code>request-pull</code> se zadává základní větev, do které chcete nechat vaši tématickou větev vtáhnout, a URL adresa gitového repozitáře, z kterého se má změna stahovat. Příkaz vypíše shrnutí všech změn, které by měly být vtaženy.
Pokud chce například Jessica poslat Johnovi požadavek na stažení a vytvořila předtím dvě revize v tématické větvi, kterou právě odeslala, může zadat tento příkaz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git request-pull origin/master myfork
The following changes since commit 1edee6b1d61823a2de3b09c160d7080b8d1b3a40:
  John Smith (1):
        added a new function

are available in the git repository at:

  git://githost/simplegit.git featureA

Jessica Smith (2):
      add limit to log function
      change log output to 30 from 25

 lib/simplegit.rb |   10 +++++++++-
 1 files changed, 9 insertions(+), 1 deletions(-)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Výstup příkazu lze odeslat správci. Říká mu, odkud daná větev vychází, podá mu přehled o revizích a řekne mu, odkud lze práci stáhnout.</p>
</div>
<div class="paragraph">
<p>U projektů, kde nevystupujete jako správce, je většinou jednodušší, aby vaše větev <code>master</code> stále sledovala větev <code>origin/master</code> a abyste práci prováděli v tématických větvích, které můžete v případě odmítnutí snadno odstranit.
Izolováním tématických úkolů do tématických větví si také usnadníte přeskládání vaší práce v případě, kdy se vrchol v hlavním repozitáři mezi tím posunul a vaše revize se už nedají čistě aplikovat.
Pokud například chcete do projektu odeslat druhé pracovní téma, nepokračujte v práci v tématické větvi, kterou jste právě odeslali. Začněte znovu od začátku z větve <code>master</code> hlavního repozitáře:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b featureB origin/master
# (nějaká práce)
$ git commit
$ git push myfork featureB
# (odeslání e-mailu správci)
$ git fetch origin</code></pre>
</div>
</div>
<div class="paragraph">
<p>Teď je každé z vašich témat obsaženo v samostatném zásobníku — podobá se frontě záplat — a můžete je přepsat, přeskládat a upravit, aniž by se obě témata navzájem ovlivňovala nebo aby se mezi nimi vytvářela vzájemná závislost, viz obrázek:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/public-small-1.png" >}}" alt="Počáteční historie revizí s prací na `featureB`.">
</div>
<div class="title">Figure 70. Počáteční historie revizí s prací na <code>featureB</code>.</div>
</div>
<div class="paragraph">
<p>Řekněme, že správce projektu vtáhl do projektu několik jiných záplat a vyzkoušel vaši první větev, ale ta už se nedá začlenit čistě.
V takovém případě můžete zkusit přeskládat tuto větev na vrchol větve <code>origin/master</code>, vyřešit za správce vzniklé konflikty a poté své změny ještě jednou odeslat:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout featureA
$ git rebase origin/master
$ git push -f myfork featureA</code></pre>
</div>
</div>
<div class="paragraph">
<p>Tím se vaše historie přepíše a bude vypadat jako na obrázku <a href="{{< relurl "book/cs/v2/ch00/psp_b" >}}">Historie revizí po přeskládání práce z <code>featureA</code>.</a>.</p>
</div>
<div id="psp_b" class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/public-small-2.png" >}}" alt="Historie revizí po přeskládání práce z `featureA`.">
</div>
<div class="title">Figure 71. Historie revizí po přeskládání práce z <code>featureA</code>.</div>
</div>
<div class="paragraph">
<p>Protože jste větev přeskládali, musíte u příkazu pro odesílání (push) přidat <code>-f</code>, abyste mohli serverové větvi <code>featureA</code> podsunout revizi, která není jejím potomkem.
Druhou možností by bylo odeslání nové práce na server do jiné větve (nazvané třeba <code>featureAv2</code>).</p>
</div>
<div class="paragraph">
<p>Podívejme se ještě na jeden možný scénář: Správce se podíval na práci ve vaší druhé větvi a tento koncept se mu líbí, ale rád by, abyste změnili jeden implementační detail.
Této příležitosti využijete i k tomu, abyste za základ své práce vzali aktuální stav projektu ve větvi <code>master</code>.
Začnete vytvořením nové větve z aktuální větve <code>origin/master</code>, nacpete (squash) do ní změny z <code>featureB</code>, vyřešíte případné konflikty, provedete požadovanou úpravu implementace a vše odešlete jako novou větev:</p>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b featureBv2 origin/master
$ git merge --squash featureB
# (změníte implementaci)
$ git commit
$ git push myfork featureBv2</code></pre>
</div>
</div>
<div class="paragraph">
<p>Volba <code>--squash</code> (stlačit) zajistí převzetí všech změn ze začleňované větve a stlačí je do podoby jedné sady změn, která vede ke stejnému stavu repozitáře, jako kdyby se provedlo opravdové sloučení (merge), ale nevytvoří se při tom bod sloučení<sup class="footnote">[<a id="_footnoteref_16" class="footnote" href="#_footnotedef_16" title="View footnote.">16</a>]</sup> (merge commit).
To znamená, že váš budoucí objekt revize bude mít jen jednoho rodiče a přitom vám umožní vnést všechny změny z jiné větve a poté provést další úpravy ještě před tím, než se nová revize zapíše.
V případě základního procesu slučování (merge) může být užitečná i volba <code>--no-commit</code>, která oddálí vytvoření bodu sloučení.</p>
</div>
<div class="paragraph">
<p>Teď už můžete správci zaslat zprávu, že jste provedli požadované změny a že je najde ve vaší větvi <code>featureBv2</code>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/cs/v2/images/public-small-3.png" >}}" alt="Historie revizí po práci ve větvi `featureBv2`.">
</div>
<div class="title">Figure 72. Historie revizí po práci ve větvi <code>featureBv2</code>.</div>
</div>
</div>
<div class="sect3">
<h3 id="_project_over_email">Veřejný projekt využívající elektronickou poštu</h3>
<div class="paragraph">
<p>Mnoho projektů si vytvořilo vlastní procedury pro přijímání záplat. Konkrétní pravidla si u každého projektu budete muset zjistit, protože budou odlišná.
Protože existuje několik starších, větších projektů, kde se záplaty přijímají prostřednictvím vývojářské poštovní konference<sup class="footnote">[<a id="_footnoteref_17" class="footnote" href="#_footnotedef_17" title="View footnote.">17</a>]</sup>, projdeme si teď podobný příklad.</p>
</div>
<div class="paragraph">
<p>Pracovní postup je podobný jako v předchozím případě. Pro každou sérii záplat, na níž pracujete, vytvoříte samostatnou tématickou větev.
Odlišnost spočívá ve způsobu doručování změn do projektu.
Místo vytváření odštěpeného projektu a odesílání změn (push) do vlastní zapisovatelné verze, vygenerujete e-mailovou verzi každé série revizí a pošlete je e-mailem do poštovní konference vývojářů:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b topicA
# (práce)
$ git commit
# (práce)
$ git commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>
Teď máte dvě revize, které chcete odeslat do poštovní konference.
Pro vygenerování souborů v podobě vhodné pro zaslání poštou použijete příkaz <code>git format-patch</code>. Každá revize se tím přetransformuje na e-mailovou zprávu, jejíž předmět bude tvořit první řádek zprávy k revizi a tělo e-mailu bude tvořeno zbytkem zprávy a samotnou záplatou.
Výhodou tohoto postupu je, že se při aplikaci záplaty z e-mailu, který byl vygenerován příkazem <code>format-patch</code>, korektně převezmou všechny informace o revizi.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git format-patch -M origin/master
0001-add-limit-to-log-function.patch
0002-changed-log-output-to-30-from-25.patch</code></pre>
</div>
</div>
<div class="paragraph">
<p>Příkaz <code>format-patch</code> vypíše názvy souborů záplaty, kterou vytváří.
Přepínač <code>-M</code> řekne systému Git, aby zkontroloval případné přejmenování.
Soubory nakonec vypadají takto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat 0001-add-limit-to-log-function.patch
From 330090432754092d704da8e76ca5c05c198e71a8 Mon Sep 17 00:00:00 2001
From: Jessica Smith &lt;jessica@example.com&gt;
Date: Sun, 6 Apr 2008 10:17:23 -0700
Subject: [PATCH 1/2] add limit to log function

Limit log functionality to the first 20

---
 lib/simplegit.rb |    2 +-
 1 files changed, 1 insertions(+), 1 deletions(-)

diff --git a/lib/simplegit.rb b/lib/simplegit.rb
index 76f47bc..f9815f1 100644
--- a/lib/simplegit.rb
+++ b/lib/simplegit.rb
@@ -14,7 +14,7 @@ class SimpleGit
   end

   def log(treeish = 'master')
-    command("git log #{treeish}")
+    command("git log -n 20 #{treeish}")
   end

   def ls_tree(treeish = 'master')
--
2.1.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>Do souborů se záplatami můžete dodatečně připsat další informace, které jsou určeny pro poštovní konferenci, ale které nechcete vkládat do zprávy k revizi.
Pokud mezi řádek <code>---</code> a začátek záplaty (řádek <code>lib/simplegit.rb</code>) přidáte nějaký text, mohou si ho vývojáři přečíst; ale při aplikaci záplaty se nepoužije.</p>
</div>
<div class="paragraph">
<p>Při odesílání souboru do poštovní konference můžete soubor buď vložit do svého poštovního programu, nebo ho můžete odeslat z příkazového řádku.
Vkládání textu často způsobuje problémy s formátováním, zvlášť v případě některých „chytřejších“ klientů, kteří správně nezachovávají zalamování řádků a prázdné znaky (whitespace).
Git naštěstí nabízí nástroj, který vám pomůže odeslat správně formátované záplaty protokolem IMAP, což pro vás může být jednodušší.
Ukážeme si, jak se dá záplata odeslat přes Gmail, což je nástroj pro poštu, který známe nejlépe. Podrobné pokyny pro používání celé řady poštovních programů najdete na konci dříve zmíněného souboru <code>Documentation/SubmittingPatches</code> ve zdrojovém kódu systému Git.</p>
</div>
<div class="paragraph">
<p>
Nejdříve si musíte ve vašem souboru <code>~/.gitconfig</code> nastavit sekci „imap“.
Každou hodnotu můžete nastavit zvlášť pomocí série příkazů <code>git config</code>, nebo můžete vložit hodnoty ručně. Na závěr by ale měl váš konfigurační soubor vypadat nějak takto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[imap]
  folder = "[Gmail]/Drafts"
  host = imaps://imap.gmail.com
  user = user@gmail.com
  pass = p4ssw0rd
  port = 993
  sslverify = false</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pokud váš server IMAP nepoužívá SSL, nebudou zřejmě dva poslední řádky vůbec třeba a hodnota hostitele bude <code>imap://</code>, a nikoli <code>imaps://</code>.
Až toto nastavení dokončíte, můžete použít příkaz <code>git imap-send</code>, jímž umístíte sérii záplat (patch) do složky Drafts zadaného serveru IMAP:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ cat *.patch |git imap-send
Resolving imap.gmail.com... ok
Connecting to [74.125.142.109]:993... ok
Logging in...
sending 2 messages
100% (2/2) done</code></pre>
</div>
</div>
<div class="paragraph">
<p>V tomto okamžiku byste měli být schopni přejít do své složky Drafts, změnit pole <strong>To</strong> na adresu poštovní konference, do které záplatu posíláte, případně pole <strong>CC</strong> na správce nebo na osobu odpovědnou za tuto část, a odeslat.</p>
</div>
<div class="paragraph">
<p>Záplaty můžete odesílat i přes SMTP server.
Můžete rovněž nastavit každou hodnotu zvlášť sérií příkazů <code>git config</code>, nebo je můžete vložit ručně do sekce sendemail vašeho souboru <code>~/.gitconfig</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ini" data-lang="ini">[sendemail]
  smtpencryption = tls
  smtpserver = smtp.gmail.com
  smtpuser = user@gmail.com
  smtpserverport = 587</code></pre>
</div>
</div>
<div class="paragraph">
<p>Jakmile je to hotové, můžete záplaty odeslat příkazem <code>git send-email</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git send-email *.patch
0001-added-limit-to-log-function.patch
0002-changed-log-output-to-30-from-25.patch
Who should the emails appear to be from? [Jessica Smith &lt;jessica@example.com&gt;]
Emails will be sent from: Jessica Smith &lt;jessica@example.com&gt;
Who should the emails be sent to? jessica@example.com
Message-ID to be used as In-Reply-To for the first email? y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git poté vytvoří log s určitými informacemi, který bude pro každou odesílanou záplatu vypadat asi takto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-text" data-lang="text">(mbox) Adding cc: Jessica Smith &lt;jessica@example.com&gt; from
  \line 'From: Jessica Smith &lt;jessica@example.com&gt;'
OK. Log says:
Sendmail: /usr/sbin/sendmail -i jessica@example.com
From: Jessica Smith &lt;jessica@example.com&gt;
To: jessica@example.com
Subject: [PATCH 1/2] added limit to log function
Date: Sat, 30 May 2009 13:29:15 -0700
Message-Id: &lt;1243715356-61726-1-git-send-email-jessica@example.com&gt;
X-Mailer: git-send-email 1.6.2.rc1.20.g8c5b.dirty
In-Reply-To: &lt;y&gt;
References: &lt;y&gt;

Result: OK</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_shrnutí_5">Shrnutí</h3>
<div class="paragraph">
<p>Tato část se zabývala obvyklými pracovními postupy, které týkají několika velmi odlišných typů gitových projektů, s kterými se asi setkáte. Uvedla pár nových nástrojů, které vám pomohou celý proces zvládnout.
V další části uvidíte, jak se pracuje na druhé straně — jak se spravuje gitový projekt.
Dozvíte se, jak být benevolentním diktátorem nebo integračním manažerem.</p>
</div>
</div>
<div id='footnotes'>
<hr>
<div class="footnote" id="_footnotedef_16">
<a href="#_footnoteref_16">16</a>. Pozn. překl.: Nezapíše se tedy revize. Jinými slovy, nevytvoří se žádný objekt revize. Změny budou promítnuté jen to pracovního stromu.
</div>
<div class="footnote" id="_footnotedef_17">
<a href="#_footnoteref_17">17</a>. mailing list
</div>
</div><div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>