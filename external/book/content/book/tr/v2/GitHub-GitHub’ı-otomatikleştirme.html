---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: tr
  chapter:
    title: GitHub
    number: 6
  section:
    title: GitHub’ı otomatikleştirme
    number: 4
    cs_number: '6.4'
    previous: book/tr/v2/GitHub-Kurumsal-Yönetim
    next: book/tr/v2/GitHub-Özet
title: Git - GitHub’ı otomatikleştirme
url: "/book/tr/v2/GitHub-GitHub’ı-otomatikleştirme.html"
---
<h2 id="_githubı_otomatikleştirme">GitHub’ı otomatikleştirme</h2>
<div class="paragraph">
<p>Şimdi GitHub’ın tüm önemli özelliklerini ve iş akışlarını ele aldık, ancak büyük bir grup veya projenin her zaman yapabileceği özelleştirmeler veya eklemek isteyebileceği harici hizmetler olacaktır.</p>
</div>
<div class="paragraph">
<p>Neyse ki, GitHub birçok yönden oldukça esnek.
Bu bölümde, GitHub’ın kanca (hook) sistemi ve API’sini nasıl kullanacağımızı ve GitHub’ı istediğimiz gibi çalıştırmak için nasıl kullanabileceğimizi ele alacağız.</p>
</div>
<div class="sect3">
<h3 id="_kancalar_ve_hizmetler_hooks_and_services">Kancalar ve Hizmetler (Hooks and Services)</h3>
<div class="paragraph">
<p>GitHub repo yönetiminin "Hooks and Services" (Kancalar ve Hizmetler) bölümü, GitHub’ı harici sistemlerle etkileştirmenin en kolay yoludur.</p>
</div>
<div class="sect4">
<h4 id="_hizmetler_services">Hizmetler (Services)</h4>
<div class="paragraph">
<p>Öncelikle Hizmetlere bir göz atalım.
Kancalar ve Hizmetler entegrasyonlarını, reponuzun - daha önce ortak eklemeyi ve projenizin varsayılan dalını değiştirdiğimiz yer olan- "Settings" (Ayarlar) bölümünde bulabilirsiniz.
``Webhooks and Services`` (ağ Kancaları ve Hizmetler) sekmesi altında <a href="{{< relurl "book/tr/v2/ch00/_services_hooks" >}}">Hizmetler ve Kancalar yapılandırma bölümü.</a> gibi bir şey göreceksiniz.</p>
</div>
<div id="_services_hooks" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-01-services.png" >}}" alt="Hizmetler ve kancalar">
</div>
<div class="title">Görsel 129. Hizmetler ve Kancalar yapılandırma bölümü.</div>
</div>
<div class="paragraph">
<p>Çoğu diğer ticari ve açık kaynak sistemlere entegrasyon sunan onlarca hizmet arasından dileğinizi seçebilirsiniz.
Bunların çoğu, daimi entegrasyon hizmetleri, hata ve sorun izleyicileri, sohbet odası sistemleri ve belgeleme sistemleri içindir.
Şimdi bunlar içerisinden, çok basit bir hizmet olan E-posta kanca hizmetini kurmayı göstereceğiz.
Eğer ``Add Service`` (Hizmet Ekle) açılır menüsünden ``email`’i seçerseniz, karşınıza <a href="{{< relurl "book/tr/v2/ch00/_service_config" >}}">E-posta hizmet yapılandırması.</a> gibi bir yapılandırma ekranı çıkar.</p>
</div>
<div id="_service_config" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-02-email-service.png" >}}" alt="E-posta hizmeti">
</div>
<div class="title">Görsel 130. E-posta hizmet yapılandırması.</div>
</div>
<div class="paragraph">
<p>Burada ``Add service`` (Hizmet ekle) düğmesine basarsak, birisi repomuza her itme yaptığında belirttiğimiz e-posta adresine bir e-posta gelir.
Hizmetler birçok farklı türde etkinlik dinleyebilir, ancak çoğu yalnızca itme etkinliklerini dinler ve ardından bu verilerle bir şeyler yapar.</p>
</div>
<div class="paragraph">
<p>Eğer GitHub ile entegre etmek istediğiniz bir sistem varsa, burada mevcut bir servis entegrasyonu olup olmadığını kontrol etmelisiniz.
Örneğin, kod tabanınızda testleri çalıştırmak için Jenkins kullanıyorsanız, Jenkins’in yerleşik hizmet entegrasyonunu etkinleştirerek, biri reponuza itme yaptığında bir test çalıştırabilirsiniz.</p>
</div>
</div>
<div class="sect4">
<h4 id="_kancalar_hooks_2">Kancalar (Hooks)</h4>
<div class="paragraph">
<p>Eğer daha belirli bir ihtiyacınız varsa veya bu listede bulunmayan bir servis veya siteyle entegre olmak istiyorsanız, daha genel kancaları kullanabilirsiniz.
GitHub repo kancaları oldukça basittir.
Bir URL belirtirsiniz ve GitHub istediğiniz herhangi bir etkinlikte o URL’ye bir HTTP yükü (payload) gönderir.</p>
</div>
<div class="paragraph">
<p>Bu genellikle, GitHub kancası yükünü dinlemesi için küçük bir ağ hizmeti kurulması ve veri alındığında onunla bir şeyler yapması şeklinde çalışır.</p>
</div>
<div class="paragraph">
<p>Bir kancayı etkinleştirmek için <a href="{{< relurl "book/tr/v2/ch00/_services_hooks" >}}">Hizmetler ve Kancalar yapılandırma bölümü.</a>'daki ``Add webhook`` (ağ kancası ekle) düğmesine tıklarsınız.
Bu sizi <a href="{{< relurl "book/tr/v2/ch00/_web_hook" >}}">Ağ kancası yapılandırması.</a> gibi bir sayfaya götürecektir.</p>
</div>
<div id="_web_hook" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-03-webhook.png" >}}" alt="Ağ kancası">
</div>
<div class="title">Görsel 131. Ağ kancası yapılandırması.</div>
</div>
<div class="paragraph">
<p>Bir ağ kancasını yapılandırmak çok basittir.
Çoğu durumda, sadece bir URL ve bir gizli anahtar girip, ardından ``Add webhook`` (Webhook ekle) düğmesine tıklarsınız.
GitHub’ın size bir yük göndermesini istediğiniz olaylar için birkaç seçenek vardır.
Varsayılan olarak, yalnızca birisi herhangi bir repo dalına yeni bir kod ittiğinde bir yük alacağınız <em>push</em> (itme) olayıdır.</p>
</div>
<div class="paragraph">
<p>Bir ağ kancasını yönetmek üzere ayarlayabileceğiniz bir ağ hizmetinin küçük bir örneğini görelim.
Oldukça kısa olduğundan ve ne yaptığımızı kolayca anlayabilmeniz gerektiğinden, Ruby ağ çerçevesi (framework) Sinatra’yı kullanacağız.</p>
</div>
<div class="paragraph">
<p>Diyelim ki, belirli bir kişinin, belirli bir dosyayı değiştirerek, belirli bir dala ittiğinde bir e-posta almak istiyoruz.
Bunu aşağıdaki gibi bir kodla çok kolay bir şekilde yapabiliriz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'sinatra'
require 'json'
require 'mail'

post '/payload' do
  push = JSON.parse(request.body.read) # parse the JSON

  # gather the data we're looking for
  pusher = push["pusher"]["name"]
  branch = push["ref"]

  # get a list of all the files touched
  files = push["commits"].map do |commit|
    commit['added'] + commit['modified'] + commit['removed']
  end
  files = files.flatten.uniq

  # check for our criteria
  if pusher == 'schacon' &amp;&amp;
     branch == 'ref/heads/special-branch' &amp;&amp;
     files.include?('special-file.txt')

    Mail.deliver do
      from     'tchacon@example.com'
      to       'tchacon@example.com'
      subject  'Scott Changed the File'
      body     "ALARM"
    end
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Burada GitHub’ın bize sunduğu JSON verisini alıp; kimin ittiğini, hangi dalı ittiğini ve hangi dosyaların değiştirildiğini kontrol ediyoruz.
Ardından, yukarıdaki kriterlere göre kontrol edip, eşleşiyorsa bir e-posta gönderiyoruz.</p>
</div>
<div class="paragraph">
<p>Böyle bir şey geliştirmek ve test etmek için, kancayı kurduğunuz ekranda güzel bir geliştirici konsolunuz bulunur.
GitHub’ın bu kanca için dağıtmaya çalıştığı son birkaç teslimatı görebilirsiniz.
Her kanca için: ne zaman teslim edildiğini, başarılı olup olmadığını, istek ve yanıtın gövdesini ve başlıklarını inceleyebilirsiniz.
Bu, kancalarınızı test etmeyi ve hataları ayıklamayı (debug) inanılmaz derecede kolaylaştırır.</p>
</div>
<div id="_web_hook_debug" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-04-webhook-debug.png" >}}" alt="Ağ kancası hata ayıklama">
</div>
<div class="title">Görsel 132. Ağ kancası hata ayıklama bilgileri.</div>
</div>
<div class="paragraph">
<p>Bunun diğer bir harika özelliği, hizmetinizi kolayca test etmek için yüklerden herhangi birini yeniden gönderebilmenizdir.</p>
</div>
<div class="paragraph">
<p>Web kancalarının nasıl yazılacağı ve dinleyebileceğiniz tüm farklı olay (event) türleri hakkında daha fazla bilgi için [GitHub Geliştirici belgelerine](<a href="https://developer.github.com/webhooks/" class="bare">https://developer.github.com/webhooks/</a>) bakabilirsiniz.</p>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_github_api">GitHub API</h3>
<div class="paragraph">
<p>
Hizmetler ve kancalar, repolarınızda gerçekleşen olaylar hakkında bildirim almanızı sağlar, ancak ya bu olaylar hakkında daha fazla bilgiye ihtiyacınız varsa!
Örneğin, projeye çalışma arkadaşı veya konulara etiket eklemek gibi bir şeyi otomatikleştirmeniz gerekiyorsa ne yapacaksınız?</p>
</div>
<div class="paragraph">
<p>İşte GitHub API’sinin devreye girdiği yer burasıdır.
GitHub, hemen hemen ağ sayfasındaki neredeyse her şeyi otomatikleştirebileceğiniz birçok API uç noktasına sahiptir.
Bu bölümde, API’ye kimlik doğrulama yapmayı, API’ye bağlanmayı, bir konuya yorum yapmayı ve bir birleştirme isteğinin durumunu değiştirmeyi öğreneceğiz.</p>
</div>
</div>
<div class="sect3">
<h3 id="_temel_kullanım">Temel Kullanım</h3>
<div class="paragraph">
<p>Yapabileceğiniz en temel şey, bir uç noktada kimlik doğrulaması gerektirmeyen basit bir GET isteğidir.
Bu, bir kullanıcı veya açık kaynaklı bir projedeki salt-okunur bilgiler olabilir.
Örneğin, ``schacon`` adlı bir kullanıcı hakkında daha fazla bilgi edinmek istiyorsak, şöyle bir şey çalıştırabiliriz:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl https://api.github.com/users/schacon
{
  "login": "schacon",
  "id": 70,
  "avatar_url": "https://avatars.githubusercontent.com/u/70",
# …
  "name": "Scott Chacon",
  "company": "GitHub",
  "following": 19,
  "created_at": "2008-01-27T17:19:28Z",
  "updated_at": "2014-06-10T02:37:23Z"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>GitHub üzerinde görebileceğiniz - herkese açık olarak yayınlanan - neredeyse her şey (topluluklar, projeler, konular, katkılar, vs) hakkında bilgi alabileceğiniz, buna benzer birçok uç nokta bulunmaktadır.
API’yi kullanarak keyfinize göre bir Markdown oluşturabilir veya bir <code>.gitignore</code> şablonu bulabilirsiniz.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl https://api.github.com/gitignore/templates/Java
{
  "name": "Java",
  "source": "*.class

# Mobile Tools for Java (J2ME)
.mtj.tmp/

# Package Files #
*.jar
*.war
*.ear

# virtual machine crash logs, see https://www.java.com/en/download/help/error_hotspot.xml
hs_err_pid*
"
}</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_bir_konuda_yorum_yapmak">Bir Konuda Yorum Yapmak</h3>
<div class="paragraph">
<p>Ancak, bir konu ya da birleştirme isteğine yorum yapmak veya özel içeriği görüntülemek ya da onla etkileşime girmek gibi bir işlem yapmak istiyorsanız, kimlik doğrulaması yapmanız gerekecektir.</p>
</div>
<div class="paragraph">
<p>Kimlik doğrulamanın birkaç yolu vardır.
Sadece kullanıcı adı ve şifrenizle temel kimlik doğrulaması yapabilirsiniz, ancak kişisel bir erişim jetonu kullanmak genellikle daha iyidir.
Bunu, "Ayarlar" (Settings) sayfanızın "Uygulamalar" (Applications) sekmesinden oluşturabilirsiniz.</p>
</div>
<div id="_access_token" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-05-access-token.png" >}}" alt="Erişim jetonu">
</div>
<div class="title">Görsel 133. Ayarlar sayfanızın "Uygulamalar" sekmesinden erişim jetonu oluşturmak.</div>
</div>
<div class="paragraph">
<p>Size bu jetonu ne amaçla kullanmak istediğiniz sorulup, bir açıklama beklenecek.
Betiğiniz veya uygulamanız artık kullanılmadığında, jetonu kafanız rahat bir şekilde kaldırabilmek için, bu jetonu neden oluşturduğunuza dair iyi bir açıklama yazdığınızdan emin olun.</p>
</div>
<div class="paragraph">
<p>GitHub bu jetonu yalnızca bir kez gösterecektir, bu nedenle onu kopyaladığınızdan emin olun.
Bunu betik veya uygulamanızda kullanarak kimliğinizi doğruladığınız taktirde artık kullanıcı adı ve şifre kullanmak zorunda kalmayacaksınız.
Bunun güzel yanı, kullanım kapsamını sınırlayabilir veya istediğinizde iptal edebilirsiniz.</p>
</div>
<div class="paragraph">
<p>Bu yöntem ayrıca, istek sınırınızı artırmak gibi ek bir avantaja da sahiptir.
Kimlik doğrulamasız, saatte 60 istekle sınırlanırsınız ama kimlik doğruladığınızda saatte 5.000 istek yapabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Hadi bunu bir konuya yorum yapmak için kullanalım.
Diyelim ki belirli bir konuya (konu #6 diye adlandıralım) bir yorum bırakmak istiyoruz.
Bunu yapmak için yeni oluşturduğumuz jetonu bir yetkilendirme başlığı olarak kullanarak <code>repos/&lt;user&gt;/&lt;repo&gt;/issues/&lt;num&gt;/comments</code> adresine bir HTTP POST isteği yapmamız gerekecek.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">$ curl -H "Content-Type: application/json" \
       -H "Authorization: token TOKEN" \
       --data '{"body":"A new comment, :+1:"}' \
       https://api.github.com/repos/schacon/blink/issues/6/comments
{
  "id": 58322100,
  "html_url": "https://github.com/schacon/blink/issues/6#issuecomment-58322100",
  ...
  "user": {
    "login": "tonychacon",
    "id": 7874698,
    "avatar_url": "https://avatars.githubusercontent.com/u/7874698?v=2",
    "type": "User",
  },
  "created_at": "2014-10-08T07:48:19Z",
  "updated_at": "2014-10-08T07:48:19Z",
  "body": "A new comment, :+1:"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Şimdi bu konuya giderseniz, az önce başarıyla yayınladığımız yorumu <a href="{{< relurl "book/tr/v2/ch00/_api_comment" >}}">GitHub API’den gönderilen bir yorum.</a> olarak görebilirsiniz.</p>
</div>
<div id="_api_comment" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-06-comment.png" >}}" alt="API Yorumu">
</div>
<div class="title">Görsel 134. GitHub API’den gönderilen bir yorum.</div>
</div>
<div class="paragraph">
<p>GitHub API’sini web sitesinde yapabileceğiniz hemen hemen her şeyi yapmak için kullanabilirsiniz: kilometre taşları oluşturma ve ayarlama, insanları görevlere ve birleştirme isteklerine atama, etiketler oluşturma ve değiştirme, katkı verilerine erişme, yeni katkı ve dallar oluşturma, birleştirme istekleri açma/kapatma veya birleştirme, takımlar oluşturma ve düzenleme, birleştirme isteğindeki kod satırlarına yorum yapma, siteyi arama yapma ve çok daha fazlası.</p>
</div>
</div>
<div class="sect3">
<h3 id="_birleştirme_i̇steğinin_durumunu_değiştirmek">Birleştirme İsteğinin Durumunu Değiştirmek</h3>
<div class="paragraph">
<p>Son olarak, birleştirme istekleriyle çalışıyorsanız oldukça yararlı olan bir örnek daha inceleyeceğiz.
Her bir işlem, bir veya daha fazla durumla ilişkilendirilebilir; bu durumları eklemek ve sorgulamak için bir API bulunmaktadır.</p>
</div>
<div class="paragraph">
<p>"Sürekli Entegrasyon" ve test hizmetlerinin çoğu, kodun test edilmesi için yapılan itmelere (push) tepki vermek için bu API’yi kullanır ve ardından bu işlemin tüm testleri geçip geçmediğini bildirir.
Siz bu API ile, katkı mesajının uygun şekilde biçimlendirilip biçimlendirilmediğini, göndericinin sizin katkı rehberinize uyup uymadığını, katkının geçerli şekilde imzalanıp imzalanmadığını, vb bir çok şeyi kontrol etmek için kullanabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Örneğin reponuzda, "katkı mesajında <code>Signed-off-by</code> dizesi olup olmadığını kontrol eden bir ağ hizmetine" erişen bir ağ kancası kurduğunuzu varsayalım.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-ruby" data-lang="ruby">require 'httparty'
require 'sinatra'
require 'json'

post '/payload' do
  push = JSON.parse(request.body.read) # parse the JSON
  repo_name = push['repository']['full_name']

  # look through each commit message
  push["commits"].each do |commit|

    # look for a Signed-off-by string
    if /Signed-off-by/.match commit['message']
      state = 'success'
      description = 'Successfully signed off!'
    else
      state = 'failure'
      description = 'No signoff found.'
    end

    # post status to GitHub
    sha = commit["id"]
    status_url = "https://api.github.com/repos/#{repo_name}/statuses/#{sha}"

    status = {
      "state"       =&gt; state,
      "description" =&gt; description,
      "target_url"  =&gt; "http://example.com/how-to-signoff",
      "context"     =&gt; "validate/signoff"
    }
    HTTParty.post(status_url,
      :body =&gt; status.to_json,
      :headers =&gt; {
        'Content-Type'  =&gt; 'application/json',
        'User-Agent'    =&gt; 'tonychacon/signoff',
        'Authorization' =&gt; "token #{ENV['TOKEN']}" }
    )
  end
end</code></pre>
</div>
</div>
<div class="paragraph">
<p>Umarım kolayca takip edebilirsin.
Bu web kancası işleyicisinde, yeni işlenen her katkıyı inceleyerek, katkı mesajında <em>Signed-off-by</em> dizesini arıyoruz ve son olarak durumu (status) belirtmek için HTTP aracılığıyla <code>/repos/&lt;user&gt;/&lt;repo&gt;/statuses/&lt;commit_sha&gt;</code> API uç noktasına POST gönderiyoruz.</p>
</div>
<div class="paragraph">
<p>Burada, bir durum (<em>success</em>, <em>failure</em>, <em>error</em>), ne yapıldığına ilişkin bir açıklama, kullanıcının daha fazla bilgi almak için gidebileceği bir hedef URL ve tek bir katkı için birden fazla durum (status) olması durumunda da bir ``bağlam`` (context) gönderebilirsiniz.
Örneğin, bir test hizmeti de veya bunun gibi bir doğrulama hizmeti de bir durum sağlayabilir; "bağlam" (context) alanı onların nasıl farklılaştırıldığını gösterir.</p>
</div>
<div class="paragraph">
<p>Eğer birisi GitHub’da yeni bir birleştirme isteği açarsa ve bu kanca kurulmuşsa, <a href="{{< relurl "book/tr/v2/ch00/_commit_status" >}}">API üzerinden katkı durumu.</a> gibi bir şey görebilirsiniz.</p>
</div>
<div id="_commit_status" class="imageblock">
<div class="content">
<img src="{{< relurl "book/tr/v2/images/scripting-07-status.png" >}}" alt="Katkı durumu">
</div>
<div class="title">Görsel 135. API üzerinden katkı durumu.</div>
</div>
<div class="paragraph">
<p>Artık, mesajında ``Signed-off-by`` dizesi bulunan katkının yanında küçük yeşil bir onay işareti görünürken, yazarın imzalamayı unuttuğu katkının yanında ise kırmızı bir çarpı işareti bulunduğunu görebilirsiniz.
Ayrıca, birleştirme isteğinin, daldaki son katkıyla aynı durum kodunu taşıdığını ve başarısızlık durumunda sizi uyardığını görebilirsiniz.
Eğer bu API’yi test sonuçları için kullanıyorsanız, testleri geçemeyen bir katkıyı yanlışlıkla birleştirmenizi engelleyeceği için, bu çok kullanışlıdır .</p>
</div>
</div>
<div class="sect3">
<h3 id="_octokit">Octokit</h3>
<div class="paragraph">
<p>Bu örneklerde neredeyse her şeyi <code>curl</code> ve basit HTTP istekleri aracılığıyla yapmamıza rağmen, bazı açık kaynaklı kütüphaneler bu API’yi daha kendine özgü bir şekilde kullanmaktadır.
Bu yazının kaleme alındığı sırada desteklenen diller arasında Go, Objective-C, Ruby ve .NET de bulunmaktadır.
HTTP işlemlerinin birçoğunu sizin için halleden bu kütüphane hakkında daha fazla bilgi için <a href="https://github.com/octokit" class="bare">https://github.com/octokit</a> adresine bakabilirsiniz.</p>
</div>
<div class="paragraph">
<p>Umarım bu araçlar, GitHub’ı özelleştirerek, size özel iş akışlarının daha iyi çalışmasını sağlamanıza yardımcı olur.
Yaygın görevler için kılavuzlar ve API hakkında daha detaylı belgeler için <a href="https://developer.github.com" class="bare">https://developer.github.com</a> adresine göz atabilirsiniz.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>