---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: fr
  chapter:
    title: Utilitaires Git
    number: 7
  section:
    title: Signer votre travail
    number: 4
    cs_number: '7.4'
    previous: book/fr/v2/Utilitaires-Git-Remisage-et-nettoyage
    next: book/fr/v2/Utilitaires-Git-Recherche
title: Git - Signer votre travail
---
<h2 id="s_signing">Signer votre travail</h2>
<div class="paragraph">
<p>Git est cryptographiquement sûr, mais il n’est pas infaillible.
Si vous récupérez le travail d’autres personnes sur Internet et souhaitez vérifier que les <em>commits</em> ont effectivement une source de confiance, Git propose quelques méthodes pour signer et vérifier ceci au moyen de GPG.</p>
</div>
<div class="sect3">
<h3 id="_introduction_à_gpg">Introduction à GPG</h3>
<div class="paragraph">
<p>Avant tout, si vous voulez pouvoir signer quoique ce soit, vous devez avoir un GPG configuré et une clé personnelle.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ gpg --list-keys
/Users/schacon/.gnupg/pubring.gpg
---------------------------------
pub   2048R/0A46826A 2014-06-04
uid                  Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;
sub   2048R/874529A9 2014-06-04</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vous n’avez pas de clé, vous pouvez en générer une avec la commande <code>gpg --gen-key</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">gpg --gen-key</code></pre>
</div>
</div>
<div class="paragraph">
<p>A présent que vous avez une clé privée permettant de signer, vous pouvez configurer Git pour l’utiliser pour signer diverses choses en renseignant le paramètre de configuration <code>user.signingkey</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">git config --global user.signingkey 0A46826A</code></pre>
</div>
</div>
<div class="paragraph">
<p>A partir de maintenant, Git utilisera par défaut votre clé pour signer les étiquettes et les <em>commits</em> que vous souhaitez.</p>
</div>
</div>
<div class="sect3">
<h3 id="_signer_des_étiquettes">Signer des étiquettes</h3>
<div class="paragraph">
<p>Avec votre clé privée GPG renseignée, vous pouvez signer des étiquettes.
Tout ce que vous avez à faire, c’est remplacer <code>-a</code> par <code>-s</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git tag -s v1.5 -m 'mon étiquette signée 1.5'

You need a passphrase to unlock the secret key for
user: "Ben Straub &lt;ben@straub.cc&gt;"
2048-bit RSA key, ID 800430EB, created 2014-05-04</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vous lancez <code>git show</code> sur cette étiquette, vous pouvez voir votre signature GPG attachée :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git show v1.5
tag v1.5
Tagger: Ben Straub &lt;ben@straub.cc&gt;
Date:   Sat May 3 20:29:41 2014 -0700

mon étiquette signée 1.5
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1

iQEcBAABAgAGBQJTZbQlAAoJEF0+sviABDDrZbQH/09PfE51KPVPlanr6q1v4/Ut
LQxfojUWiLQdg2ESJItkcuweYg+kc3HCyFejeDIBw9dpXt00rY26p05qrpnG+85b
hM1/PswpPLuBSr+oCIDj5GMC2r2iEKsfv2fJbNW8iWAXVLoWZRF8B0MfqX/YTMbm
ecorc4iXzQu7tupRihslbNkfvfciMnSDeSvzCpWAHl7h8Wj6hhqePmLm9lAYqnKp
8S5B/1SSQuEAjRZgI4IexpZoeKGVDptPHxLLS38fozsyi0QyDyzEgJxcJQVMXxVi
RUysgqjcpT8+iQM1PblGfHR4XAhuOqN5Fx06PSaFZhqvWFezJ28/CLyX5q+oIVk=
EFTF
-----END PGP SIGNATURE-----

commit ca82a6dff817ec66f44342007202690a93763949
Author: Scott Chacon &lt;schacon@gee-mail.com&gt;
Date:   Mon Mar 17 21:52:11 2008 -0700

    changed the version number</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_verifier_des_étiquettes">Verifier des étiquettes</h3>
<div class="paragraph">
<p>Pour vérifier une étiquette signée, vous utilisez <code>git tag -v [nom-de-l-etiquette]</code>.
Cette commande utilise GPG pour vérifier la signature.
Vous devez posséder la clé publique du signataire dans votre trousseau pour que cela fonctionne.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git tag -v v1.4.2.1
object 883653babd8ee7ea23e6a5c392bb739348b1eb61
type commit
tag v1.4.2.1
tagger Junio C Hamano &lt;junkio@cox.net&gt; 1158138501 -0700

GIT 1.4.2.1

Minor fixes since 1.4.2, including git-mv and git-http with alternates.
gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A
gpg: Good signature from "Junio C Hamano &lt;junkio@cox.net&gt;"
gpg:                 aka "[jpeg image of size 1513]"
Primary key fingerprint: 3565 2A26 2040 E066 C9A7  4A7D C0C6 D9A4 F311 9B9A</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vous ne possédez pas la clé publique du signataire, vous obtiendrez plutôt quelque chose comme :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">gpg: Signature made Wed Sep 13 02:08:25 2006 PDT using DSA key ID F3119B9A
gpg: Can't check signature: public key not found
error: could not verify the tag 'v1.4.2.1'</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="s_signing_commits">Signer des <em>commits</em>
</h3>
<div class="paragraph">
<p>Dans les versions les plus récentes de Git (à partir de v1.7.9), vous pouvez maintenant signer aussi les <em>commits</em> individuels.
Si signer directement des <em>commits</em> au lieu d’étiquettes vous intéresse, tout ce que vous avez à faire est d’ajouter l’option <code>-S</code> à votre commande <code>git commit</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit -a -S -m 'commit signé'

You need a passphrase to unlock the secret key for
user: "Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"
2048-bit RSA key, ID 0A46826A, created 2014-06-04

[master 5c3386c] commit signé
 4 files changed, 4 insertions(+), 24 deletions(-)
 rewrite Rakefile (100%)
 create mode 100644 lib/git.rb</code></pre>
</div>
</div>
<div class="paragraph">
<p>Pour visualiser et vérifier ces signatures, il y a l’option <code>--show-signature</code> pour <code>git log</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --show-signature -1
commit 5c3386cf54bba0a33a32da706aa52bc0155503c2
gpg: Signature made Wed Jun  4 19:49:17 2014 PDT using RSA key ID 0A46826A
gpg: Good signature from "Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"
Author: Scott Chacon &lt;schacon@gmail.com&gt;
Date:   Wed Jun 4 19:49:17 2014 -0700

    commit signé</code></pre>
</div>
</div>
<div class="paragraph">
<p>En complément, vous pouvez configurer <code>git log</code> pour vérifier toutes les signatures qu’il trouvera et les montrer grâce au formatage <code>%G?</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git log --pretty="format:%h %G? %aN  %s"

5c3386c G Scott Chacon  commit signé
ca82a6d N Scott Chacon  changed the verison number
085bb3b N Scott Chacon  removed unnecessary test code
a11bef0 N Scott Chacon  first commit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ici nous pouvons voir que seul le dernier <em>commit</em> est signé et valide tandis que les précédents ne le sont pas.</p>
</div>
<div class="paragraph">
<p>Depuis Git 1.8.3, <code>git merge</code> et <code>git pull</code> peuvent vérifier et annuler une fusion d’un <em>commit</em> qui ne porte pas de signature GPG de confiance, avec la commande <code>--verify-signatures</code>.</p>
</div>
<div class="paragraph">
<p>Si vous utilisez cette option lors de la fusion d’une branche et qu’elle contient des <em>commits</em> qui ne sont pas signés et valides, la fusion échouera.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge --verify-signatures non-verify
fatal: La validation ab06180 n'a pas de signature GPG.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si la fusion ne contient que des <em>commits</em> signés valides, la commande de fusion vous montrera toutes les signatures vérifiées et démarrera la fusion proprement dite.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge --verify-signatures signed-branch
La validation 13ad65e a une signature GPG correcte par Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;
Mise à jour 5c3386c..13ad65e
Avance rapide
 README | 2 ++
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Vous pouvez aussi utiliser l’option <code>-S</code> avec la commande <code>git merge</code> elle-même pour signer le <em>commit</em> de fusion.
L’exemple suivant vérifie que tous les <em>commits</em> dans la branche à fusionner sont signés et de plus signe le <em>commit</em> de fusion résultant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge --verify-signatures -S  signed-branch
Commit 13ad65e a une signature GPG correcte par Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;

You need a passphrase to unlock the secret key for
user: "Scott Chacon (Git signing key) &lt;schacon@gmail.com&gt;"
2048-bit RSA key, ID 0A46826A, created 2014-06-04

Merge made by the 'recursive' strategy.
 README | 2 ++
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_tout_le_monde_doit_signer">Tout le monde doit signer</h3>
<div class="paragraph">
<p>Signer les étiquettes et les <em>commits</em>, c’est bien mais si vous décidez d’utiliser cette fonction dans votre méthode de travail, il faudra s’assurer que tous les membres de votre équipe comprennent comment s’y prendre.
Sinon, vous allez devoir passer du temps à aider les personnes à réécrire leurs <em>commits</em> en version signée.
Assurez-vous de bien comprendre GPG et les bénéfices de la signature avant d’adopter cette pratique dans vos méthodes de travail.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>