---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: fr
  chapter:
    title: Les branches avec Git
    number: 3
  section:
    title: Gestion des branches
    number: 3
    cs_number: '3.3'
    previous: book/fr/v2/Les-branches-avec-Git-Branches-et-fusions :-les-bases
    next: book/fr/v2/Les-branches-avec-Git-Travailler-avec-les-branches
title: Git - Gestion des branches
---
<h2 id="s_branch_management">Gestion des branches</h2>
<div class="paragraph">
<p>
Maintenant que vous avez créé, fusionné et supprimé des branches, regardons de plus près les outils de gestion des branches qui s’avèreront utiles lors d’une utilisation intensive des branches.</p>
</div>
<div class="paragraph">
<p>La commande <code>git branch</code> permet en fait bien plus que la simple création et suppression de branches.
Si vous la lancez sans argument, vous obtenez la liste des branches courantes :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch
  iss53
* master
  testing</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notez le caractère <code>*</code> qui préfixe la branche <code>master</code> : il indique la branche courante (c’est-à-dire la branche sur laquelle le pointeur <code>HEAD</code> se situe).
Ceci signifie que si, dans cette situation, vous validez des modifications (grâce à <code>git commit</code>), le pointeur de la branche <code>master</code> sera mis à jour pour inclure vos modifications.
Pour visualiser la liste des derniers <em>commits</em> sur chaque branche, vous pouvez utiliser le commande <code>git branch -v</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -v
  iss53   93b412c fix javascript issue
* master  7a98805 Merge branch 'iss53'
  testing 782fd34 add scott to the author list in the readmes</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>--merged</code> et <code>--no-merged</code> sont des options très utiles qui permettent de filtrer les branches de cette liste selon que vous les avez ou ne les avez pas encore fusionnées avec la branche courante.
Pour voir quelles branches ont déjà été fusionnées dans votre branche courante, lancez <code>git branch --merged</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch --merged
  iss53
* master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comme vous avez déjà fusionné <code>iss53</code> un peu plus tôt, vous la voyez dans votre liste.
Les branches de cette liste qui ne comportent pas le préfixe <code>*</code> peuvent généralement être effacées sans risque au moyen de <code>git branch -d</code> puisque vous avez déjà intégré leurs modifications dans une autre branche et ne risquez donc pas de perdre quoi que ce soit.</p>
</div>
<div class="paragraph">
<p>Pour visualiser les branches qui contiennent des travaux qui n’ont pas encore été fusionnés, vous pouvez utiliser la commande <code>git branch --no-merged</code>  :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch --no-merged
  testing</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ceci affiche votre autre branche.
Comme elle contient des modifications qui n’ont pas encore été intégrées, essayer de les supprimer par la commande <code>git branch -d</code> se solde par un échec :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d testing
error: The branch 'testing' is not fully merged.
If you are sure you want to delete it, run 'git branch -D testing'.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si vous souhaitez réellement supprimer cette branche et perdre ainsi le travail réalisé, vous pouvez tout de même forcer la suppression avec l’option <code>-D</code>, comme l’indique le message.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Astuce</div>
</td>
<td class="content">
<div class="paragraph">
<p>Les options décrites ci-dessus, <code>--merged</code> et <code>--no-merged</code> vont, si on ne leur fournit pas un nom de branche ou de commit comme argument, vous afficher ce qui a été, respectivement, fusionné ou non-fusionné dans votre branche <em>actuelle</em>.</p>
</div>
<div class="paragraph">
<p>Vous pouvez toujours fournir un argument additionnel pour interroger l’état de fusion par rapport à une autre branche sans extraire cette branche avant, comme lorsqu’on se demande ce qui n’a pas été fusionné dans la branche <code>master</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout testing
$ git branch --no-merged master
  topicA
  featureB</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h3 id="_renommer_une_branche">Renommer une branche</h3>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Attention</div>
</td>
<td class="content">
<div class="paragraph">
<p>Ne renommez pas les branches qui sont encore utilisées par d’autres collaborateurs.
Ne renommez pas une branche telle que master/main/mainline avant d’avoir lu la section « Renommer la branche master ».</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Supposez que vous avez une branche appelée <em>mauvais-nom-de-branche</em> et que vous voulez la changer en <em>nom-de-branche-corrigé</em>, tout en conservant l’historique.
Vous voulez aussi changer le nom de la branche sur le serveur distant (GitHub, GitLab, ou tout autre serveur).
Comment s’y prendre ?</p>
</div>
<div class="paragraph">
<p>Renommez la branche localement avec la commande <code>git branch --move</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch --move mauvais-nom-de-branche nom-de-branche-corrigé</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ceci remplace votre mauvais-nom-de-branche par nom-de-branche-corrigé, mais seulement localement pour l’instant.
Pour montrer aux autres la branche corrigée sur le serveur distant, poussez-la :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push --set-upstream origin nom-de-branche-corrigé</code></pre>
</div>
</div>
<div class="paragraph">
<p>Faisons un point rapide :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch --all
* nom-de-branche-corrigé
  main
  remotes/origin/mauvais-nom-de-branche
  remotes/origin/nom-de-branche-corrigé
  remotes/origin/main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notez que vous êtes sur la branche nom-de-branche-corrigé.
La branche corrigée est disponible sur le serveur distant.
Cependant la branche mauvaise est encore aussi présente sur le serveur distant.
Vous pouvez supprimer la branche mauvaise du serveur distant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin --delete mauvais-nom-de-branche</code></pre>
</div>
</div>
<div class="paragraph">
<p>À présent, le mauvais nom de branche est complètement remplacé par le nom de branche corrigé.</p>
</div>
<div class="sect4">
<h4 id="_changer_le_nom_de_la_branche_master">Changer le nom de la branche master</h4>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Avertissement</div>
</td>
<td class="content">
<div class="paragraph">
<p>Changer le nom d’une branche telle que master/main/mainline/default va casser les outils d’intégration de service et d’aide, ainsi que les scripts de construction/publication que votre dépôt utilise.
Avant de le faire, assurez-vous de tout couvrir avec vos collaborateurs.
Assurez-vous aussi de rechercher précisément et de mettre à jour toutes les références à la vieille branche dans votre dépôt et dans les scripts.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Renommez votre branche locale <code>master</code> en <code>main</code> avec la commande suivante :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch --move master main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Il n’y a plus de branche <code>master</code> en local, parce qu’elle a été renommée en branche <code>main</code>.</p>
</div>
<div class="paragraph">
<p>Pour avertir les autres de cette branch <code>main</code>, vous devez la pousser sur le serveur distant
Cela rend la branche renommée disponible sur le serveur distant.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push --set-upstream origin main</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enfin, nous finissons dans l’état suivant :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">git branch --all
* main
  remotes/origin/HEAD -&gt; origin/master
  remotes/origin/main
  remotes/origin/master</code></pre>
</div>
</div>
<div class="paragraph">
<p>Votre branche locale <code>master</code> a disparu, car elle a été remplacée par la branche <code>main</code>.
La branche <code>main</code> est aussi disponible sur le serveur distant.
Mais le serveur distant a toujours la branche <code>master</code>.
Les autres collaborateurs vont continuer à utiliser la branche <code>master</code> comme base pour leurs travaux, jusqu’à ce que vous fassiez quelques modifications supplémentaires.</p>
</div>
<div class="paragraph">
<p>Maintenant, vous avez quelques tâches supplémentaires à faire pour terminer la transition :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Tous les autres projets dépendant de celui-ci doivent être avoir leur configuration et leur code modifiés en conséquence.</p>
</li>
<li>
<p>Mettez à jours tous vos fichiers de configuration de test.</p>
</li>
<li>
<p>Ajustez les scripts de construction et de publication.</p>
</li>
<li>
<p>Redirigez les réglages sur votre hôte de dépôt concernant les choses telles que la branche par défaut du dépôt, le règles de fusion et toute autre configuration qui a trait aux noms de branche.</p>
</li>
<li>
<p>Mettez à jour les références à l’ancienne branche dans la documentation.</p>
</li>
<li>
<p>Fermez ou fusionnez toutes les demandes de tirage destinées à l’ancienne branche.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Après toutes ces tâches, et s’être assuré que la branche <em>main</em> se comporte comme la branche <em>master</em>, vous pouvez supprimer la branche <em>master</em> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git push origin --delete master</code></pre>
</div>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>