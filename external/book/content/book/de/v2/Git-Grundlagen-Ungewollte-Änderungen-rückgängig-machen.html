---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: de
  chapter:
    title: Git Grundlagen
    number: 2
  section:
    title: Ungewollte Änderungen rückgängig machen
    number: 4
    cs_number: '2.4'
    previous: book/de/v2/Git-Grundlagen-Anzeigen-der-Commit-Historie
    next: book/de/v2/Git-Grundlagen-Mit-Remotes-arbeiten
title: Git - Ungewollte Änderungen rückgängig machen
url: "/book/de/v2/Git-Grundlagen-Ungewollte-Änderungen-rückgängig-machen.html"
---
<h2 id="_undoing">Ungewollte Änderungen rückgängig machen</h2>
<div class="paragraph">
<p>Es kommt sicherlich irgendwann der Zeitpunkt, an dem du eine Änderung rückgängig (engl. undo) machen willst.
Wir werden hier einige grundlegende Werkzeuge besprechen, mit denen du genau das tun kannst.
Sei vorsichtig, man kann diese Aktionen nicht immer rückgängig machen.
Das ist einer der wenigen Bereiche in Git, in denen du Arbeit verlieren könntest, wenn du etwas falsch machst.</p>
</div>
<div class="paragraph">
<p>Eines der häufigsten Undos tritt auf, wenn du zu früh committest und möglicherweise vergessen hast, einige Dateien hinzuzufügen, oder wenn du Fehler in deiner Commit-Nachricht hast.
Wenn du diesen Commit wiederholen möchtest, nimm zusätzlichen Änderungen vor, die du vergessen hast, stage Sie und committe erneut mit der Option <code>--amend</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit --amend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Dieser Befehl übernimmt deine Staging-Area und verwendet sie für den Commit.
Wenn du seit deinem letzten Commit keine Änderungen vorgenommen hast (z.B. du führst diesen Befehl unmittelbar nach deinem vorherigen Commit aus), dann sieht dein Snapshot genau gleich aus; du änderst nur deine Commit-Nachricht.</p>
</div>
<div class="paragraph">
<p>Der gleiche Commit-Message-Editor wird aufgerufen, enthält aber bereits die Nachricht deines vorherigen Commits.
Du kannst die Nachricht wie gewohnt bearbeiten, aber sie überschreibt den vorherigen Commit.</p>
</div>
<div class="paragraph">
<p>Wenn du beispielsweise einen Commit durchführst und dann feststellst, dass du vergessen hast, eine Datei zu ändern, könntest du Folgendes tun:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git commit -m 'Initial commit'
$ git add forgotten_file
$ git commit --amend</code></pre>
</div>
</div>
<div class="paragraph">
<p>Du erhälst am Ende einen einzigen Commit – der zweite Commit ersetzt die Ergebnisse des Ersten.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Anmerkung</div>
</td>
<td class="content">
<div class="paragraph">
<p>Es ist wichtig zu verstehen: wenn du deinen letzten Commit änderst, korrigierst du ihn nicht. Du <em>ersetzt</em> ihn durch einen neuen, verbesserten Commit. Der alte Commit wird entfernt und der neue Commit an seine Stelle gesetzt.
Tatsächlich ist es so, als ob der letzte Commit nie stattgefunden hätte und er nicht mehr in deinem Repository-Verlauf auftaucht.</p>
</div>
<div class="paragraph">
<p>Der naheliegendste Nutzen für die Änderung von Commits besteht darin, kleine Verbesserungen an deinem letzten Commit vorzunehmen, ohne dein Repository-Verlauf mit Commit-Nachrichten der Form „Ups, vergessen, eine Datei hinzuzufügen“ oder „Verdammt, einen Tippfehler im letzten Commit behoben“ zu überladen.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Anmerkung</div>
</td>
<td class="content">
<div class="paragraph">
<p>Änderne nur lokale Commits, die noch nicht gepusht wurden.
Das Ändern zuvor übertragener Commits und das forcierte pushen des Branches verursacht Probleme bei ihren Mitstreitern.
Weitere Informationen darüber, was dabei passiert und wie du es wieder gerade ziehen kannst, wenn du dich auf der Empfängerseite befinden, findest du unter <a href="{{< relurl "book/de/v2/ch00/_rebase_peril" >}}">Die Gefahren des Rebasing</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h3 id="_unstaging">Eine Datei aus der Staging-Area entfernen</h3>
<div class="paragraph">
<p>Die nächsten beiden Abschnitte erläutern, wie du mit deiner Staging-Area und den Änderungen des Arbeitsverzeichnisses arbeitest.
Der angenehme Nebeneffekt ist, dass der Befehl, mit dem du den Zustand dieser beiden Bereiche bestimmst, dich auch daran erinnert, wie du Änderungen an ihnen rückgängig machen kannst.
Nehmen wir zum Beispiel an, du hast zwei Dateien geändert und möchtest sie als zwei separate Änderungen übertragen, aber du gibst versehentlich <code>git add *</code> ein und stellst sie dann beide in der Staging-Area bereit.
Wie kannst du eine der beiden aus der Staging-Area entfernen?
Der Befehl <code>git status</code> meldet:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git add *
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README
    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Direkt unter dem Text „Changes to be committed“, steht, dass man <code>git reset HEAD &lt;file&gt;…​</code> verwenden soll, um die Staging-Area zu entleeren.
Lass uns also diesem Rat folgen und die Datei <code>CONTRIBUTING.md</code> aus der Staging-Area entfernen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git reset HEAD CONTRIBUTING.md
Unstaged changes after reset:
M	CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Der Befehl klingt etwas merkwürdig, aber er funktioniert.
Die Datei <code>CONTRIBUTING.md</code> ist modifiziert und wieder im Status unstaged überführt.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Anmerkung</div>
</td>
<td class="content">
<div class="paragraph">
<p>Es stimmt, dass <code>git reset</code> ein riskanter Befehl sein kann, besonders, wenn du das <code>--hard</code> Flag mitgibst.
In dem oben beschriebenen Szenario wird die Datei in deinem Arbeitsverzeichnis jedoch nicht angetastet, so dass er relativ sicher ist.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Im Moment ist dieser Aufruf alles, was du über den Befehl <code>git reset</code> wissen musst.
Wir werden viel ausführlicher darauf eingehen, was <code>reset</code> bewirkt und wie man damit umgeht, um wirklich interessante Aufgaben zu erledigen, siehe Kapitel 7 <a href="{{< relurl "book/de/v2/ch00/_git_reset" >}}">Git Reset</a>.</p>
</div>
</div>
<div class="sect3">
<h3 id="_änderung_in_einer_modifizierten_datei_zurücknehmen">Änderung in einer modifizierten Datei zurücknehmen</h3>
<div class="paragraph">
<p>Was ist, wenn du feststellst, dass du deine Änderungen an der Datei <code>CONTRIBUTING.md</code> nicht behalten willst?
Wie kannst du sie in den Ursprungszustand zurücksetzen, so wie sie beim letzten Commit ausgesehen hat (oder anfänglich geklont wurde, oder wie auch immer du sie in dein Arbeitsverzeichnis bekommen hast)?
Glücklicherweise sagt dir <code>git status</code>, wie du das machen kannst.
Im letzten Beispiel sieht die Unstaged-Area so aus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git checkout -- &lt;file&gt;..." to discard changes in working directory)

    modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git erklärt dir, wie du die von dir vorgenommenen Änderungen verwerfen kannst.
Lassen es uns ausführen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -- CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git reset HEAD &lt;file&gt;..." to unstage)

    renamed:    README.md -&gt; README</code></pre>
</div>
</div>
<div class="paragraph">
<p>Wie du siehst, wurde die Änderungen rückgängig gemacht.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Wichtig</div>
</td>
<td class="content">
<div class="paragraph">
<p>Es ist sehr wichtig zu begreifen, dass <code>git checkout -- &lt;file&gt;</code> ein riskanter Befehl ist.
Alle lokalen Änderungen, die du an dieser Datei vorgenommen hast, sind verloren – Git hat diese Datei einfach durch die zuletzt committete oder gestagte Version ersetzt.
Verwenden diesen Befehl nur, wenn du dir absolut sicher bist, dass du diese nicht gespeicherten lokalen Änderungen nicht benötigst.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Wenn du die Änderungen, die du an dieser Datei gemacht hast, beibehalten möchten, sie aber vorerst aus dem Weg räumen willst, sollten wir das Stashing und Branching in Kapitel 3 – <a href="{{< relurl "book/de/v2/ch00/ch03-git-branching" >}}">Git Branching</a> durchgehen; das sind im Allgemeinen die besseren Methoden, um das zu erledigen.</p>
</div>
<div class="paragraph">
<p>Denke daran, dass alles, was in Git <em>committet</em> wird, fast immer wiederhergestellt werden kann.
Sogar Commits, die auf gelöschten Branches lagen oder Commits, die mit einem <code>--amend</code> Commit überschrieben wurden, können wiederhergestellt werden (siehe Kapitel 10 <a href="{{< relurl "book/de/v2/ch00/_data_recovery" >}}">Daten-Rettung</a> für das Wiederherstellen der Daten).
Aber: alles, was du verworfen und nie committet hast, wirst du wahrscheinlich nie wieder sehen.</p>
</div>
</div>
<div class="sect3">
<h3 id="undoing_git_restore">Änderungen mit git restore Rückgängig machen</h3>
<div class="paragraph">
<p>Git Version 2.23.0 führte einen neuen Befehl ein: <code>git restore</code>.
Es ist im Grunde eine Alternative zu <code>git reset</code>, die wir gerade behandelt haben.
Ab Git Version 2.23.0 verwendet Git für viele dieser Vorgänge <code>git restore</code> anstelle von <code>git reset</code>.</p>
</div>
<div class="paragraph">
<p>Lasse uns unsere Schritte wiederholen und die Dinge mit <code>git restore</code> anstelle von <code>git reset</code> rückgängig machen.</p>
</div>
<div class="sect4">
<h4 id="_eine_datei_mit_git_restore_unstagen">Eine Datei mit git restore unstagen</h4>
<div class="paragraph">
<p>Die nächsten beiden Abschnitte zeigen, wie du an Änderungen in deinem Staging-Bereich und im Arbeitsverzeichnisses mit <code>git restore</code> arbeitest.
Das Schöne daran ist, dass der Befehl, mit dem du den Status dieser beiden Bereiche bestimmst, dir auch zeigt, wie du Änderungen an ihnen rückgängig machen kannst.
Angenommen, du hast zwei Dateien geändert und möchtest sie als zwei separate Änderungen committen. Du gibst jedoch versehentlich <code>git add *</code> ein und committest beide.
Wie kannst du eine der beiden wieder unstagen?
Der Befehl <code>git status</code> zeigt folgendes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git add *
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	modified:   CONTRIBUTING.md
	renamed:    README.md -&gt; README</code></pre>
</div>
</div>
<div class="paragraph">
<p>Direkt unter dem Text „Changes to be committed“ steht <code>git restore --staged &lt;file&gt; …​</code> zum unstagen.
Verwenden wir diesen Rat, um die Datei <code>CONTRIBUTING.md</code> zu unstagen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git restore --staged CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    README.md -&gt; README

Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
	modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Die Datei <code>CONTRIBUTING.md</code> ist modifiziert und wieder im Status unstaged überführt.</p>
</div>
</div>
<div class="sect4">
<h4 id="_eine_geänderte_datei_mit_git_restore_rückgängig_machen">Eine geänderte Datei mit git restore rückgängig machen</h4>
<div class="paragraph">
<p>Was ist, wenn du merkst, dass du deine Änderungen an der Datei <code>CONTRIBUTING.md</code> nicht beibehalten willst?
Wie kannst du sie in den Ursprungszustand zurücksetzen, so wie sie beim letzten Commit ausgesehen hat (oder anfänglich geklont wurde, oder wie auch immer du sie in dein Arbeitsverzeichnis bekommen hast)?
Glücklicherweise sagt dir <code>git status</code>, wie du das machen kannst.
Im letzten Beispiel sieht die Unstaged-Area so aus:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Changes not staged for commit:
  (use "git add &lt;file&gt;..." to update what will be committed)
  (use "git restore &lt;file&gt;..." to discard changes in working directory)
	modified:   CONTRIBUTING.md</code></pre>
</div>
</div>
<div class="paragraph">
<p>Git erklärt dir, wie du die von dir vorgenommene Änderungen verwerfen kannst.
Lassen es uns ausführen:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git restore CONTRIBUTING.md
$ git status
On branch master
Changes to be committed:
  (use "git restore --staged &lt;file&gt;..." to unstage)
	renamed:    README.md -&gt; README</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Wichtig</div>
</td>
<td class="content">
<div class="paragraph">
<p>Es ist wichtig zu verstehen, dass <code>git restore &lt;file&gt;</code> ein gefährlicher Befehl ist.
Alle lokalen Änderungen, die du an dieser Datei vorgenommen hast, sind weg. Git hat diese Datei durch die zuletzt committete oder gestagte Version ersetzt.
Verwende diesen Befehl nur, wenn du dir absolut sicher bist, dass du diese nicht gespeicherten lokalen Änderungen nicht benötigst.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>