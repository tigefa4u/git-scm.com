---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: fa
  chapter:
    title: شاخه‌سازی در گیت
    number: 3
  section:
    title: شاخه‌سازی و ادغام مقدماتی
    number: 2
    cs_number: '3.2'
    previous: book/fa/v2/شاخه‌سازی-در-گیت-شاخه‌ها-در-یک-کلمه
    next: book/fa/v2/شاخه‌سازی-در-گیت-مدیریت-شاخه
title: Git - شاخه‌سازی و ادغام مقدماتی
url: "/book/fa/v2/شاخه‌سازی-در-گیت-شاخه‌سازی-و-ادغام-مقدماتی.html"
---
<h2 id="_شاخهسازی_و_ادغام_مقدماتی">شاخه‌سازی و ادغام مقدماتی</h2>
<div class="paragraph">
<p>حال بیایید با هم به یک نمونه ساده از مرج‌کردن و برنچ‌سازی با یک روند کاری که احتمالاً در دنیای واقعی از آن استفاده خواهید کرد بپردازیم.
شما این مراحل را دنبال خواهید کرد:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>کمی کار روی یک پروژه وبسایت کنید.</p>
</li>
<li>
<p>یک برنچ جدید برای یک یوزراستوری جدید که روی آن کار می‌کنید بسازید.</p>
</li>
<li>
<p>روی آن برنچ کمی کار کنید.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>در این وهله شما تماسی دریافت می‌کنید که یک مورد بحرانی پیش آمده و باید یک راه حل سریع (هات‌فیکس) برای آن آماده کنید.
شما اینگونه عمل خواهید کرد:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>به برنچ پروداکشن خود بروید.</p>
</li>
<li>
<p>یک برنچ برای اضافه کردن هات‌فیکس به پروژه بسازید.</p>
</li>
<li>
<p>پس از اینکه تست شد برنچ هات‌فیکس را مرج کنید و تغییرات را به برنچ پروداکشن پوش کنید.</p>
</li>
<li>
<p>به یوزراستوری قبلی که روی آن کار می‌کردید باز گردید و به ادامهٔ کار بپردازید.</p>
</li>
</ol>
</div>
<div class="sect3">
<h3 id="_basic_branching">شاخه‌سازی مقدماتی</h3>
<div class="paragraph">
<p>
در ابتدا فرض کنیم که شما روی پروژه‌ای کار می‌کنید و از قبل تعدادی کامیت روی برنچ <code>master</code> دارید.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-1.png" >}}" alt="A simple commit history.">
</div>
<div class="title">نمودار 18. یک تاریخچهٔ کامیت ساده</div>
</div>
<div class="paragraph">
<p>شما تصمیم گرفته‌اید که روی ایشو #53 در سیستم پیگیری-مشکلی (Issue-Tracking System) که کمپانی شما از آن استفاده می‌کند کار کنید.
برای ساختن یک برنچ جدید و تعویض برنچ در آن واحد می‌توانید دستور <code>git checkout</code> را با کلید <code>-b</code> اجرا کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b iss53
Switched to a new branch "iss53"</code></pre>
</div>
</div>
<div class="paragraph">
<p>این دستور کوتاه شده خطوط زیر است:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch iss53
$ git checkout iss53</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-2.png" >}}" alt="Creating a new branch pointer.">
</div>
<div class="title">نمودار 19. ساختن یک نشانگر برنچ جدید</div>
</div>
<div class="paragraph">
<p>شما روی سایت خود کار می‌کنید و چند کامیت می‌کنید.
انجام چنین کاری برنچ <code>iss53</code> را به جلو منتقل می‌کند، به این دلیل که شما آنرا چک‌اوت کرده‌اید (یعنی <code>HEAD</code> شما به آن اشاره دارد):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ vim index.html
$ git commit -a -m 'Create new footer [issue 53]'</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-3.png" >}}" alt="The `iss53` branch has moved forward with your work.">
</div>
<div class="title">نمودار 20. برنچ <code>iss53</code> با کار شما به جلو رفته است</div>
</div>
<div class="paragraph">
<p>حال تماسی به شما می‌گوید که مشکلی در وبسایت هست و شما باید درجا آنرا درست کنید.
با گیت، مجبور نمی‌شوید که فیکس خود را با تغییراتی که در <code>iss53</code> داده‌اید ارائه کنید و مجبور نیستید زحمتی در جهت بازگردانی آن تغییرات بکشید، پیش از اینکه بتوانید روی ارائه فیکس خود به نسخه پروداکشن کنید.
تمام کاری که نیاز است انجام دهید این است که به برنچ <code>master</code> بازگردید.</p>
</div>
<div class="paragraph">
<p>اگرچه قبل از اینکه آن کار را انجام دهید باید دقت کنید که اگر پوشه کاری یا استیج شما تغییرات کامیت‌نشده‌ای دارد که باعث ایجاد تداخل (Conflict) در
برنچی که می‌خواهید به آن چک‌اوت کنید می‌شود، گیت به شما اجازهٔ تعویض برنچ نمی‌دهد.
همیشه بهتر است قبل از تعویض برنچ، پوشه کاری داشته باشید.
راه‌های متفاوتی برای انجام این تمیزکاری وجود دارد (من جمله استش (Stash) و امند کردن کامیت) که در <a href="{{< relurl "book/fa/v2/ch00/_git_stashing" >}}">Stashing and Cleaning</a> به آن خواهیم پرداخت.
فعلاً بیاید فرض کنیم که همه تغییرات کامیت شده‌اند، بنابراین می‌توانید به برنچ <code>master</code> خود انتقال پیدا کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
Switched to branch 'master'</code></pre>
</div>
</div>
<div class="paragraph">
<p>تا اینجای کار پوشه کاری پروژهٔ شما دقیقاً مانند قبل از زمانی است که شروع به کار روی ایشو #53 کردید و می‌توانید روی هات‌فیکس خود تمرکز کنید.
این نکته مهمی برای به خاطر سپردن است: هنگامی که برنچ را تعویض می‌کنید، گیت پوشه کاری شما را بازنشانی می‌کند تا دقیقاً به آن شکلی شود که آخرین بار روی آن برنچ کامیت کردید.
گیت به طور خودکار فایل‌ها را کم، زیاد یا ویرایش می‌کند تا مطمئن شود که کپی فعال شما عیناً مطابق آخرین کامیت روی برنچ است.</p>
</div>
<div class="paragraph">
<p>در ادامه شما باید به هات‌فیکس خود بپردازید.
بیاید یک برنچ <code>hotfix</code> بسازیم و تا زمان تمام شدنش روی آن کار کنیم:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout -b hotfix
Switched to a new branch 'hotfix'
$ vim index.html
$ git commit -a -m 'Fix broken email address'
[hotfix 1fb7853] Fix broken email address
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-4.png" >}}" alt="Hotfix branch based on `master`.">
</div>
<div class="title">نمودار 21. برنچ هات‌فیکس در ادامهٔ <code>master</code>
</div>
</div>
<div class="paragraph">
<p>می‌توانید تست‌های خود را بگیرید، از اینکه هات‌فیکس آنگونه که شما می‌خواهید هست اطمینان حاصل کنید و در آخر برنچ <code>hotfix</code> را با برنچ <code>master</code> مرج کنید تا روی
محیط پروداکشن پیاده‌سازی کنید. شما می‌توانید این کار را با دستور <code>git merge</code> انجام دهید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
$ git merge hotfix
Updating f42c576..3a0874c
Fast-forward
 index.html | 2 ++
 1 file changed, 2 insertions(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>شما متوجه عبارت «fast-forward» در آن مرج می‌شوید.
به این دلیل که کامیت <code>C4</code> توسط برنچ <code>hotfix</code> مورد اشاره قرار گرفته که دقیقاً جلوی کامیت <code>C2</code> است که شما روی آن کار می‌کنید، گیت به سادگی نشانگر را به جلو هل می‌دهد.
به بیان دیگر وقتی سعی می‌کنید یک کامیت را با کامیت دیگری که می‌توان از طریق یپمودن مسیر کامیت اول به آن رسید، مرج کنید،
گیت نشانگر را به جلو می‌کشد چون دوشاخگی در مسیر وجود ندارد که گیت بخواهد آنرا ادغام کند — به این کار «fast-forward» می‌گویند.</p>
</div>
<div class="paragraph">
<p>اکنون تغییرات شما در اسنپ‌شات کامیتی است که برنچ <code>master</code> به آن اشاره می‌کند و شما می‌توانید فیکس خود را ارائه کنید.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-5.png" >}}" alt="`master` is fast-forwarded to `hotfix`.">
</div>
<div class="title">نمودار 22. برنچ <code>master</code> به <code>hotfix</code> فست-فوروارد شد.</div>
</div>
<div class="paragraph">
<p>پس از اینکه فیکس فوق مهمتان ارائه شد، آماده‌اید تا به کاری که پیش از اینکه به شما اطلاع داده شود بازگردید.
هرچند ابتدا شما برنچ <code>hotfix</code> را پاک خواهید کرد، چرا که دیگر آنرا احتیاج ندارید — برنچ <code>master</code> به همانجا اشاره دارد.
شما می‌توانید با آپشن <code>-d</code> دستور <code>git branch</code> آنرا پاک کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d hotfix
Deleted branch hotfix (3a0874c).</code></pre>
</div>
</div>
<div class="paragraph">
<p>حال می‌توانید به برنچ در حال تکمیل شدن قبلی که دربارهٔ ایشو #53 بود بازگردید و به کارکردن روی آن ادامه دهید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout iss53
Switched to branch "iss53"
$ vim index.html
$ git commit -a -m 'Finish the new footer [issue 53]'
[iss53 ad82d7a] Finish the new footer [issue 53]
1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-branching-6.png" >}}" alt="Work continues on `iss53`.">
</div>
<div class="title">نمودار 23. کار روی <code>iss53</code> ادامه پیدا می‌کند</div>
</div>
<div class="paragraph">
<p>اهمیتی ندارد که کاری که روی برنچ <code>hotfix</code> خود به انجام رسانیده‌اید در فایل‌های برنچ <code>iss53</code> موجود نیست.
اگر احتیاج دارید تا آنرا اعمال کنید، می‌توانید با اجرای <code>git merge master</code> برنچ <code>master</code> را در برنچ <code>iss53</code> مرج کنید، یا می‌توانید برای
تعبیه‌سازی تغییرات صبر کنید تا زمانی که تصمیم بگیرید که برنچ <code>iss53</code> را به برنچ <code>master</code> پول کنید.</p>
</div>
</div>
<div class="sect3">
<h3 id="_basic_merging">ادغام مقدماتی</h3>
<div class="paragraph">
<p>
فرض کنید به این نتیجه رسیده‌اید که کار روی ایشوی #53 تمام شده و آماده است تا با برنچ <code>master</code> مرج شود.
برای اینکه این کار را انجام دهید، شما برنچ <code>iss53</code> را درون برنچ <code>master</code> می‌ریزید و ادغام می‌کنید، بسیار شبیه به قبل، زمانی که برنچ <code>hotfix</code> را مرج کردید.
تمام کاری که باید بکنید این است که برنچی که می‌خواهید تغییرات را به آن بریزید را چک‌اوت کنید و دستور <code>git merge</code> را اجرا کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git checkout master
Switched to branch 'master'
$ git merge iss53
Merge made by the 'recursive' strategy.
index.html |    1 +
1 file changed, 1 insertion(+)</code></pre>
</div>
</div>
<div class="paragraph">
<p>این کمی متفاوت از مرج <code>hotfix</code> که قبلاً انجام داده‌اید به نظر می‌رسد.
در این مورد، تاریخچهٔ توسعهٔ شما از یک نقطه قدیمی‌تر به آنسو دوشاخه شده بود.
چرا که کامیتی که روی برنچ کاری شماست، در مسیر مستقیم برنچی که با آن ادغام می‌شود نیست و گیت باید در این رابطه کاری کند.
در این شرایط گیت یک مرج سه طرفه ساده، با استفاده از دو اسنپ‌شاتی که نوک برنچ‌ها به آنها اشاره می‌کنند و یک والد مشترک از هر دو انجام می‌دهد.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-merging-1.png" >}}" alt="Three snapshots used in a typical merge.">
</div>
<div class="title">نمودار 24. سه اسنپ‌شات مورد استفاده در یک مرج معمولی</div>
</div>
<div class="paragraph">
<p>به جای جلو بردن پوینتر برنچ به جلو، گیت یک اسنپ‌شات جدید می‌سازد که حاصل این مرج سه طرفه است و به طور خودکار یک کامیت می‌سازد که به آن اسنپ‌شات اشاره می‌کند.
این کامیت به عنوان یک مرج کامیت، نوعی کامیت خاص که بیش از یک والد دارد، شناخته می‌شود.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="{{< relurl "book/fa/v2/images/basic-merging-2.png" >}}" alt="A merge commit.">
</div>
<div class="title">نمودار 25. یک مرج کامیت</div>
</div>
<div class="paragraph">
<p>حال که کار شما ادغام شده است و شما دیگر نیازی به برنچ <code>iss53</code> ندارید.
شما می‌توانید ایشو را در سیستم پیگیری-مشکلتان ببندید و برنچ را پاک کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git branch -d iss53</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h3 id="_basic_merge_conflicts">تداخلات ادغام پایه</h3>
<div class="paragraph">
<p>
هر از گاهی این فرآیند به این آسانی انجام نمی‌پذیرد.
اگر یک بخش از یک فایل را در دو برنچی که مرج می‌کنید به دو نحو متفاوت ویرایش کرده‌اید، گیت نمی‌تواند به طور بی‌نقص آن‌ها را مرج کند.
اگر فیکس شما برای ایشو #53 همان بخشی را از یک فایل ویرایش کرده که در برنچ <code>hotfix</code> هم ویرایش شده، شما یک تداخل (Conflict) مرج خواهید گرفت که چیزی شبیه زیر خواهد بود:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git merge iss53
Auto-merging index.html
CONFLICT (content): Merge conflict in index.html
Automatic merge failed; fix conflicts and then commit the result.</code></pre>
</div>
</div>
<div class="paragraph">
<p>گیت به طور خودکار یک مرج کامیت جدید نساخته است.
فرآیند را متوقف کرده است تا شما تداخل را حل کنید.
هرگاه می‌خواهید ببینید که چه فایل‌هایی در یک تداخل مرج، مرج‌نشده باقی مانده‌اند، می‌توانید دستور <code>git status</code> را اجرا کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git status
On branch master
You have unmerged paths.
  (fix conflicts and run "git commit")

Unmerged paths:
  (use "git add &lt;file&gt;..." to mark resolution)

    both modified:      index.html

no changes added to commit (use "git add" and/or "git commit -a")</code></pre>
</div>
</div>
<div class="paragraph">
<p>هر چیزی که تداخل مرج دارد و حل نشده باشد به عنوان «مرج‌نشده» (<em>Unmerged</em>) لیست می‌شود.
گیت چند نشانگر استاندارد تفکیک-تداخل را به فایل‌هایی که در آنها تداخل هست اضافه می‌کند تا بتوانید آن‌ها را به طور دستی باز کرده و تداخل‌ها را حل کنید.
فایل شما بخشی خواهد داشت که شبیه زیر خواهد بود:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:index.html
&lt;div id="footer"&gt;contact : email.support@github.com&lt;/div&gt;
=======
&lt;div id="footer"&gt;
 please contact us at support@github.com
&lt;/div&gt;
&gt;&gt;&gt;&gt;&gt;&gt;&gt; iss53:index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>این بدان معناست که نسخه‌ای که در <code>HEAD</code> وجود دارد (برنچ <code>master</code> شما، چرا که این برنچ جایی است که آخرین بار پیش از اینکه دستور مرج را اجرا کنید چک‌اوت کردید) بخش بالایی
آن بلوک است (هر چیزی که بالای <code>=======</code> قرار دارد)، در حالی که نسخهٔ درون برنچ <code>iss53</code> مشابه نوشته‌های بخش زیرین است.
برای حل تداخل، شما می‌توانید یکی از دو طرف را انتخاب کرده یا محتوا را خودتان ادغام کنید.
به طور مثال ممکن است شما با جایگزین کردن کل آن بلوک با چنین محتوایی این تداخل را حل کنید:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-html" data-lang="html">&lt;div id="footer"&gt;
please contact us at email.support@github.com
&lt;/div&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>این راه حل کمی از هر بخش را در خود دارد و خطوط <code>&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>، <code>=======</code> و <code>&lt;&lt;&lt;&lt;&lt;&lt;&lt;</code> هم کاملاً پاک شده‌اند.
بعد از اینکه هر کدام از این بخش‌ها را در هر فایل متداخل را ویرایش کردید، <code>git add</code> را روی هر فایل اجرا کنید تا آنرا به عنوان حل شده علامت‌گذاری کنید.
در گیت، استیج‌کردن فایل آنرا به عنوان حل شده علامت‌گذاری می‌کند.</p>
</div>
<div class="paragraph">
<p>اگر می‌خواهید از ابزاری گرافیکی برای حل این مسائل استفاده کنید، می‌توانید <code>git mergetool</code> را اجرا کنید که
یک ابزار مرج بصری مناسب اجرا می‌کند و شما را در تداخل‌ها همراهی می‌کند:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git mergetool

This message is displayed because 'merge.tool' is not configured.
See 'git mergetool --tool-help' or 'git help config' for more details.
'git mergetool' will now attempt to use one of the following tools:
opendiff kdiff3 tkdiff xxdiff meld tortoisemerge gvimdiff diffuse diffmerge ecmerge p4merge araxis bc3 codecompare vimdiff emerge
Merging:
index.html

Normal merge conflict for 'index.html':
  {local}: modified file
  {remote}: modified file
Hit return to start merge resolution tool (opendiff):</code></pre>
</div>
</div>
<div class="paragraph">
<p>اگر می‌خواهید از ابزار مرجی به جز ابزار پیش‌فرض استفاده کنید (در این مثال گیت <code>opendiff</code> را انتخاب کرده چرا که دستور روی یک مک اجرا شده)،
می‌توانید لیست تمام ابزارهای پشتیبانی شده را در بالا پس از «one of the following tools» مشاهده کنید.
کافیست نام ابزاری که ترجیح می‌دهید استفاده کنید وارد کنید.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">یادداشت</div>
</td>
<td class="content">
<div class="paragraph">
<p>اگر به ابزار پیشرفته‌تری برای حل تداخل‌های خاص دارید، ما به بحث مرج‌کردن در <a href="{{< relurl "book/fa/v2/ch00/_advanced_merging" >}}">Advanced Merging</a> بیشتر می‌پردازیم.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>پس از اینکه ابزار مرج را بستید، گیت از شما دربارهٔ موفقیت آمیز بودن یا نبودن مرج می‌پرسد.
اگر به اسکریپت بگویید موفقیت‌آمیز بود، فایل‌ها را استیج می‌کند تا آنها را برای شما به عنوان حل شده علامت زده باشد.
شما می‌توانید <code>git status</code> را دوباره اجرا کنید تا تصدیق کنید که تمام تداخلات حل شده‌اند:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">$ git status
On branch master
All conflicts fixed but you are still merging.
  (use "git commit" to conclude merge)

Changes to be committed:

    modified:   index.html</code></pre>
</div>
</div>
<div class="paragraph">
<p>اگر از این خروجی راضی هستید و تصدیق می‌کنید که هر چیزی که تداخل داشته استیج شده، می‌توانید <code>git commit</code> را تایپ کنید تا مرج کامیت را ثبت نهایی کنید.
پیغام پیش‌فرض کامیت چیزی شبیه زیر خواهد بود:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">Merge branch 'iss53'

Conflicts:
    index.html
#
# It looks like you may be committing a merge.
# If this is not correct, please remove the file
#	.git/MERGE_HEAD
# and try again.


# Please enter the commit message for your changes. Lines starting
# with '#' will be ignored, and an empty message aborts the commit.
# On branch master
# All conflicts fixed but you are still merging.
#
# Changes to be committed:
#	modified:   index.html
#</code></pre>
</div>
</div>
<div class="paragraph">
<p>اگر فکر می‌کنید که برای دیگرانی که در آینده به این مرج کامیت نگاه می‌کنند مفیدتر خواهد بود، می‌توانید این پیغام را با جزئیاتی درباره اینکه چگونه مرج
را حل کرده‌اید بازنویسی کنید و اگر واضح نیست، توضیح دهید که چه تغییراتی اعمال کرده‌اید.</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>