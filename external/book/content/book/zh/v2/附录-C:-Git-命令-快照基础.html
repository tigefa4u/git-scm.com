---
### DO NOT EDIT! Generated by script/update-book2.rb
category: book
section: documentation
subsection: book
sidebar: book
book:
  language_code: zh
  chapter:
    title: '附录 C: Git 命令'
    number: 3
  section:
    title: 快照基础
    number: 3
    cs_number: A3.3
    previous: book/zh/v2/附录-C:-Git-命令-获取与创建项目
    next: book/zh/v2/附录-C:-Git-命令-分支与合并
title: Git - 快照基础
url: "/book/zh/v2/附录-C:-Git-命令-快照基础.html"
---
<h2 id="_快照基础">快照基础</h2>
<div class="paragraph">
<p>对于基本的暂存内容及提交到你的历史记录中的工作流，只有少数基本的命令。</p>
</div>
<div class="sect3">
<h3 id="_git_add">git add</h3>
<div class="paragraph">
<p><code>git add</code> 命令将内容从工作目录添加到暂存区（或称为索引（index）区），以备下次提交。
当 <code>git commit</code> 命令执行时，默认情况下它只会检查暂存区域，因此 <code>git add</code> 是用来确定下一次提交时快照的样子的。</p>
</div>
<div class="paragraph">
<p>这个命令对于 Git 来说特别重要，所以在本书中被无数次地提及和使用。
我们将快速地过一遍一些可以看到的独特的用法。</p>
</div>
<div class="paragraph">
<p>我们在 <a href="{{< relurl "book/zh/v2/ch00/_tracking_files" >}}">跟踪新文件</a> 一节中介绍并详细解释了 <code>git add</code> 命令。</p>
</div>
<div class="paragraph">
<p>然后，我们在 <a href="{{< relurl "book/zh/v2/ch00/_basic_merge_conflicts" >}}">遇到冲突时的分支合并</a> 一节中提到了如何使用它来解决合并冲突。</p>
</div>
<div class="paragraph">
<p>接下来，我们在 <a href="{{< relurl "book/zh/v2/ch00/_interactive_staging" >}}">交互式暂存</a> 一章中使用它来交互式的暂存一个已修改文件的特定部分。</p>
</div>
<div class="paragraph">
<p>最后，在 <a href="{{< relurl "book/zh/v2/ch00/_tree_objects" >}}">树对象</a> 一节中我们在底层模拟了它的用法，以便你了解幕后发生了什么。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_status">git status</h3>
<div class="paragraph">
<p><code>git status</code> 命令会显示工作区及暂存区域中不同状态的文件。
其中包含了已修改但未暂存，或已经暂存但没有提交的文件。
在一般的显示形式中，它会给你一些如何在这些暂存区之间移动文件的提示。</p>
</div>
<div class="paragraph">
<p>首先，我们在 <a href="{{< relurl "book/zh/v2/ch00/_checking_status" >}}">检查当前文件状态</a> 一节中介绍了 <code>status</code> 的基本及简单的形式。
虽然我们在全书中都有用到它，但是绝大部分的你能用 <code>git status</code> 做的事情都在这一章讲到了。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_diff">git diff</h3>
<div class="paragraph">
<p>当需要查看任意两棵树的差异时，可以使用 <code>git diff</code> 命令。
此命令可以查看你工作环境与你的暂存区的差异（<code>git diff</code> 默认的做法），你暂存区域与你最后提交之间的差异（<code>git diff --staged</code>），或者比较两个提交记录的差异（<code>git diff master branchB</code>）。</p>
</div>
<div class="paragraph">
<p>首先，我们在 <a href="{{< relurl "book/zh/v2/ch00/_git_diff_staged" >}}">查看已暂存和未暂存的修改</a> 一章中研究了 <code>git diff</code> 的基本用法，在此节中我们展示了如何查看哪些变化已经暂存了，哪些没有。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_commit_guidelines" >}}">提交准则</a> 一节中,我们在提交前使用 <code>--check</code> 选项来检查可能存在的空白字符问题。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_what_is_introduced" >}}">确定引入了哪些东西</a> 一节中,了解了使用 <code>git diff A…​B</code> 语法来更有效地比较不同分支之间的差异。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_advanced_merging" >}}">高级合并</a> 一节中我们使用 <code>-b</code> 选项来过滤掉空白字符的差异，及通过 <code>--theirs</code>、<code>--ours</code> 和 <code>--base</code> 选项来比较不同暂存区冲突文件的差异。</p>
</div>
<div class="paragraph">
<p>最后，在 <a href="{{< relurl "book/zh/v2/ch00/_starting_submodules" >}}">开始使用子模块</a> 一节中,我们使用此命令合 <code>--submodule</code> 选项来有效地比较子模块的变化。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_difftool">git difftool</h3>
<div class="paragraph">
<p>当你不想使用内置的 <code>git diff</code> 命令时。<code>git difftool</code> 可以用来简单地启动一个外部工具来为你展示两棵树之间的差异。</p>
</div>
<div class="paragraph">
<p>我们只在 <a href="{{< relurl "book/zh/v2/ch00/_git_diff_staged" >}}">查看已暂存和未暂存的修改</a> 一节中简单的提到了此命令。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_commit">git commit</h3>
<div class="paragraph">
<p><code>git commit</code> 命令将所有通过 <code>git add</code> 暂存的文件内容在数据库中创建一个持久的快照，然后将当前分支上的分支指针移到其之上。</p>
</div>
<div class="paragraph">
<p>首先，我们在 <a href="{{< relurl "book/zh/v2/ch00/_committing_changes" >}}">提交更新</a> 一节中涉及了此命令的基本用法。
我们演示了如何在日常的工作流程中通过使用 <code>-a</code> 标志来跳过 <code>git add</code> 这一步，及如何使用 <code>-m</code> 标志通过命令行而不启动一个编辑器来传递提交信息。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_undoing" >}}">撤消操作</a> 一节中我们介绍了使用 <code>--amend</code> 选项来重做最后的提交。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_git_branches_overview" >}}">分支简介</a>，我们探讨了 <code>git commit</code> 的更多细节，及工作原理。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_signing_commits" >}}">签署提交</a> 一节中我们探讨了如何使用 <code>-S</code> 标志来为提交签名加密。</p>
</div>
<div class="paragraph">
<p>最后，在 <a href="{{< relurl "book/zh/v2/ch00/_git_commit_objects" >}}">提交对象</a> 一节中，我们了解了 <code>git commit</code> 在背后做了什么，及它是如何实现的。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_reset_2">git reset</h3>
<div class="paragraph">
<p><code>git reset</code> 命令主要用来根据你传递给动作的参数来执行撤销操作。
它可以移动 <code>HEAD</code> 指针并且可选的改变 <code>index</code> 或者暂存区，如果你使用 <code>--hard</code> 参数的话你甚至可以改变工作区。
如果错误地为这个命令附加后面的参数，你可能会丢失你的工作，所以在使用前你要确定你已经完全理解了它。</p>
</div>
<div class="paragraph">
<p>首先，我们在 <a href="{{< relurl "book/zh/v2/ch00/_unstaging" >}}">取消暂存的文件</a> 一节中介绍了 <code>git reset</code> 简单高效的用法，用来对执行过 <code>git add</code> 命令的文件取消暂存。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_git_reset" >}}">重置揭密</a> 一节中我们详细介绍了此命令，几乎整节都在解释此命令。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_abort_merge" >}}">中断一次合并</a> 一节中，我们使用 <code>git reset --hard</code> 来取消一个合并，同时我们也使用了 <code>git merge --abort</code> 命令，它是 <code>git reset</code> 的一个简单的封装。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_rm">git rm</h3>
<div class="paragraph">
<p><code>git rm</code> 是 Git 用来从工作区，或者暂存区移除文件的命令。
在为下一次提交暂存一个移除操作上，它与 <code>git add</code> 有一点类似。</p>
</div>
<div class="paragraph">
<p>我们在 <a href="{{< relurl "book/zh/v2/ch00/_removing_files" >}}">移除文件</a> 一节中提到了 <code>git rm</code> 的一些细节，包括递归地移除文件，和使用 <code>--cached</code> 选项来只移除暂存区域的文件但是保留工作区的文件。</p>
</div>
<div class="paragraph">
<p>在本书的 <a href="{{< relurl "book/zh/v2/ch00/_removing_objects" >}}">移除对象</a> 一节中，介绍了 <code>git rm</code> 仅有的几种不同用法，如在执行 <code>git filter-branch</code> 中使用和解释了 <code>--ignore-unmatch</code> 选项。
这对脚本来说很有用。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_mv_2">git mv</h3>
<div class="paragraph">
<p><code>git mv</code> 命令是一个便利命令，用于移到一个文件并且在新文件上执行`git add`命令及在老文件上执行`git rm`命令。</p>
</div>
<div class="paragraph">
<p>我们只是在 <a href="{{< relurl "book/zh/v2/ch00/_git_mv" >}}">移动文件</a> 一节中简单地提到了此命令。</p>
</div>
</div>
<div class="sect3">
<h3 id="_git_clean_2">git clean</h3>
<div class="paragraph">
<p><code>git clean</code> 是一个用来从工作区中移除不想要的文件的命令。
可以是编译的临时文件或者合并冲突的文件。</p>
</div>
<div class="paragraph">
<p>在 <a href="{{< relurl "book/zh/v2/ch00/_git_clean" >}}">清理工作目录</a> 一节中我们介绍了你可能会使用 <code>clean</code> 命令的大量选项及场景。</p>
</div>
</div>
<div id="nav"><a href="{{< previous-section >}}">prev</a> | <a href="{{< next-section >}}">next</a></div>